!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="./src/main.ts")}({"./lib/foster/assets/animations/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/assets/animations/spriteBank.ts")),n(r("./lib/foster/assets/animations/spriteAnimationTemplate.ts")),n(r("./lib/foster/assets/animations/spriteTemplate.ts"))},"./lib/foster/assets/animations/spriteAnimationTemplate.ts":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);Object.defineProperty(t,"__esModule",{value:!0});var o=r("./lib/foster/util/vector.ts"),s=function e(t,r,n,s,a,l){(0,i.default)(this,e),this.loops=!1,this.goto=null,this.name=t,this.speed=r,this.frames=n,this.loops=s||!1,this.position=a||new o.Vector(0,0),this.origin=l||new o.Vector(0,0)};t.SpriteAnimationTemplate=s},"./lib/foster/assets/animations/spriteBank.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/assets/animations/spriteTemplate.ts"),u=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"create",value:function(t){var r=new l.SpriteTemplate(t);return e.bank[t]=r,r}},{key:"get",value:function(t){return e.bank[t]}},{key:"has",value:function(t){return void 0!=e.bank[t]}}]),e}();u.bank={},t.SpriteBank=u},"./lib/foster/assets/animations/spriteTemplate.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/util/rectangle.ts"),u=r("./lib/foster/assets/animations/spriteAnimationTemplate.ts"),c=function(){function e(t){(0,o.default)(this,e),this.animations={},this.name=t}return(0,a.default)(e,[{key:"toString",value:function(){return"<SpriteTemplate '"+this.name+"'>"}},{key:"add",value:function(e,t,r,n,i,o){var s=new u.SpriteAnimationTemplate(e,t,r,n,i,o);return this.animations[e]=s,null==this.first&&(this.first=s),this}},{key:"addFrameAnimation",value:function(e,t,r,n,i,o,s,a,c){for(var d=Math.floor(r.width/n),h=[],f=0;f<o.length;f++){var p=o[f],m=p%d*n,y=Math.floor(p/d)*n;h.push(r.getSubtexture(new l.Rectangle(m,y,n,i)))}var b=new u.SpriteAnimationTemplate(e,t,h,s,a,c);return this.animations[e]=b,null==this.first&&(this.first=b),this}},{key:"get",value:function(e){return this.animations[e]}},{key:"has",value:function(e){return void 0!==this.animations[e]}}]),e}();t.SpriteTemplate=c},"./lib/foster/assets/assetLoader.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/assets/audio/AudioSource.ts"),u=r("./lib/foster/engine.ts"),c=r("./lib/foster/util/io.ts"),d=r("./lib/foster/assets/assets.ts"),h=r("./lib/foster/assets/textures/atlas.ts"),f=r("./lib/foster/assets/textures/texture.ts"),p=function(){function e(t){(0,o.default)(this,e),this.root="",this._loading=!1,this._loaded=!1,this.assets=0,this.assetsLoaded=0,this.textures=[],this.jsons=[],this.xmls=[],this.sounds=[],this.atlases=[],this.texts=[],this.pending={},this.root=t||""}return(0,a.default)(e,[{key:"checkLoading",value:function(){if(this.loading||this.loaded)throw Error("Cannot add more assets when already loaded")}},{key:"addTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.checkLoading(),this.textures.push({path:e,colorKey:t}),this.assets++,this}},{key:"addJson",value:function(e){return this.checkLoading(),this.jsons.push(e),this.assets++,this}},{key:"addXml",value:function(e){return this.checkLoading(),this.xmls.push(e),this.assets++,this}},{key:"addText",value:function(e){return this.checkLoading(),this.texts.push(e),this.assets++,this}},{key:"addSound",value:function(e,t){return this.checkLoading(),this.sounds.push({handle:e,path:t}),this.assets++,this}},{key:"addAtlas",value:function(e,t,r,n){return this.checkLoading(),this.atlases.push({name:e,image:t,data:r,loader:n}),this.assets+=3,this}},{key:"load",value:function(e){this._loading=!0,this.callback=e;var t=!0,r=!1,n=void 0;try{for(var i,o=this.textures[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,a=c.FosterIO.join(this.root,s.path);this.loadTexture({path:a,colorKey:s.colorKey})}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}var l=!0,u=!1,d=void 0;try{for(var h,f=this.jsons[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;this.loadJson(c.FosterIO.join(this.root,p))}}catch(e){u=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw d}}var m=!0,y=!1,b=void 0;try{for(var v,g=this.xmls[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var _=v.value;this.loadXml(c.FosterIO.join(this.root,_))}}catch(e){y=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(y)throw b}}var j=!0,x=!1,w=void 0;try{for(var k,C=this.texts[Symbol.iterator]();!(j=(k=C.next()).done);j=!0){var O=k.value;this.loadText(c.FosterIO.join(this.root,O))}}catch(e){x=!0,w=e}finally{try{!j&&C.return&&C.return()}finally{if(x)throw w}}var S=!0,T=!1,E=void 0;try{for(var P,R=this.sounds[Symbol.iterator]();!(S=(P=R.next()).done);S=!0){var M=P.value;this.loadSound(M.handle,c.FosterIO.join(this.root,M.path))}}catch(e){T=!0,E=e}finally{try{!S&&R.return&&R.return()}finally{if(T)throw E}}var A=!0,L=!1,F=void 0;try{for(var B,D=this.atlases[Symbol.iterator]();!(A=(B=D.next()).done);A=!0){var G=B.value;this.loadAtlas(G)}}catch(e){L=!0,F=e}finally{try{!A&&D.return&&D.return()}finally{if(L)throw F}}}},{key:"unload",value:function(){if(this.loading)throw Error("Cannot unload until finished loading");if(!this.loaded)throw Error("Cannot unload before loading");throw Error("Asset Unloading not Implemented")}},{key:"markPending",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];window.assetLoader=this;var i=this.pending[e]||(this.pending[e]=[]);n?i.push(t):i.splice(i.indexOf(t),1);var o=!1;return function(){o||(o=!0,r.markPending(e,t,!1))}}},{key:"loadTexture",value:function(e,t){var r=this,n=e.path,i=(u.Engine.graphics.gl,new Image),o=this.markPending("texture",n);i.addEventListener("load",function(){var s=f.Texture.create(i,e.colorKey);s.texture.path=n,d.Assets.textures[r.pathify(n)]=s,o(),void 0!==t&&t(s),r.incrementLoader()}),i.src=n}},{key:"loadJson",value:function(e,t){var r=this,n=this,i=this.markPending("json",e);c.FosterIO.read(e,function(o){var s=r.pathify(e);d.Assets.json[s]=JSON.parse(o),i(),void 0!==t&&t(d.Assets.json[s]),n.incrementLoader()})}},{key:"loadXml",value:function(e,t){var r=this,n=this.markPending("xml",e);c.FosterIO.read(e,function(i){var o=r.pathify(e);d.Assets.xml[o]=(new DOMParser).parseFromString(i,"text/xml"),n(),void 0!==t&&t(d.Assets.xml[o]),r.incrementLoader()})}},{key:"loadText",value:function(e,t){var r=this,n=this.markPending("text",e);c.FosterIO.read(e,function(i){var o=r.pathify(e);d.Assets.text[o]=i,n(),void 0!==t&&t(d.Assets.text[o]),r.incrementLoader()})}},{key:"loadSound",value:function(e,t,r){var n=this,i=new Audio,o=this.markPending("sound",t);i.addEventListener("canplaythrough",function(){d.Assets.sounds[e]=new l.AudioSource(t,i),o(),void 0!==r&&r(d.Assets.sounds[e]),n.incrementLoader()}),i.src=t}},{key:"loadAtlas",value:function(e){function t(){if(null!=n&&null!=i){var t=new h.Atlas(e.name,n,i,e.loader);d.Assets.atlases[t.name]=t,r.incrementLoader()}}var r=this,n=null,i=null;this.loadText(c.FosterIO.join(this.root,e.data),function(e){i=e,t()}),this.loadTexture({path:c.FosterIO.join(this.root,e.image),colorKey:null},function(e){n=e,t()})}},{key:"incrementLoader",value:function(){this.assetsLoaded++,this.progressCallback&&this.progressCallback(this.assetsLoaded/this.assets),this.assetsLoaded===this.assets&&(this._loaded=!0,this._loading=!1,void 0!==this.callback&&this.callback())}},{key:"pathify",value:function(e){for(;e.indexOf("\\")>=0;)e=e.replace("\\","/");return e}},{key:"loading",get:function(){return this._loading}},{key:"loaded",get:function(){return this._loaded}},{key:"percent",get:function(){return this.assetsLoaded/this.assets}}]),e}();t.AssetLoader=p},"./lib/foster/assets/assets.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"unload",value:function(){e.json={},e.xml={},e.text={},e.atlases={};for(var t in e.textures)e.textures[t].dispose();e.textures={};for(var r in e.sounds)e.sounds[r].dispose();e.sounds={}}}]),e}();l.textures={},l.json={},l.xml={},l.text={},l.sounds={},l.atlases={},t.Assets=l},"./lib/foster/assets/audio/AudioGroup.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/assets/audio/Sound.ts"),u=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"volume",value:function(t,r){if(void 0!==r&&e.volumes[t]!==r){e.volumes[t]=r;for(var n=0;n<l.Sound.active.length;n++)l.Sound.active[n].ingroup(t)&&(l.Sound.active[n].volume=l.Sound.active[n].volume)}return void 0!=e.volumes[t]?e.volumes[t]:1}},{key:"muted",value:function(t,r){if(void 0!=r&&e.mutes[t]!=r){e.mutes[t]=r;for(var n=0;n<l.Sound.active.length;n++)l.Sound.active[n].ingroup(t)&&(l.Sound.active[n].muted=l.Sound.active[n].muted)}return void 0!=e.mutes[t]&&e.mutes[t]}}]),e}();u.volumes={},u.mutes={},t.AudioGroup=u},"./lib/foster/assets/audio/AudioSource.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(t,r){(0,o.default)(this,e),this.sounds=[],this.path=t,r&&this.sounds.push(r)}return(0,a.default)(e,[{key:"requestSound",value:function(){if(this.sounds.length>0){var t=this.sounds[0];return this.sounds.splice(0,1),t}if(this.sounds.length<e.maxInstances){var r=new Audio;return r.src=this.path,r}return null}},{key:"returnSound",value:function(e){this.sounds.push(e)}},{key:"dispose",value:function(){}}]),e}();l.maxInstances=50,t.AudioSource=l},"./lib/foster/assets/audio/Sound.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/util/index.ts"),c=r("./lib/foster/assets/assets.ts"),d=r("./lib/foster/assets/audio/AudioGroup.ts"),h=function(){function e(t,r){if((0,o.default)(this,e),this.sound=null,this.started=!1,this.groups=[],this.fadePercent=1,this.fadeDuration=1,this._loop=!1,this._paused=!1,this._muted=!1,this._volume=1,this.source=c.Assets.sounds[t],r&&r.length>0){var n=!0,i=!1,s=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;this.group(u)}}catch(e){i=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}}}return(0,a.default)(e,[{key:"play",value:function(e){if(this.loop=e,null!=this.sound&&this.started)this.sound.currentTime=0,this._paused&&this.resume();else if(this.sound=this.source.requestSound(),null!=this.sound)if(this.sound.readyState<3){var t=this;t.loadedEvent=function(){null!=t.sound&&t.internalPlay(),t.sound.removeEventListener("loadeddata",t.loadedEvent),t.loadedEvent=null},this.sound.addEventListener("loadeddata",t.loadedEvent)}else this.internalPlay();return this}},{key:"resume",value:function(){return this.started&&this._paused&&this.sound.play(),this._paused=!1,this}},{key:"pause",value:function(){return this.started&&!this._paused&&this.sound.pause(),this._paused=!0,this}},{key:"stop",value:function(){if(null!=this.sound){this.source.returnSound(this.sound),this.started&&(this.sound.pause(),this.sound.currentTime=0,this.sound.volume=1,this.sound.muted=!1,this.sound.removeEventListener("ended",this.endEvent),null!=this.loadedEvent&&this.sound.removeEventListener("loadeddata",this.loadedEvent)),this.sound=null,this.started=!1,this._paused=!1,this.fadePercent=1;var t=e.active.indexOf(this);t>=0&&e.active.splice(t,1)}return this}},{key:"group",value:function(e){return this.groups.push(e),this.internalUpdateVolume(),this.internalUpdateMuted(),this}},{key:"ungroup",value:function(e){var t=this.groups.indexOf(e);return t>=0&&(this.groups.splice(t,1),this.internalUpdateVolume(),this.internalUpdateMuted()),this}},{key:"ungroupAll",value:function(){return this.groups=[],this.internalUpdateVolume(),this.internalUpdateMuted(),this}},{key:"ingroup",value:function(e){return this.groups.indexOf(e)>=0}},{key:"internalPlay",value:function(){this.started=!0,e.active.push(this);var t=this;this.endEvent=function(){t.stop()},this.sound.addEventListener("ended",this.endEvent),this.sound.loop=this.loop,this.internalUpdateVolume(),this.internalUpdateMuted(),this._paused||this.sound.play()}},{key:"internalUpdateVolume",value:function(){if(this.started){var e=1,t=!0,r=!1,n=void 0;try{for(var i,o=this.groups[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;e*=d.AudioGroup.volume(s)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}this.sound.volume=this._volume*e*l.Engine.volume}}},{key:"internalUpdateMuted",value:function(){if(this.started){for(var e=!1,t=0;t<this.groups.length&&!e;t++)e=e||d.AudioGroup.muted(this.groups[t]);this.sound.muted=l.Engine.muted||this._muted||e}}},{key:"update",value:function(){this.fadePercent<1&&(this.fadePercent=u.Calc.approach(this.fadePercent,1,l.Engine.delta/this.fadeDuration),this.volume=this.fadeFrom+(this.fadeTo-this.fadeFrom)*this.fadeEase(this.fadePercent))}},{key:"fade",value:function(e,t,r){return this.fadeFrom=this.volume,this.fadeTo=e,this.fadeDuration=Math.max(.001,t),this.fadeEase=void 0!=r?r:function(e){return e},this.fadePercent=0,this}},{key:"playing",get:function(){return this.started&&!this._paused}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e,this.started&&(this.sound.loop=this._loop)}},{key:"paused",get:function(){return this._paused}},{key:"muted",get:function(){return this._muted},set:function(e){this._muted=e,this.internalUpdateMuted()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e,this.internalUpdateVolume()}}]),e}();h.active=[],t.Sound=h},"./lib/foster/assets/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/assets/assetLoader.ts")),n(r("./lib/foster/assets/assets.ts"))},"./lib/foster/assets/textures/atlas.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/createClass.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/util/rectangle.ts"),f=r("./lib/foster/assets/textures/texture.ts"),p=function(){function e(t,r,n,i){(0,u.default)(this,e),this.subtextures={},this.name=t,this.texture=r,this.reader=i,this.data=n,this.reader(n,this)}return(0,d.default)(e,[{key:"get",value:function(e){return this.subtextures[e]}},{key:"has",value:function(e){return void 0!==this.subtextures[e]}},{key:"list",value:function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;r.push(this.get(e+l))}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}},{key:"find",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],[]);for(var r in this.subtextures)0===r.indexOf(e)&&t.push({name:r,tex:this.subtextures[r]});t.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});var n=[],i=!0,o=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value.tex;n.push(u)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return n}}]),e}();t.Atlas=p;var m=function(){function e(){(0,u.default)(this,e)}return(0,d.default)(e,null,[{key:"DoodleStudio",value:function(e,t){var r=JSON.parse(e),n="once"!==r.playbackMode,i=r.frames,o=0;"loopbackandforth"===r.playbackMode&&i.push.apply(i,(0,a.default)(i.slice(0,i.length-1).reverse()));var s=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value,m=p.rect,y=new h.Rectangle(m.x,m.y,m.width,m.height),b=new f.Texture(t.texture.texture,y);b.metadata.duration=p.duration,b.metadata.loops=n,t.subtextures["main "+o]=b,++o}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}}},{key:"Aseprite",value:function(e,t){var r=JSON.parse(e),n=r.frames,i=!0,s=!1,a=void 0;try{for(var l,u=Object.entries(n)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=(0,o.default)(l.value,2),d=c[0],p=c[1],m=d.replace(".ase","").replace(".png",""),y=p.frame,b=void 0;if(p.trimmed){var v=p.spriteSourceSize,g=p.sourceSize;b=new f.Texture(t.texture.texture,new h.Rectangle(y.x,y.y,y.w,y.h),new h.Rectangle(-v.x,-v.y,g.w,g.h))}else b=new f.Texture(t.texture.texture,new h.Rectangle(y.x,y.y,y.w,y.h));void 0!==p.duration&&(b.metadata.duration=parseInt(p.duration,10)),t.subtextures[m]=b}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}}}]),e}();t.AtlasReaders=m},"./lib/foster/assets/textures/fosterWebGLTexture.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=function(){function e(t,r,n){(0,o.default)(this,e),this.disposed=!1,this.webGLTexture=t,this.width=r,this.height=n}return(0,a.default)(e,[{key:"dispose",value:function(){this.disposed||(l.Engine.graphics.gl.deleteTexture(this.webGLTexture),this.path="",this.webGLTexture=null,this.width=1,this.height=1,this.disposed=!0)}}]),e}();t.FosterWebGLTexture=u},"./lib/foster/assets/textures/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/assets/textures/atlas.ts")),n(r("./lib/foster/assets/textures/renderTarget.ts")),n(r("./lib/foster/assets/textures/texture.ts"))},"./lib/foster/assets/textures/renderTarget.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/assets/textures/fosterWebGLTexture.ts"),c=function(){function e(t,r,n,i,s){(0,o.default)(this,e),this.texture=r,this.frameBuffer=t,this.vertexBuffer=n,this.colorBuffer=i,this.texcoordBuffer=s}return(0,a.default)(e,[{key:"width",get:function(){return this.texture.width}},{key:"height",get:function(){return this.texture.height}}]),(0,a.default)(e,[{key:"dispose",value:function(){this.texture.dispose(),this.texture=null;var e=l.Engine.graphics.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.texcoordBuffer),e.deleteBuffer(this.colorBuffer),this.frameBuffer=null,this.vertexBuffer=null,this.texcoordBuffer=null,this.colorBuffer=null}}],[{key:"create",value:function(t,r){var n=l.Engine.graphics.gl,i=n.createFramebuffer(),o=n.createTexture();n.bindFramebuffer(n.FRAMEBUFFER,i),n.bindTexture(n.TEXTURE_2D,o),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,r,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var s=n.createBuffer(),a=n.createBuffer(),c=n.createBuffer();return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),new e(i,new u.FosterWebGLTexture(o,t,r),s,c,a)}}]),e}();t.RenderTarget=c},"./lib/foster/assets/textures/texture.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/util/rectangle.ts"),c=r("./lib/foster/util/vector.ts"),d=r("./lib/foster/assets/textures/fosterWebGLTexture.ts"),h=function(){function e(t,r,n){(0,o.default)(this,e),this.bounds=null,this.frame=null,this.texture=null,this.metadata={},this.texture=t,this.bounds=r||new u.Rectangle(0,0,t.width,t.height),this.frame=n||new u.Rectangle(0,0,this.bounds.width,this.bounds.height),this.center=new c.Vector(this.frame.width/2,this.frame.height/2)}return(0,a.default)(e,[{key:"getSubtexture",value:function(t,r){return void 0===r?r=new e(this.texture):r.texture=this.texture,r.bounds.x=this.bounds.x+Math.max(0,Math.min(this.bounds.width,t.x+this.frame.x)),r.bounds.y=this.bounds.y+Math.max(0,Math.min(this.bounds.height,t.y+this.frame.y)),r.bounds.width=Math.max(0,this.bounds.x+Math.min(this.bounds.width,t.x+this.frame.x+t.width)-r.bounds.x),r.bounds.height=Math.max(0,this.bounds.y+Math.min(this.bounds.height,t.y+this.frame.y+t.height)-r.bounds.y),r.frame.x=Math.min(0,this.frame.x+t.x),r.frame.y=Math.min(0,this.frame.y+t.y),r.frame.width=t.width,r.frame.height=t.height,r.center=new c.Vector(r.frame.width/2,r.frame.height/2),r}},{key:"clone",value:function(){return new e(this.texture,this.bounds.clone(),this.frame.clone())}},{key:"toString",value:function(){return this.texture.path+": ["+this.bounds.x+", "+this.bounds.y+", "+this.bounds.width+", "+this.bounds.height+"]frame["+this.frame.x+", "+this.frame.y+", "+this.frame.width+", "+this.frame.height+"]"}},{key:"draw",value:function(e,t,r,n,i,o,s){l.Engine.graphics.texture(this,e.x,e.y,null,i,t,r,n,o,s)}},{key:"drawCropped",value:function(e,t,r,n,i,o,s,a){l.Engine.graphics.texture(this,e.x,e.y,t,o,r,n,i,s,a)}},{key:"drawCenter",value:function(e,t,r,n,i,o){l.Engine.graphics.texture(this,e.x,e.y,null,n,this.center,t,r,i,o)}},{key:"drawCenterCropped",value:function(e,t,r,n,i,o,s){l.Engine.graphics.texture(this,e.x,e.y,t,i,new c.Vector(t.width/2,t.height/2),r,n,o,s)}},{key:"drawJustify",value:function(e,t,r,n,i,o,s){l.Engine.graphics.texture(this,e.x,e.y,null,i,new c.Vector(this.width*t.x,this.height*t.y),r,n,o,s)}},{key:"drawJustifyCropped",value:function(e,t,r,n,i,o,s,a){l.Engine.graphics.texture(this,e.x,e.y,t,o,new c.Vector(t.width*r.x,t.height*r.y),n,i,s,a)}},{key:"dispose",value:function(){this.texture.dispose(),this.texture=null}},{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}},{key:"clippedWidth",get:function(){return this.bounds.width}},{key:"clippedHeight",get:function(){return this.bounds.height}}],[{key:"makeTransparent",value:function(e,t){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var n=r.getContext("2d");n.drawImage(e,0,0);for(var i=n.getImageData(0,0,r.width,r.height),o=i.data,s=0;s<o.length;s+=4)o[s+0]===t.r&&o[s+1]===t.g&&o[s+2]===t.b&&(o[s+3]=0);return n.putImageData(i,0,0),r}},{key:"create",value:function(t,r){var n=l.Engine.graphics.gl,i=n.createTexture();return n.bindTexture(n.TEXTURE_2D,i),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e.makeTransparent(t,r)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),new e(new d.FosterWebGLTexture(i,t.width,t.height))}},{key:"createFromData",value:function(t,r,n){for(var i=l.Engine.graphics.gl,o=i.createTexture(),s=[],a=0;a<t.length;a++)s[a]=Math.floor(255*t[a]);return i.bindTexture(i.TEXTURE_2D,o),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r,n,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(t)),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),new e(new d.FosterWebGLTexture(o,r,n))}}]),e}();t.Texture=h},"./lib/foster/component.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(e instanceof f.Vector)e.copy(t);else{if(!(e instanceof h.Color))return!1;e.copy(t)}return!0}var o=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),s=n(o),a=r("./node_modules/babel-runtime/helpers/typeof.js"),l=(n(a),r("./node_modules/babel-runtime/helpers/classCallCheck.js")),u=n(l),c=r("./node_modules/babel-runtime/helpers/createClass.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0}),r("./node_modules/reflect-metadata/Reflect.js");var h=r("./lib/foster/util/color.ts"),f=r("./lib/foster/util/vector.ts"),p=function(){function e(t){(0,u.default)(this,e),this._entity=null,this.scene=null,this.active=!0,this.visible=!0,this.position=new f.Vector(0,0),t&&void 0!==t.active&&(this.active=t.active)}return(0,d.default)(e,[{key:"toString",value:function(){return"<"+this.constructor.name+" of "+this.entity+">"}},{key:"setPrefabValues",value:function(e){if(this.prefabLink){var t=this.prefabLink,r=!0,n=!1,o=void 0;try{for(var a,l=Object.entries(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=(0,s.default)(a.value,2),c=u[0],d=u[1];c in t&&(i(t[c],d)||(t[c]=d))}}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}}var h=!0,f=!1,p=void 0;try{for(var m,y=Object.entries(e)[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var b=(0,s.default)(m.value,2),c=b[0],d=b[1];i(this[c],d)||(this[c]=d)}}catch(e){f=!0,p=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw p}}}},{key:"setActive",value:function(e){this.active=e}},{key:"getScenePosition",value:function(e){return e.set(this.sceneX,this.sceneY)}},{key:"addedToEntity",value:function(){}},{key:"addedToScene",value:function(){if(void 0!==this.siblings){var e=!0,t=!1,r=void 0;try{for(var n,i=Object.entries(this.siblings)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=(0,s.default)(n.value,2),a=o[0],l=o[1],u=this.entity.find(l);if(!u)throw Error("@Component.require needs "+l.name+" but it is missing");this[a]=u}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}}},{key:"removedFromEntity",value:function(){}},{key:"removedFromScene",value:function(){}},{key:"update",value:function(){}},{key:"lateUpdate",value:function(){}},{key:"render",value:function(e){}},{key:"debugRender",value:function(e){}},{key:"entity",get:function(){return this._entity},set:function(e){if(null!=this._entity&&null!=e)throw Error("This Component is already attached to an Entity");this._entity=e}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"scenePosition",get:function(){return this.getScenePosition(new f.Vector)}},{key:"sceneX",get:function(){return(this._entity?this._entity.x:0)+this.position.x}},{key:"sceneY",get:function(){return(this._entity?this._entity.y:0)+this.position.y}}],[{key:"register",value:function(t){if(t.name in e.registeredComponents)throw Error("already a Component named "+t.name);e.registeredComponents[t.name]=t}},{key:"require",value:function(e,t){var r=Reflect.getMetadata("design:type",e,t);if(!r){var n="no design:type metadata found for key "+t;throw n+=" - is experimentalDecorators and emitDecoratorMetadata on in tsconfig.json?"}(e.siblings||(e.siblings={}))[t]=r}}]),e}();p.registeredComponents={},t.Component=p},"./lib/foster/components/alarm.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/engine.ts"),Alarm=function(e){function Alarm(){(0,o.default)(this,Alarm);var e=(0,u.default)(this,(Alarm.__proto__||Object.getPrototypeOf(Alarm)).call(this));return e._percent=0,e.removeOnComplete=!1,e.active=e.visible=!1,e}return(0,d.default)(Alarm,e),(0,a.default)(Alarm,[{key:"start",value:function(e,t){return this._percent=0,this._duration=e,this.callback=t,this.active=!0,this}},{key:"restart",value:function(){return this._percent=0,this}},{key:"resume",value:function(){return this.percent<1&&(this.active=!0),this}},{key:"pause",value:function(){return this.active=!1,this}},{key:"update",value:function(){this.percent<1&&this.duration>0&&(this._percent+=f.Engine.delta/this.duration,this.percent>=1&&(this._percent=1,this.active=!1,this.callback(this),this.removeOnComplete&&this.entity.remove(this)))}},{key:"percent",get:function(){return this._percent}},{key:"duration",get:function(){return this._duration}}],[{key:"create",value:function(e){return e.add(new Alarm)}}]),Alarm}(h.Component);t.Alarm=Alarm},"./lib/foster/components/colliders/collider.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/component.ts"),Collider=function(e){function Collider(){(0,a.default)(this,Collider);var e=(0,d.default)(this,(Collider.__proto__||Object.getPrototypeOf(Collider)).apply(this,arguments));return e.tags=[],e}return(0,f.default)(Collider,e),(0,u.default)(Collider,[{key:"tag",value:function(e){this.tags.push(e),null!=this.entity&&null!=this.entity.scene&&this.entity.scene._trackCollider(this,e)}},{key:"untag",value:function(e){var t=this.tags.indexOf(e);t>=0&&(this.tags.splice(t,1),null!=this.entity&&null!=this.entity.scene&&this.entity.scene._untrackCollider(this,e))}},{key:"check",value:function(e,t,r){return null!=this.collide(e,t,r)}},{key:"checks",value:function(e,t,r){var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;if(null!=this.collide(l,t,r))return!0}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return!1}},{key:"collide",value:function(e,t,r){var n=null,i=this.entity.scene.allCollidersInTag(e);this.x+=t||0,this.y+=r||0;var o=!0,s=!1,a=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.active&&Collider.overlap(this,c)){n=c;break}}}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}return this.x-=t||0,this.y-=r||0,n}},{key:"collides",value:function(e,t,r){var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,u=this.collide(l,t,r);if(null!=u)return u}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return null}},{key:"collideAll",value:function(e,t,r){return this.collideAllMulti([e],t,r)}},{key:"collideAllMulti",value:function(e,t,r){var n=[],i=!0,s=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n.push.apply(n,(0,o.default)(this.entity.scene.allCollidersInTag(c)))}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}var d=[];this.x+=t||0,this.y+=r||0;var h=!0,f=!1,p=void 0;try{for(var m,y=n[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var b=m.value;b.active&&Collider.overlap(this,b)&&d.push(b)}}catch(e){f=!0,p=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw p}}return this.x-=t||0,this.y-=r||0,d}}],[{key:"registerOverlapTest",value:function(e,t,r){void 0===Collider.overlaptest[e.name]&&(Collider.overlaptest[e.name]={}),void 0===Collider.overlaptest[t.name]&&(Collider.overlaptest[t.name]={}),Collider.overlaptest[e.name][t.name]=function(e,t){return r(e,t)},Collider.overlaptest[t.name][e.name]=function(e,t){return r(t,e)}}},{key:"overlap",value:function(e,t){return Collider.overlaptest[e.type][t.type](e,t)}}]),Collider}(p.Component);Collider.overlaptest={},t.Collider=Collider},"./lib/foster/components/colliders/collidertests.ts":function(e,t,r){"use strict";function n(){function e(e,t){return e.sceneRight>t.sceneLeft&&e.sceneBottom>t.sceneTop&&e.sceneLeft<t.sceneRight&&e.sceneTop<t.sceneBottom}function t(e,t){for(var r=t.scenePosition,n=Math.floor((e.sceneLeft-r.x)/t.tileWidth),i=Math.floor((e.sceneTop-r.y)/t.tileHeight),o=Math.ceil((e.sceneRight-r.x)/t.tileWidth),s=Math.ceil((e.sceneBottom-r.y)/t.tileHeight),a=n;a<o;a++)for(var l=i;l<s;l++)if(t.has(a,l))return!0;return!1}i.Collider.registerOverlapTest(o.Hitbox,o.Hitbox,e),i.Collider.registerOverlapTest(o.Hitbox,s.Hitgrid,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./lib/foster/components/colliders/collider.ts"),o=r("./lib/foster/components/colliders/hitbox.ts"),s=r("./lib/foster/components/colliders/hitgrid.ts");t.registerDefaultOverlapTests=n},"./lib/foster/components/colliders/hitbox.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/engine.ts"),f=r("./lib/foster/util/color.ts"),p=r("./lib/foster/util/rectangle.ts"),m=r("./lib/foster/util/vector.ts"),y=r("./lib/foster/components/colliders/collider.ts"),b=new m.Vector,Hitbox=function(e){function Hitbox(e){var t=e.left,r=e.top,n=e.width,i=e.height,s=e.tags;(0,o.default)(this,Hitbox);var a=(0,u.default)(this,(Hitbox.__proto__||Object.getPrototypeOf(Hitbox)).call(this));if(a.debugColor=new f.Color(1,0,0,.6),a.type=Hitbox.name,a.left=t,a.top=r,a.width=n,a.height=i,void 0!==s){var l=!0,c=!1,d=void 0;try{for(var h,p=s[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value;a.tag(m)}}catch(e){c=!0,d=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw d}}}return a}return(0,d.default)(Hitbox,e),(0,a.default)(Hitbox,[{key:"setTop",value:function(e){var t=this.top+this.height;this.top=e,this.height=t-this.top}},{key:"setLeft",value:function(e){var t=this.left+this.width;this.left=e,this.width=t-this.left}},{key:"getSceneBounds",value:function(e){return e.set(this.sceneLeft,this.sceneTop,this.width,this.height),e}},{key:"debugRender",value:function(){this.debugColor&&this.active&&h.Engine.graphics.hollowRect(this.sceneLeft,this.sceneTop,this.width,this.height,1,this.debugColor)}},{key:"sceneCenterX",get:function(){return this.getScenePosition(b).x+this.left+this.width/2}},{key:"sceneCenterY",get:function(){return this.getScenePosition(b).y+this.top+this.height/2}},{key:"sceneLeft",get:function(){return this.sceneX+this.left}},{key:"sceneRight",get:function(){return this.sceneX+this.left+this.width}},{key:"sceneTop",get:function(){return this.sceneY+this.top}},{key:"sceneBottom",get:function(){return this.sceneY+this.top+this.height}},{key:"sceneBounds",get:function(){return new p.Rectangle(this.sceneLeft,this.sceneTop,this.width,this.height)}}]),Hitbox}(y.Collider);t.Hitbox=Hitbox},"./lib/foster/components/colliders/hitgrid.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/regenerator/index.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=(r("./lib/foster/engine.ts"),r("./lib/foster/util/color.ts")),m=r("./lib/foster/components/colliders/collider.ts"),Hitgrid=function(e){function Hitgrid(e,t,r){(0,a.default)(this,Hitgrid);var n=(0,d.default)(this,(Hitgrid.__proto__||Object.getPrototypeOf(Hitgrid)).call(this));if(n.map={},n.debugSub=new p.Color(200,200,200,.5),n.lineColor=new p.Color(1,0,0,.5),n.type=Hitgrid.name,n.tileWidth=e,n.tileHeight=t,void 0!==r){var i=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n.tag(c)}}catch(e){o=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}}return n}return(0,f.default)(Hitgrid,e),(0,u.default)(Hitgrid,[{key:"tiles",value:o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o.default.keys(this.map);case 1:if((e.t1=e.t0()).done){e.next=13;break}t=e.t1.value,e.t2=o.default.keys(this.map[t]);case 4:if((e.t3=e.t2()).done){e.next=11;break}if(r=e.t3.value,!this.map[t][r]){e.next=9;break}return e.next=9,[parseInt(t,10),parseInt(r,10)];case 9:e.next=4;break;case 11:e.next=1;break;case 13:case"end":return e.stop()}},e,this)})},{key:"set",value:function(e,t,r,n,i){for(var o=t;o<t+(n||1);o++){void 0===this.map[o]&&(this.map[o]={});for(var s=r;s<r+(i||1);s++)e?this.map[o][s]=e:delete this.map[o][s]}}},{key:"has",value:function(e,t,r,n){for(var i=e;i<e+(r||1);i++)if(void 0!==this.map[i])for(var o=t;o<t+(n||1);o++)if(1==this.map[i][o])return!0;return!1}},{key:"debugRender",value:function(e){}}]),Hitgrid}(m.Collider);t.Hitgrid=Hitgrid},"./lib/foster/components/colliders/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/components/colliders/collider.ts")),n(r("./lib/foster/components/colliders/hitbox.ts")),n(r("./lib/foster/components/colliders/hitgrid.ts"))},"./lib/foster/components/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/components/alarm.ts")),n(r("./lib/foster/components/physics.ts")),n(r("./lib/foster/components/tween.ts"))},"./lib/foster/components/particles/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/components/particles/particle.ts")),n(r("./lib/foster/components/particles/particleSystem.ts")),n(r("./lib/foster/components/particles/particleTemplate.ts"))},"./lib/foster/components/particles/particle.ts":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);Object.defineProperty(t,"__esModule",{value:!0});var o=function e(){(0,i.default)(this,e)};t.Particle=o},"./lib/foster/components/particles/particleSystem.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/typeof.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/component.ts"),m=r("./lib/foster/engine.ts"),y=r("./lib/foster/util/calc.ts"),b=r("./lib/foster/util/color.ts"),v=r("./lib/foster/util/vector.ts"),g=r("./lib/foster/components/particles/particle.ts"),_=r("./lib/foster/components/particles/particleTemplate.ts"),ParticleSystem=function(e){function ParticleSystem(e){(0,a.default)(this,ParticleSystem);var t=(0,d.default)(this,(ParticleSystem.__proto__||Object.getPrototypeOf(ParticleSystem)).call(this));return t.renderRelativeToEntity=!1,t.particles=[],"object"===(void 0===e?"undefined":(0,o.default)(e))&&(e=e.template),t.templateName=e,t}return(0,f.default)(ParticleSystem,e),(0,u.default)(ParticleSystem,[{key:"update",value:function(){for(var e=m.Engine.delta,t=this.particles.length-1;t>=0;t--){var r=this.particles[t];r.percent>=1?(this.particles.splice(t,1),ParticleSystem.cache.push(r)):(r.percent=Math.min(1,r.percent+e/r.duration),r.x+=r.speedX*e,r.y+=r.speedY*e,r.speedX+=r.accelX*e,r.speedY+=r.accelY*e,r.speedX=y.Calc.approach(r.speedX,0,r.frictionX*e),r.speedY=y.Calc.approach(r.speedY,0,r.frictionY*e))}}},{key:"render",value:function(e){var t=this.template.texture;if(null==t&&(t=m.Engine.graphics.pixel),null==t)throw Error("Particle requires a Texture");var r=this.position;this.renderRelativeToEntity&&(r=this.scenePosition);var n=this.template,i=!0,o=!1,s=void 0;try{for(var a,l=this.particles[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value,c=u.percent,d=r.x+u.x,h=r.y+u.y,f=u.scaleFromX+(u.scaleToX-u.scaleFromX)*n.scaleXEaser(c),p=u.scaleFromY+(u.scaleToY-u.scaleFromY)*n.scaleYEaser(c),y=u.rotationFrom+(u.rotationTo-u.rotationFrom)*n.rotationEaser(c),b=u.alphaFrom+(u.alphaTo-u.alphaFrom)*n.alphaEaser(c),v=ParticleSystem.color.lerp(u.colorFrom,u.colorTo,n.colorEaser(c)).mult(b);m.Engine.graphics.texture(t,d,h,null,v,ParticleSystem.origin,ParticleSystem.scale.set(f,p),y)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},{key:"burst",value:function(e,t,r,n,i,o){var s=this.template;void 0!==n&&null!==n||(n=0),void 0!==i&&null!==i||(i=0),void 0===o&&(o=1);for(var a=0;a<o;a++){var l=s.durationBase+y.Calc.range(s.durationRange);if(!(l<=0)){var u=null;u=ParticleSystem.cache.length>0?ParticleSystem.cache.splice(0,1)[0]:new g.Particle;var c=s.speedBase+y.Calc.range(s.speedRange);u.percent=0,u.duration=l,u.x=this.scenePosition.x+e+y.Calc.range(n),u.y=this.scenePosition.y+t+y.Calc.range(i),u.colorFrom=y.Calc.choose(s.colorsFrom),u.colorTo=y.Calc.choose(s.colorsTo),u.speedX=Math.cos(r)*c,u.speedY=-Math.sin(r)*c,u.accelX=s.accelBaseX+y.Calc.range(s.accelRangeX),u.accelY=s.accelBaseY+y.Calc.range(s.accelRangeY),u.frictionX=s.frictionBaseX+y.Calc.range(s.frictionRangeX),u.frictionY=s.frictionBaseY+y.Calc.range(s.frictionRangeY),u.scaleFromX=s.scaleFromBaseX+y.Calc.range(s.scaleFromRangeX),u.scaleFromY=s.scaleFromBaseY+y.Calc.range(s.scaleFromRangeY),u.scaleToX=s.scaleToBaseX+y.Calc.range(s.scaleToRangeX),u.scaleToY=s.scaleToBaseY+y.Calc.range(s.scaleToRangeY),u.rotationFrom=s.rotationFromBase+y.Calc.range(s.rotationFromRange),u.rotationTo=s.rotationToBase+y.Calc.range(s.rotationToRange),u.alphaFrom=s.alphaFromBase+y.Calc.range(s.alphaFromRange),u.alphaTo=s.alphaToBase+y.Calc.range(s.alphaToRange),this.particles.push(u)}}}},{key:"template",get:function(){return _.ParticleTemplate.templates[this.templateName]}},{key:"numActiveParticles",get:function(){return this.particles.length}},{key:"activeParticles",get:function(){return this.particles}}]),ParticleSystem}(p.Component);ParticleSystem.cache=[],ParticleSystem.color=new b.Color,ParticleSystem.origin=new v.Vector(.5,.5),ParticleSystem.scale=new v.Vector(0,0),t.ParticleSystem=ParticleSystem},"./lib/foster/components/particles/particleTemplate.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/util/color.ts"),u=r("./lib/foster/util/ease.ts"),c=function(){function e(t){(0,o.default)(this,e),this.texture=null,this.speedBase=0,this.speedRange=0,this.accelBaseX=0,this.accelRangeX=0,this.accelBaseY=0,this.accelRangeY=0,this.frictionBaseX=0,this.frictionRangeX=0,this.frictionBaseY=0,this.frictionRangeY=0,this.colorsFrom=[l.Color.white],this.colorsTo=[l.Color.white],this.colorEaser=u.Ease.linear,this.alphaFromBase=1,this.alphaFromRange=0,this.alphaToBase=1,this.alphaToRange=0,this.alphaEaser=u.Ease.linear,this.rotationFromBase=0,this.rotationFromRange=0,this.rotationToBase=0,this.rotationToRange=0,this.rotationEaser=u.Ease.linear,this.scaleFromBaseX=1,this.scaleFromRangeX=0,this.scaleToBaseX=1,this.scaleToRangeX=0,this.scaleXEaser=u.Ease.linear,this.scaleFromBaseY=1,this.scaleFromRangeY=0,this.scaleToBaseY=1,this.scaleToRangeY=0,this.scaleYEaser=u.Ease.linear,this.durationBase=1,this.durationRange=1,this.name=t,e.templates[t]=this}return(0,a.default)(e,[{key:"tex",value:function(e){return this.texture=e,this}},{key:"speed",value:function(e,t){return this.speedBase=e,this.speedRange=t||0,this}},{key:"accelX",value:function(e,t){return this.accelBaseX=e,this.accelRangeX=t||0,this}},{key:"accelY",value:function(e,t){return this.accelBaseY=e,this.accelRangeY=t||0,this}},{key:"frictionX",value:function(e,t){return this.frictionBaseX=e,this.frictionRangeX=t||0,this}},{key:"frictionY",value:function(e,t){return this.frictionBaseY=e,this.frictionRangeY=t||0,this}},{key:"colors",value:function(e,t){return this.colorsFrom=e,this.colorsTo=t||e,this}},{key:"colorEase",value:function(e){return this.colorEaser=e,this}},{key:"alpha",value:function(e,t){return this.alphaFrom(e,t),this.alphaTo(e,t),this}},{key:"alphaFrom",value:function(e,t){return this.alphaFromBase=e,this.alphaFromRange=t||0,this}},{key:"alphaTo",value:function(e,t){return this.alphaToBase=e,this.alphaToRange=t||0,this}},{key:"alphaEase",value:function(e){return this.alphaEaser=e,this}},{key:"rotation",value:function(e,t){return this.rotationFrom(e,t),this.rotationTo(e,t),this}},{key:"rotationFrom",value:function(e,t){return this.rotationFromBase=e,this.rotationFromRange=t||0,this}},{key:"rotationTo",value:function(e,t){return this.rotationToBase=e,this.rotationToRange=t||0,this}},{key:"rotationEase",value:function(e){return this.rotationEaser=e,this}},{key:"scale",value:function(e,t){return this.scaleFrom(e,t),this.scaleTo(e,t),this}},{key:"scaleFrom",value:function(e,t){return this.scaleFromX(e,t),this.scaleFromY(e,t),this}},{key:"scaleTo",value:function(e,t){return this.scaleToX(e,t),this.scaleToY(e,t),this}},{key:"scaleEase",value:function(e){return this.scaleXEaser=e,this.scaleYEaser=e,this}},{key:"scaleX",value:function(e,t){return this.scaleFromX(e,t),this.scaleToX(e,t),this}},{key:"scaleFromX",value:function(e,t){return this.scaleFromBaseX=e,this.scaleFromRangeX=t||0,this}},{key:"scaleToX",value:function(e,t){return this.scaleToBaseX=e,this.scaleToRangeX=t||0,this}},{key:"scaleY",value:function(e,t){return this.scaleFromY(e,t),this.scaleToY(e,t),this}},{key:"scaleXEase",value:function(e){return this.scaleXEaser=e,this}},{key:"scaleFromY",value:function(e,t){return this.scaleFromBaseY=e,this.scaleFromRangeY=t||0,this}},{key:"scaleToY",value:function(e,t){return this.scaleToBaseY=e,this.scaleToRangeY=t||0,this}},{key:"scaleYEase",value:function(e){return this.scaleYEaser=e,this}},{key:"duration",value:function(e,t){return this.durationBase=e,this.durationRange=t||0,this}}]),e}();c.templates={},t.ParticleTemplate=c},"./lib/foster/components/physics.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/engine.ts"),f=r("./lib/foster/util/calc.ts"),p=r("./lib/foster/util/vector.ts"),m=r("./lib/foster/components/colliders/index.ts"),Physics=function(e){function Physics(e){var t=e.left,r=e.top,n=e.width,i=e.height,s=e.tags,a=e.solids;(0,o.default)(this,Physics);var l=(0,u.default)(this,(Physics.__proto__||Object.getPrototypeOf(Physics)).call(this,{left:t,top:r,width:n,height:i,tags:s}));return l.solids=[],l.onCollide=[],l.speed=new p.Vector(0,0),l.remainder=new p.Vector(0,0),void 0!==a&&(l.solids=a),l}return(0,d.default)(Physics,e),(0,a.default)(Physics,[{key:"update",value:function(){0!==this.speed.x&&this.moveX(this.speed.x*h.Engine.delta),0!==this.speed.y&&this.moveY(this.speed.y*h.Engine.delta)}},{key:"moveBy",value:function(e){var t=this.moveX(e.x),r=this.moveY(e.y);return t&&r}},{key:"move",value:function(e,t){var r=this.moveX(e),n=this.moveY(t);return r&&n}},{key:"moveX",value:function(e){var t=e+this.remainder.x;return this.remainder.x=t%1,t-=this.remainder.x,this.moveXAbsolute(t)}},{key:"moveXAbsolute",value:function(e){var t=this.entity;if(this.solids.length<=0)t.x+=Math.round(e);else{var r=f.Calc.sign(e);for(e=Math.abs(Math.round(e));e>0;){var n=this.collides(this.solids,r,0),i=!(!n||!n.entity)&&n.entity===t;if(null!=n&&!i){this.remainder.x=0,null!=this.onCollideX&&this.onCollideX(n);var o=!0,s=!1,a=void 0;try{for(var l,u=this.onCollide[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)(0,l.value)(!0,n)}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}return!1}t.x+=r,e-=1}}return!0}},{key:"moveY",value:function(e){var t=e+this.remainder.y;return this.remainder.y=t%1,t-=this.remainder.y,this.moveYAbsolute(t)}},{key:"moveYAbsolute",value:function(e){var t=this.entity;if(this.solids.length<=0)t.y+=Math.round(e);else{var r=f.Calc.sign(e);for(e=Math.abs(Math.round(e));e>0;){var n=this.collides(this.solids,0,r),i=!(!n||!n.entity)&&n.entity===t;if(null!=n&&!i){this.remainder.y=0,null!=this.onCollideY&&this.onCollideY(n);var o=!0,s=!1,a=void 0;try{for(var l,u=this.onCollide[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)(0,l.value)(!1,n)}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}return!1}t.y+=r,e-=1}}return!0}},{key:"friction",value:function(e,t){return this.speed.x<0?this.speed.x=Math.min(0,this.speed.x+e*h.Engine.delta):this.speed.x>0&&(this.speed.x=Math.max(0,this.speed.x-e*h.Engine.delta)),this.speed.y<0?this.speed.y=Math.min(0,this.speed.y+t*h.Engine.delta):this.speed.y>0&&(this.speed.y=Math.max(0,this.speed.y-t*h.Engine.delta)),this}},{key:"maxspeed",value:function(e,t){return void 0!==e&&null!==e&&(this.speed.x=Math.max(-e,Math.min(e,this.speed.x))),void 0!==t&&null!==t&&(this.speed.y=Math.max(-t,Math.min(t,this.speed.y))),this}},{key:"circularMaxspeed",value:function(e){return this.speed.length>e&&this.speed.normalize().scale(e),this}},{key:"stop",value:function(){this.speed.x=this.speed.y=0,this.remainder.x=this.remainder.y=0}}]),Physics}(m.Hitbox);t.Physics=Physics},"./lib/foster/components/sprites/graphic.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/engine.ts"),p=r("./lib/foster/util/color.ts"),m=r("./lib/foster/util/rectangle.ts"),y=r("./lib/foster/util/vector.ts"),Graphic=function(e){function Graphic(e,t){(0,o.default)(this,Graphic);var r=(0,u.default)(this,(Graphic.__proto__||Object.getPrototypeOf(Graphic)).call(this));return r.scale=new y.Vector(1,1),r.origin=new y.Vector(0,0),r.rotation=0,r.flipX=!1,r.flipY=!1,r.color=p.Color.white.clone(),r.alpha=1,null!=e&&(r.texture=e,r.crop=new m.Rectangle(0,0,e.width,e.height)),t&&r.position.copy(t),r}return(0,d.default)(Graphic,e),(0,a.default)(Graphic,[{key:"toString",value:function(){return"<Graphic "+this.texture.bounds+" of "+this.texture.texture.path+">"}},{key:"center",value:function(){this.justify(.5,.5)}},{key:"justify",value:function(e,t){this.origin.set(this.width*e,this.height*t)}},{key:"render",value:function(e){f.Engine.graphics.texture(this.texture,this.scenePosition.x,this.scenePosition.y,this.crop,p.Color.temp.copy(this.color).mult(this.alpha),this.origin,this.scale,this.rotation,this.flipX,this.flipY,this.overrideWidth,this.overrideHeight)}},{key:"width",get:function(){return this.crop?this.crop.width:this.texture?this.texture.width:0}},{key:"height",get:function(){return this.crop?this.crop.height:this.texture?this.texture.height:0}},{key:"sceneCenterX",get:function(){return this.getScenePosition(Graphic.sp).x+this.width/2}},{key:"sceneCenterY",get:function(){return this.getScenePosition(Graphic.sp).y+this.height/2}}]),Graphic}(h.Component);Graphic.sp=new y.Vector,t.Graphic=Graphic},"./lib/foster/components/sprites/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/components/sprites/graphic.ts")),n(r("./lib/foster/components/sprites/rectsprite.ts")),n(r("./lib/foster/components/sprites/sprite.ts")),n(r("./lib/foster/components/sprites/tilemap.ts"))},"./lib/foster/components/sprites/rectsprite.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/engine.ts"),p=r("./lib/foster/util/color.ts"),m=r("./lib/foster/util/vector.ts"),Rectsprite=function(e){function Rectsprite(e,t,r){(0,o.default)(this,Rectsprite);var n=(0,u.default)(this,(Rectsprite.__proto__||Object.getPrototypeOf(Rectsprite)).call(this));return n.size=new m.Vector(0,0),n.scale=new m.Vector(1,1),n.origin=new m.Vector(0,0),n.rotation=0,n.color=p.Color.white.clone(),n.alpha=1,n.size.x=e,n.size.y=t,n.color=r||p.Color.white,n}return(0,d.default)(Rectsprite,e),(0,a.default)(Rectsprite,[{key:"render",value:function(){null!=f.Engine.graphics.shader.sampler2d?f.Engine.graphics.texture(f.Engine.graphics.pixel,this.scenePosition.x,this.scenePosition.y,null,p.Color.temp.copy(this.color).mult(this.alpha),m.Vector.temp0.copy(this.origin).div(this.size),m.Vector.temp1.copy(this.size).mult(this.scale),this.rotation):f.Engine.graphics.quad(this.scenePosition.x,this.scenePosition.y,this.size.x,this.size.y,p.Color.temp.copy(this.color).mult(this.alpha),this.origin,this.scale,this.rotation)}},{key:"width",get:function(){return this.size.x},set:function(e){this.size.x=e}},{key:"height",get:function(){return this.size.y},set:function(e){this.size.y=e}}]),Rectsprite}(h.Component);t.Rectsprite=Rectsprite},"./lib/foster/components/sprites/sprite.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/assets/animations/spriteBank.ts"),m=r("./lib/foster/engine.ts"),y=r("./lib/foster/util/calc.ts"),b=r("./lib/foster/components/sprites/graphic.ts"),Sprite=function(e){function Sprite(e){var t=e.animation,r=e.origin,n=e.scale,i=e.play,s=e.flipX,a=e.x,l=e.y,c=e.rate,d=e.alpha,h=e.randomStartFrame;(0,o.default)(this,Sprite);var f=(0,u.default)(this,(Sprite.__proto__||Object.getPrototypeOf(Sprite)).call(this,null));return f._animation=null,f._playing=null,f._frame=0,f.verbose=!1,f.rate=1,void 0!==c&&(f.rate=c),void 0!==a&&(f.x=a),void 0!==l&&(f.y=l),void 0!==d&&(f.alpha=d),n&&void 0!==n.x&&f.scale.set(n.x,n.y),void 0!==s&&(f.flipX=s),m.Engine.assert(p.SpriteBank.has(t),"Missing animation '"+t+"'!"),f._animation=p.SpriteBank.get(t),f.texture=f._animation.first.frames[0],"center"===r&&f.justify(.5,.5),i&&f.play(i,!1,{randomFrame:h}),f}return(0,f.default)(Sprite,e),(0,a.default)(Sprite,[{key:"play",value:function(e,t,r){if(null!=this.animation){var n=this.animation.get(e);null==n||this.playing===n&&!t||(this._playing=n,this._frame=r&&r.randomFrame?Math.floor(y.Calc.range(0,this._playing.frames.length)):0,this.active=!0,this._playing.frames.length>0&&(this.texture=this._playing.frames[0]))}}},{key:"has",value:function(e){return null!=this.animation&&this.animation.has(e)}},{key:"update",value:function(){if(null!=this.playing){if(this._frame+=this.playing.speed*this.rate*m.Engine.delta,this.verbose,this.frame>=this.playing.frames.length||this.frame<0)if(this.playing.loops){for(;this._frame>=this.playing.frames.length;)this._frame-=this.playing.frames.length;for(;this._frame<0;)this._frame+=this.playing.frames.length}else if(null!=this.playing.goto&&this.playing.goto.length>0){var e=this.playing.goto[Math.floor(Math.random()*this.playing.goto.length)];this.play(e,!0)}else this.active=!1,this.frame>=this.playing.frames.length?this._frame=this.playing.frames.length-1:this._frame=0;null!=this.playing&&(this.texture=this.playing.frames[this.frame])}}},{key:"render",value:function(e){null!=this.texture&&(0,d.default)(Sprite.prototype.__proto__||Object.getPrototypeOf(Sprite.prototype),"render",this).call(this,e)}},{key:"animation",get:function(){return this._animation}},{key:"playing",get:function(){return this._playing}},{key:"frame",get:function(){return Math.floor(this._frame)},set:function(e){this._frame=e,null!=this.playing&&(this._frame=y.Calc.clamp(e,0,this.playing.frames.length),this.texture=this.playing.frames[this.frame])}}]),Sprite}(b.Graphic);t.Sprite=Sprite},"./lib/foster/components/sprites/tilemap.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/engine.ts"),p=r("./lib/foster/util/color.ts"),m=r("./lib/foster/util/rectangle.ts"),y=r("./lib/foster/util/vector.ts"),Tilemap=function(e){function Tilemap(e,t,r){(0,o.default)(this,Tilemap);var n=(0,u.default)(this,(Tilemap.__proto__||Object.getPrototypeOf(Tilemap)).call(this));return n.color=p.Color.white.clone(),n.alpha=1,n.map={},n.crop=new m.Rectangle,n._minTileX=0,n._minTileY=0,n._maxTileX=0,n._maxTileY=0,n._vec=new y.Vector,n.texture=e,n.tileWidth=t,n.tileHeight=r,n.tileColumns=Math.floor(n.texture.width/n.tileWidth),n}return(0,d.default)(Tilemap,e),(0,a.default)(Tilemap,[{key:"getSceneBounds",value:function(e){return e.set(this.sceneLeft,this.sceneTop,this.width,this.height)}},{key:"set",value:function(e,t,r,n,i,o){var s=e+t*this.tileColumns;return this.setIndex(s,r,n,i,o)}},{key:"setIndex",value:function(e,t,r,n,i){t>this._maxTileX&&(this._maxTileX=t),r>this._maxTileY&&(this._maxTileY=r);for(var o=t;o<t+(n||1);o++){void 0===this.map[o]&&(this.map[o]={});for(var s=r;s<r+(i||1);s++)this.map[o][s]=e}return this}},{key:"clear",value:function(e,t,r,n){for(var i=e;i<e+(r||1);i++)if(void 0!==this.map[i])for(var o=t;o<t+(n||1);o++)void 0!==this.map[i][o]&&delete this.map[i][o];return this}},{key:"has",value:function(e,t){return void 0!==this.map[e]&&void 0!==this.map[e][t]}},{key:"get",value:function(e,t){if(this.has(e,t)){var r=this.map[e][t];return new y.Vector(r%this.tileColumns,Math.floor(r/this.tileColumns))}return null}},{key:"getTileSubtexture",value:function(e,t){var r=Math.floor(e%this.tileColumns)*this.tileWidth,n=Math.floor(e/this.tileColumns)*this.tileHeight,i=new m.Rectangle(r,n,this.tileWidth,this.tileHeight);return this.texture.getSubtexture(i,t)}},{key:"render",value:function(e){var t=e.extents,r=this.scenePosition,n=Math.floor((t.left-r.x)/this.tileWidth)-1,i=Math.ceil((t.right-r.x)/this.tileWidth)+1,o=Math.floor((t.top-r.y)/this.tileHeight)-1,s=Math.ceil((t.bottom-r.y)/this.tileHeight)+1;this.crop.width=this.tileWidth,this.crop.height=this.tileHeight;for(var a=n;a<i;a++)if(void 0!==this.map[a])for(var l=o;l<s;l++){var u=this.map[a][l];void 0!==u&&(this.crop.x=u%this.tileColumns*this.tileWidth,this.crop.y=Math.floor(u/this.tileColumns)*this.tileHeight,f.Engine.graphics.texture(this.texture,r.x+a*this.tileWidth,r.y+l*this.tileHeight,this.crop,p.Color.temp.copy(this.color).mult(this.alpha)))}}},{key:"sceneLeft",get:function(){return this.getScenePosition(this._vec).x}},{key:"sceneTop",get:function(){return this.getScenePosition(this._vec).y}},{key:"width",get:function(){return(this._maxTileX-this._minTileX)*this.tileWidth}},{key:"height",get:function(){return(this._maxTileY-this._minTileY)*this.tileHeight}}]),Tilemap}(h.Component);t.Tilemap=Tilemap},"./lib/foster/components/tween.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/engine.ts"),Tween=function(e){function Tween(){(0,o.default)(this,Tween);var e=(0,u.default)(this,(Tween.__proto__||Object.getPrototypeOf(Tween)).call(this));return e._percent=0,e.from=0,e.to=0,e.ease=function(e){return e},e.removeOnComplete=!1,e.active=e.visible=!1,e}return(0,d.default)(Tween,e),(0,a.default)(Tween,[{key:"setOnComplete",value:function(e){return this.onComplete=e,this}},{key:"start",value:function(e,t,r,n,i,o){return this._percent=0,this._duration=e,this.from=t,this.to=r,this.ease=n,this.step=i,this.removeOnComplete=o,this}},{key:"restart",value:function(){return this._percent=0,this.active=!0,this}},{key:"resume",value:function(){return this.percent<1&&(this.active=!0),this}},{key:"pause",value:function(){return this.active=!1,this}},{key:"update",value:function(){this.percent<1&&this.duration>0&&(this._percent+=f.Engine.delta/this.duration,this.percent>=1?(this._percent=1,this.step(this.to),this.active=!1,this.onComplete&&this.onComplete(),this.removeOnComplete&&this.entity.remove(this)):this.step(this.value))}},{key:"percent",get:function(){return this._percent}},{key:"duration",get:function(){return this._duration}},{key:"value",get:function(){return this.from+(this.to-this.from)*this.ease(this.percent)}}],[{key:"create",value:function(e){var t=new Tween;return e.add(t),t}}]),Tween}(h.Component);t.Tween=Tween},"./lib/foster/engine.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l,u=r("./lib/foster/assets/assets.ts"),c=r("./lib/foster/assets/audio/Sound.ts"),d=r("./lib/foster/components/colliders/collidertests.ts"),h=r("./lib/foster/gameWindow.ts"),f=r("./lib/foster/graphics.ts"),p=r("./lib/foster/input/index.ts"),m=r("./lib/foster/util/io.ts"),y=r("./lib/foster/util/shaders.ts");!function(e){e[e.Desktop=0]="Desktop",e[e.Web=1]="Web"}(l=t.Client||(t.Client={}));var b=function(){function e(){if((0,o.default)(this,e),this.scene=null,this.nextScene=null,this.dt=0,this.elapsed=0,this.paused=!1,this.frameCount=0,this.lastTime=0,this.timeScale=1,this.useStats=!1,null!=e.instance)throw Error("Engine has already been instantiated");if(!e.started)throw Error("Engine must be instantiated through static Engine.start");e.instance=this,this.client=l.Web,window&&window.process&&window.process.versions&&window.process.versions.electron&&(this.client=l.Desktop),this.startTime=Date.now(),this.lastTime=Date.now()}return(0,a.default)(e,[{key:"step",value:function(){this.useStats&&!this._stats&&(this._stats=new Stats,this._stats.showPanel(0),document.body.appendChild(this._stats.dom)),this._stats&&this._stats.begin();var t=Date.now();this.dt=this.paused?0:Math.floor(t-this.lastTime)/1e3*this.timeScale,this.lastTime=t,this.frameCount++,this.elapsed+=this.dt,this.graphics.update(),p.Mouse.update(),p.Keyboard.update(),null!=this.nextScene&&(null!=this.scene&&(this.scene.ended(),this.disposeLastScene&&this.scene.dispose()),this.scene=this.nextScene,this.nextScene=null,this.scene.begin()),null!=this.scene&&this.scene.update(),null==this.nextScene&&(this.graphics.reset(),null!=this.scene&&this.scene.render(),this.graphics.finalize());var r=!0,n=!1,i=void 0;try{for(var o,s=c.Sound.active[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)o.value.update()}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}this._stats&&this._stats.end(),e.exiting||requestAnimationFrame(this.step.bind(this))}},{key:"exit",value:function(){e.exiting=!0,u.Assets.unload(),e.graphics.unload(),e.client===l.Desktop&&r("./node_modules/electron/index.js").remote.getCurrentWindow().close()}}],[{key:"start",value:function(t,r,n,i,o){e.started=!0,new e,new h.GameWindow,document.addEventListener("visibilitychange",function(){document.hidden?e._hidden=!0:(e._hidden=!1,e.instance&&(e.instance.lastTime=Date.now()))}),h.GameWindow.title=t,h.GameWindow.resize(r*i,n*i),h.GameWindow.center();var s=function(){String.fromCharCode(9679),e.instance.root=document.getElementsByClassName("container")[0],d.registerDefaultOverlapTests(),m.FosterIO.init(),e.instance.graphics=new f.Graphics(e.instance),e.instance.graphics.load(),e.resize(r,n),y.Shaders.init(),p.Mouse.init(),p.Keyboard.init(),p.GamepadManager.init(),e.instance.step(),void 0!==o&&o()};"complete"===document.readyState||"interactive"===document.readyState?s():document.addEventListener("DOMContentLoaded",s)}},{key:"goto",value:function(t,r){return e.scene,e.instance.nextScene=t,e.instance.disposeLastScene=r,t}},{key:"exit",value:function(){e.started&&!e.exiting&&e.instance.exit()}},{key:"resize",value:function(t,r){e.instance.width=t,e.instance.height=r,e.instance.graphics.resize()}},{key:"assert",value:function(e,t){if(!e)throw t;return e}},{key:"root",get:function(){return e.instance.root}},{key:"client",get:function(){return e.instance.client}},{key:"scene",get:function(){return null!=e.instance.nextScene?e.instance.nextScene:e.instance.scene}},{key:"width",get:function(){return e.instance.width}},{key:"height",get:function(){return e.instance.height}},{key:"debugMode",get:function(){return e.instance.debuggerEnabled},set:function(t){e.instance.debuggerEnabled=t}},{key:"delta",get:function(){return e.instance.paused?0:e.instance.dt}},{key:"elapsed",get:function(){return e.instance.elapsed}},{key:"paused",get:function(){return this._hidden||e.instance.paused},set:function(t){e.instance.paused=t}},{key:"timeScale",get:function(){return e.instance.timeScale},set:function(t){e.instance.timeScale=t}},{key:"frameCount",get:function(){return e.instance.frameCount}},{key:"graphics",get:function(){return e.instance.graphics}},{key:"volume",get:function(){return e._volume},set:function(t){e._volume=t;var r=!0,n=!1,i=void 0;try{for(var o,s=c.Sound.active[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;a.volume=a.volume}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"muted",get:function(){return e._muted},set:function(t){e._muted=t;var r=!0,n=!1,i=void 0;try{for(var o,s=c.Sound.active[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;a.muted=a.muted}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}}}]),e}();b.version="0.1.11",b._volume=1,b._muted=!1,b._hidden=!1,b.instance=null,b.started=!1,b.exiting=!1,t.Engine=b},"./lib/foster/entity.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l);Object.defineProperty(t,"__esModule",{value:!0});var c=r("./lib/foster/engine.ts"),d=r("./lib/foster/util/index.ts"),h=function(){function e(t,r){(0,a.default)(this,e),this.id=-1,this.position=new d.Vector(0,0),this.visible=!0,this.active=!0,this.isCreated=!1,this.isStarted=!1,this.components=new d.ObjectList,this.componentByName={},this.groups=[],this._depth=0,this.id=e._next_id++,void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),this.group("sprite")}return(0,u.default)(e,[{key:"toString",value:function(){return"<Entity "+this.id+" '"+(this.name||"[noname]")+"'>"}},{key:"getComponentByName",value:function(e){var t=this.componentByName[e];if(!t)throw Error("no component named "+e);return t}},{key:"created",value:function(){}},{key:"added",value:function(){}},{key:"started",value:function(){}},{key:"removed",value:function(){}},{key:"recycled",value:function(){}},{key:"destroyed",value:function(){}},{key:"update",value:function(){this.components.each(function(e){e.active&&e.update()})}},{key:"lateUpdate",value:function(){this.components.each(function(e){e.active&&e.lateUpdate()})}},{key:"render",value:function(e){this.components.each(function(t){t.visible&&t.render(e)})}},{key:"debugRender",value:function(e){c.Engine.graphics.triangle(d.Vector.temp0.set(this.x+9,this.y),d.Vector.temp1.set(this.x+9-3,this.y-3),d.Vector.temp2.set(this.x+9-3,this.y+3),d.Color.red),c.Engine.graphics.rect(this.x,this.y,10,1,d.Color.red),c.Engine.graphics.triangle(d.Vector.temp0.set(this.x,this.y-9),d.Vector.temp1.set(this.x-3,this.y-9+3),d.Vector.temp2.set(this.x+3,this.y-9+3),d.Color.green),c.Engine.graphics.rect(this.x,this.y,1,-10,d.Color.green),this.components.each(function(t){t.visible&&t.debugRender(e)})}},{key:"add",value:function(e){return this.components.add(e),e.entity=this,e.addedToEntity(),null!=this.scene&&this.scene._trackComponent(e),e}},{key:"remove",value:function(e){return this.components.remove(e),e.removedFromEntity(),e.entity=null,null!=this.scene&&this.scene._untrackComponent(e),this._removeNamedComponent(e),e}},{key:"_removeNamedComponent",value:function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var s,a=Object.entries(this.componentByName)[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=(0,o.default)(s.value,2),u=l[0];l[1]===e&&t.push(u)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}var c=!0,d=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var u=f.value;delete this.componentByName[u]}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}},{key:"removeAll",value:function(){for(var e=this.components.count-1;e>=0;e--)this.remove(this.components[e]);this.componentByName={}}},{key:"find",value:function(e){var t=null;return this.components.each(function(r){if(r instanceof e)return t=r,!1}),t}},{key:"findAll",value:function(e){var t=[];return this.components.each(function(r){r instanceof e&&t.push(r)}),t}},{key:"group",value:function(e){this.groups.push(e),null!=this.scene&&this.scene._groupEntity(this,e)}},{key:"ungroup",value:function(e){var t=this.groups.indexOf(e);t>=0&&(this.groups.splice(t,1),null!=this.scene&&this.scene._ungroupEntity(this,e))}},{key:"ingroup",value:function(e){return this.groups.indexOf(e)>=0}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"depth",get:function(){return this._depth},set:function(e){if(null==this.scene)throw Error("Cannot set depth without being attached to a scene");if(this._depth!==e){this._depth=e,this.scene.entities.unsorted=!0;var t=!0,r=!1,n=void 0;try{for(var i,o=this.groups[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this.scene.groups[s].unsorted=!0}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}}]),e}();h._next_id=1,t.Entity=h},"./lib/foster/gameWindow.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/input/mouse.ts"),c=r("./lib/foster/util/vector.ts"),d=function(){function e(){if((0,o.default)(this,e),l.Engine.client===l.Client.Desktop){var t=r("./node_modules/electron/index.js").remote;e.browserWindow=t.getCurrentWindow(),e.screen=t.screen}}return(0,a.default)(e,null,[{key:"resize",value:function(t,r){l.Engine.client===l.Client.Desktop&&e.browserWindow.setContentSize(t,r)}},{key:"center",value:function(){l.Engine.client===l.Client.Desktop&&e.browserWindow.center()}},{key:"toggleDevTools",value:function(){l.Engine.client===l.Client.Desktop&&e.browserWindow.toggleDevTools()}},{key:"title",get:function(){return e.titleName},set:function(t){e.titleName=t,l.Engine.client===l.Client.Desktop?e.browserWindow.setTitle(t):document.title=t}},{key:"fullscreen",get:function(){return l.Engine.client===l.Client.Desktop&&e.browserWindow.isFullScreen()},set:function(t){l.Engine.client===l.Client.Desktop&&e.browserWindow.setFullScreen(t)}},{key:"screenLeft",get:function(){return l.Engine.client===l.Client.Desktop?e.browserWindow.getPosition()[0]:l.Engine.graphics.canvas.getBoundingClientRect().left}},{key:"screenTop",get:function(){return l.Engine.client===l.Client.Desktop?e.browserWindow.getPosition()[1]:l.Engine.graphics.canvas.getBoundingClientRect().top}},{key:"screenWidth",get:function(){return l.Engine.client===l.Client.Desktop?e.browserWindow.getContentSize()[0]:l.Engine.graphics.canvas.getBoundingClientRect().width}},{key:"screenHeight",get:function(){return l.Engine.client===l.Client.Desktop?e.browserWindow.getContentSize()[1]:l.Engine.graphics.canvas.getBoundingClientRect().height}},{key:"screenMouse",get:function(){if(l.Engine.client===l.Client.Desktop){var t=e.screen.getCursorScreenPoint();return new c.Vector(t.x,t.y)}return u.Mouse.absolute}}]),e}();t.GameWindow=d},"./lib/foster/graphics.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/createClass.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l,u=r("./lib/foster/assets/textures/renderTarget.ts"),c=r("./lib/foster/assets/textures/texture.ts"),d=r("./lib/foster/engine.ts"),h=r("./lib/foster/util/color.ts"),f=r("./lib/foster/util/matrix.ts"),p=r("./lib/foster/util/rectangle.ts"),m=r("./lib/foster/util/shader.ts"),y=r("./lib/foster/util/shaders.ts"),b=r("./lib/foster/util/vector.ts");!function(e){e[e.None=0]="None",e[e.Exact=1]="Exact",e[e.Contain=2]="Contain",e[e.ContainInteger=3]="ContainInteger",e[e.Fill=4]="Fill",e[e.FillInteger=5]="FillInteger"}(l=t.ResolutionStyle||(t.ResolutionStyle={}));var v=function e(t,r){(0,a.default)(this,e),this.source=t,this.dest=r};t.BlendMode=v;var g=function e(){(0,a.default)(this,e)};t.BlendModes=g;var _=function(){function e(t){(0,a.default)(this,e),this.resolutionStyle=l.Contain,this.borderColor=h.Color.black.clone(),this.clearColor=new h.Color(.1,.1,.3,1),this.vertices=[],this.texcoords=[],this.colors=[],this.currentTarget=null,this.currentShader=null,this.nextShader=null,this.currentBlendmode=null,this.nextBlendmode=null,this.orthographic=new f.Matrix,this.toscreen=new f.Matrix,this._pixel=null,this._pixelUVs=[new b.Vector(0,0),new b.Vector(1,0),new b.Vector(1,1),new b.Vector(0,1)],this._defaultPixel=null,this.drawCalls=0,this._texts=[],this.topleft=new b.Vector,this.topright=new b.Vector,this.botleft=new b.Vector,this.botright=new b.Vector,this.texToDraw=new c.Texture(null,new p.Rectangle,new p.Rectangle),this.engine=t,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",{alpha:!1,antialias:!1}),e._initCanvas(this.canvas),this.gl.enable(this.gl.BLEND),this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.CULL_FACE),this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),g.normal=new v(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),g.add=new v(this.gl.ONE,this.gl.DST_ALPHA),g.multiply=new v(this.gl.DST_COLOR,this.gl.ONE_MINUS_SRC_ALPHA),g.screen=new v(this.gl.ONE,this.gl.ONE_MINUS_SRC_COLOR),this.currentBlendmode=g.normal,this.vertexBuffer=this.gl.createBuffer(),this.texcoordBuffer=this.gl.createBuffer(),this.colorBuffer=this.gl.createBuffer()}return(0,o.default)(e,[{key:"load",value:function(){this.pixel=this._defaultPixel=c.Texture.createFromData([1,1,1,1],1,1)}},{key:"unload",value:function(){this._defaultPixel.dispose(),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.colorBuffer),this.gl.deleteBuffer(this.texcoordBuffer),this.buffer.dispose(),this.buffer=null,this.canvas.remove(),this.canvas=null}},{key:"resize",value:function(){null!=this.buffer&&this.buffer.dispose(),this.buffer=u.RenderTarget.create(d.Engine.width,d.Engine.height),this.orthographic.identity().translate(-1,1).scale(1/this.buffer.width*2,-1/this.buffer.height*2)}},{key:"update",value:function(){e.checkCanvasSize(this.canvas),this.textCanvas&&e.checkCanvasSize(this.textCanvas)}},{key:"getOutputBounds",value:function(){var e=1,t=1;this.resolutionStyle===l.Exact?(e=this.canvas.width/this.buffer.width,t=this.canvas.height/this.buffer.height):this.resolutionStyle===l.Contain?e=t=Math.min(this.canvas.width/this.buffer.width,this.canvas.height/this.buffer.height):this.resolutionStyle===l.ContainInteger?e=t=Math.floor(Math.min(this.canvas.width/this.buffer.width,this.canvas.height/this.buffer.height)):this.resolutionStyle===l.Fill?e=t=Math.max(this.canvas.width/this.buffer.width,this.canvas.height/this.buffer.height):this.resolutionStyle===l.FillInteger&&(e=t=Math.ceil(Math.max(this.canvas.width/this.buffer.width,this.canvas.height/this.buffer.height)));var r=this.buffer.width*e,n=this.buffer.height*t;return new p.Rectangle((this.canvas.width-r)/2,(this.canvas.height-n)/2,r,n)}},{key:"clear",value:function(e){this.textContext&&this.textContext.clearRect(0,0,this.textContext.canvas.width,this.textContext.canvas.height),this.gl.clearColor(e.r,e.g,e.b,e.a),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"fillText",value:function(e,t,r,n){}},{key:"reset",value:function(){this.drawCalls=0,this.currentShader=null,this.nextShader=null,this.vertices=[],this.colors=[],this.texcoords=[],this.setRenderTarget(this.buffer),this.clear(this.clearColor)}},{key:"setRenderTarget",value:function(e){this.currentTarget!=e&&(this.flush(),null==e?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.canvas.width,this.canvas.height)):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.frameBuffer),this.gl.viewport(0,0,e.width,e.height)),this.currentTarget=e)}},{key:"setShaderTexture",value:function(e){d.Engine.assert(null!=this.shader.sampler2d,"This shader has no Sampler2D to set the texture to")&&(this.shader.sampler2d.value=e.texture.webGLTexture)}},{key:"checkState",value:function(){if(null!=this.nextShader||this.currentShader.dirty||null!=this.nextBlendmode){null!=this.currentShader&&this.flush();var e=null!=this.nextShader;if(e){if(null!=this.currentShader)for(var t=0;t<this.currentShader.attributes.length;t++)this.gl.disableVertexAttribArray(this.currentShader.attributes[t].attribute);this.currentShader=this.nextShader,this.nextShader=null,this.gl.useProgram(this.currentShader.program);for(var r=0;r<this.currentShader.attributes.length;r++)this.gl.enableVertexAttribArray(this.currentShader.attributes[r].attribute)}null!=this.nextBlendmode&&(this.currentBlendmode=this.nextBlendmode,this.nextBlendmode=null,this.gl.blendFunc(this.currentBlendmode.source,this.currentBlendmode.dest));var n=0,i=!0,o=!1,s=void 0;try{for(var a,l=this.currentShader.uniforms[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var d=a.value;if(e||d.dirty){var h=d.uniform;d.type===m.ShaderUniformType.sampler2D?(this.gl.activeTexture(this.gl["TEXTURE"+n]),d.value instanceof c.Texture?this.gl.bindTexture(this.gl.TEXTURE_2D,d.value.texture.webGLTexture):d.value instanceof u.RenderTarget?this.gl.bindTexture(this.gl.TEXTURE_2D,d.value.texture.webGLTexture):this.gl.bindTexture(this.gl.TEXTURE_2D,d.value),this.gl.uniform1i(h,n),n+=1):m.setGLUniformValue[d.type](this.gl,d.uniform,d.value),d.dirty=!1}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}this.currentShader.dirty=!1}}},{key:"flush",value:function(){if(0!==this.vertices.length){var e=!0,t=!1,r=void 0;try{for(var n,i=this.currentShader.attributes[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.type===m.ShaderAttributeType.Position?(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null==this.currentTarget?this.vertexBuffer:this.currentTarget.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.vertices),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(o.attribute,2,this.gl.FLOAT,!1,0,0)):o.type===m.ShaderAttributeType.Texcoord?(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null==this.currentTarget?this.texcoordBuffer:this.currentTarget.texcoordBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.texcoords),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(o.attribute,2,this.gl.FLOAT,!1,0,0)):o.type===m.ShaderAttributeType.Color&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null==this.currentTarget?this.colorBuffer:this.currentTarget.colorBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.colors),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(o.attribute,4,this.gl.FLOAT,!1,0,0))}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertices.length/2),this.drawCalls++,this.vertices=[],this.texcoords=[],this.colors=[]}}},{key:"finalize",value:function(){this.setRenderTarget(null),this.clear(this.borderColor),this.toscreen.identity().translate(-1,-1).scale(1/this.canvas.width*2,1/this.canvas.height*2),this.shader=y.Shaders.texture,this.shader.sampler2d.value=this.buffer.texture.webGLTexture,this.shader.set("matrix",this.toscreen);var e=this.getOutputBounds();this.push(e.left,e.top,0,0,h.Color.white),this.pushUnsafe(e.right,e.top,1,0,h.Color.white),this.pushUnsafe(e.right,e.bottom,1,1,h.Color.white),this.pushUnsafe(e.left,e.top,0,0,h.Color.white),this.pushUnsafe(e.right,e.bottom,1,1,h.Color.white),this.pushUnsafe(e.left,e.bottom,0,1,h.Color.white),this.flush()}},{key:"push",value:function(e,t,r,n,i){this.checkState(),this.vertices.push(e,t),this.texcoords.push(r,n),void 0!==i&&null!==i&&this.colors.push(i.r,i.g,i.b,i.a)}},{key:"pushUnsafe",value:function(e,t,r,n,i){this.vertices.push(e,t),this.texcoords.push(r,n),void 0!==i&&null!==i&&this.colors.push(i.r,i.g,i.b,i.a)}},{key:"pushList",value:function(e,t,r){this.checkState();for(var n=0;n<e.length;n++)if(this.vertices.push(e[n].x,e[n].y),void 0!==t&&null!==t&&this.texcoords.push(t[n].x,t[n].y),void 0!==r&&null!==r){var i=r[n];this.colors.push(i.r,i.g,i.b,i.a)}}},{key:"texture",value:function(e,t,r,n,i,o,s,a,l,u,c,d){this.setShaderTexture(e);var f=null;f=void 0===n||null===n?e:e.getSubtexture(n,this.texToDraw);var p=-f.frame.x,m=-f.frame.y;if(void 0===c&&(c=f.bounds.width),void 0===d&&(d=f.bounds.height),this.topleft.set(p,m),this.topright.set(p+c,m),this.botleft.set(p,m+d),this.botright.set(p+c,m+d),!o||0===o.x&&0===o.y||(this.topleft.sub(o),this.topright.sub(o),this.botleft.sub(o),this.botright.sub(o)),!s||1===s.x&&1===s.y||(this.topleft.mult(s),this.topright.mult(s),this.botleft.mult(s),this.botright.mult(s)),a&&0!==a){var y=Math.sin(a),b=Math.cos(a);this.topleft.rotate(y,b),this.topright.rotate(y,b),this.botleft.rotate(y,b),this.botright.rotate(y,b)}var v=f.bounds.x/f.texture.width,g=f.bounds.y/f.texture.height,_=v+c/f.texture.width,j=g+d/f.texture.height;if(l){var x=v;v=_,_=x}if(u){var w=g;g=j,j=w}var k=i||h.Color.white;this.push(t+this.topleft.x,r+this.topleft.y,v,g,k),this.pushUnsafe(t+this.topright.x,r+this.topright.y,_,g,k),this.pushUnsafe(t+this.botright.x,r+this.botright.y,_,j,k),this.pushUnsafe(t+this.topleft.x,r+this.topleft.y,v,g,k),this.pushUnsafe(t+this.botright.x,r+this.botright.y,_,j,k),this.pushUnsafe(t+this.botleft.x,r+this.botleft.y,v,j,k)}},{key:"quad",value:function(e,t,r,n,i,o,s,a){if(this.topleft.set(0,0),this.topright.set(0+r,0),this.botleft.set(0,0+n),this.botright.set(0+r,0+n),!o||0===o.x&&0===o.y||(this.topleft.sub(o),this.topright.sub(o),this.botleft.sub(o),this.botright.sub(o)),!s||1===s.x&&1===s.y||(this.topleft.mult(s),this.topright.mult(s),this.botleft.mult(s),this.botright.mult(s)),a&&0!==a){var l=Math.sin(a),u=Math.cos(a);this.topleft.rotate(l,u),this.topright.rotate(l,u),this.botleft.rotate(l,u),this.botright.rotate(l,u)}i||h.Color.white,this.push(e+this.topleft.x,t+this.topleft.y,0,0,i),this.pushUnsafe(e+this.topright.x,t+this.topright.y,0,0,i),this.pushUnsafe(e+this.botright.x,t+this.botright.y,0,0,i),this.pushUnsafe(e+this.topleft.x,t+this.topleft.y,0,0,i),this.pushUnsafe(e+this.botright.x,t+this.botright.y,0,0,i),this.pushUnsafe(e+this.botleft.x,t+this.botleft.y,0,0,i)}},{key:"rect",value:function(e,t,r,n,i){null!=this.shader.sampler2d&&this.setShaderTexture(this._pixel);var o=this._pixelUVs;this.push(e,t,o[0].x,o[0].y,i),this.pushUnsafe(e+r,t,o[1].x,o[1].y,i),this.pushUnsafe(e+r,t+n,o[2].x,o[2].y,i),this.pushUnsafe(e,t,o[0].x,o[0].y,i),this.pushUnsafe(e,t+n,o[3].x,o[3].y,i),this.pushUnsafe(e+r,t+n,o[2].x,o[2].y,i)}},{key:"triangle",value:function(e,t,r,n,i,o){null!=this.shader.sampler2d&&this.setShaderTexture(this._pixel),void 0===i&&(i=n),void 0===o&&(o=n);var s=this._pixelUVs;this.push(e.x,e.y,s[0].x,s[0].y,n),this.pushUnsafe(t.x,t.y,s[1].x,s[1].y,i),this.pushUnsafe(r.x,r.y,s[2].x,s[2].y,o)}},{key:"circle",value:function(e,t,r,n,i){null!=this.shader.sampler2d&&this.setShaderTexture(this._pixel),void 0===i&&(i=n),this.checkState();for(var o=this._pixelUVs,s=new b.Vector(e.x+t,e.y),a=1;a<=r;a++){var l=a/r*Math.PI*2,u=new b.Vector(e.x+Math.cos(l),e.y+Math.sin(l));this.pushUnsafe(e.x,e.y,o[0].x,o[0].y,n),this.pushUnsafe(s.x,s.y,o[1].x,o[1].y,i),this.pushUnsafe(u.x,u.y,o[2].x,o[2].y,i),s=u}}},{key:"hollowRect",value:function(e,t,r,n,i,o){this.rect(e,t,r,i,o),this.rect(e,t+i,i,n-2*i,o),this.rect(e+r-i,t+i,i,n-2*i,o),this.rect(e,t+n-i,r,i,o)}},{key:"shader",get:function(){return null!=this.nextShader?this.nextShader:this.currentShader},set:function(e){this.shader!=e&&null!=e&&(this.nextShader=e)}},{key:"blendmode",get:function(){return null!=this.nextBlendmode?this.nextBlendmode:this.currentBlendmode},set:function(e){this.currentBlendmode!=e&&null!=e&&(this.nextBlendmode=e)}},{key:"pixel",set:function(e){null==e&&(e=this._defaultPixel);var t=e.bounds.left/e.texture.width,r=e.bounds.top/e.texture.height,n=e.bounds.right/e.texture.width,i=e.bounds.bottom/e.texture.height;this._pixel=e,this._pixelUVs=[new b.Vector(t,r),new b.Vector(n,r),new b.Vector(n,i),new b.Vector(t,i)]},get:function(){return this._pixel}}],[{key:"_initCanvas",value:function(e){e.onselectstart=function(){return!1},d.Engine.root.appendChild(e)}},{key:"checkCanvasSize",value:function(e){e.width===d.Engine.root.clientWidth&&e.height===d.Engine.root.clientHeight||(e.width=d.Engine.root.clientWidth,e.height=d.Engine.root.clientHeight)}}]),e}();t.Graphics=_},"./lib/foster/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/component.ts")),n(r("./lib/foster/engine.ts")),n(r("./lib/foster/entity.ts")),n(r("./lib/foster/scene.ts"))},"./lib/foster/input/controller.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/inherits.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/createClass.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/component.ts"),f=r("./lib/foster/util/vector.ts"),p=function(){function e(){(0,u.default)(this,e)}return(0,d.default)(e,null,[{key:"init",value:function(){window.addEventListener("gamepadconnected",e.onAddController,!1),window.addEventListener("gamepaddisconnected",e.onRemoveController,!1)}},{key:"onAddController",value:function(t){var r=!0,n=!1,i=void 0;try{for(var o,s=e.controllers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)if(o.value.gamepad===t.gamepad)return}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}t.gamepad.id.includes("Unknown Gamepad")||e.controllers.push(new ControllerInput(t.gamepad))}},{key:"onRemoveController",value:function(e){}},{key:"getController",value:function(t){return e.controllers[t]}},{key:"numControllers",value:function(){return e.controllers.length}},{key:"setRemoveControllerBehavior",value:function(t){e.onRemoveController=t}}]),e}();p.defaultDeadzone=.3,p.controllers=[],t.GamepadManager=p;var ControllerInput=function(e){function ControllerInput(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.defaultDeadzone;(0,u.default)(this,ControllerInput);var r=(0,o.default)(this,(ControllerInput.__proto__||Object.getPrototypeOf(ControllerInput)).call(this));r.leftStick=new f.Vector,r.rightStick=new f.Vector,r.buttons=[],r.gamepad=e,r.deadzone=t;for(var n=0;n<e.buttons.length;n++)r.buttons.push(new m);return r}return(0,a.default)(ControllerInput,e),(0,d.default)(ControllerInput,[{key:"update",value:function(){var e=this.queryGamepad();this.leftStick.x=e.axes[0],this.leftStick.y=e.axes[1],this.rightStick.x=e.axes[2],this.rightStick.y=e.axes[3];for(var t=0;t<this.buttons.length;t++)this.buttons[t].update(e.buttons[t].pressed)}},{key:"getButton",value:function(e){return this.buttons[e]}},{key:"getLeftStick",value:function(){return this.leftStick.length>this.deadzone?this.leftStick.clone():f.Vector.zero}},{key:"getRightStick",value:function(){return this.rightStick.length>this.deadzone?this.rightStick.clone():f.Vector.zero}},{key:"getRawLeftStick",value:function(){return this.leftStick.clone()}},{key:"getRawRightStick",value:function(){return this.rightStick.clone()}},{key:"queryGamepad",value:function(){return navigator.getGamepads()[this.gamepad.index]}}]),ControllerInput}(h.Component),m=function(){function e(){(0,u.default)(this,e),this._last=!1,this._next=!1}return(0,d.default)(e,[{key:"update",value:function(e){this._last=this._next,this._next=e}},{key:"down",value:function(){return this._next}},{key:"pressed",value:function(){return this._next&&!this._last}},{key:"released",value:function(){return this._last&&!this._next}}]),e}()},"./lib/foster/input/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/input/controller.ts")),n(r("./lib/foster/input/keyboard.ts")),n(r("./lib/foster/input/mouse.ts"))},"./lib/foster/input/keyboard.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"init",value:function(){window.addEventListener("keydown",function(t){e._next[t.keyCode]=!0}),window.addEventListener("keyup",function(t){e._next[t.keyCode]=!1})}},{key:"update",value:function(){for(var t=0;t<256;t++)e._last[t]=e._down[t],e._down[t]=e._next[t]}},{key:"check",value:function(t){return isNaN(t)?e.mapCheck(t):1==e._down[t]}},{key:"pressed",value:function(t){return isNaN(t)?e.mapPressed(t):1==e._down[t]&&!e._last[t]}},{key:"released",value:function(t){return isNaN(t)?e.mapReleased(t):!e._down[t]&&1==e._last[t]}},{key:"map",value:function(t,r){e._map[t]||(e._map[t]=[]);for(var n=0;n<r.length;n++)e._map[t].push(r[n])}},{key:"maps",value:function(t){for(var r in t)e.map(r,t[r])}},{key:"mapCheck",value:function(t){if(void 0!=e._map[t])for(var r=0;r<e._map[t].length;r++)if(e.check(e._map[t][r]))return!0;return!1}},{key:"mapPressed",value:function(t){if(void 0!=e._map[t])for(var r=0;r<e._map[t].length;r++)if(e.pressed(e._map[t][r]))return!0;return!1}},{key:"mapReleased",value:function(t){if(void 0!=e._map[t])for(var r=0;r<e._map[t].length;r++)if(e.released(e._map[t][r]))return!0;return!1}}]),e}();l._down=[],l._last=[],l._next=[],l._map={},t.Keyboard=l,function(e){e[e.backspace=8]="backspace",e[e.tab=9]="tab",e[e.enter=13]="enter",e[e.shift=16]="shift",e[e.ctrl=17]="ctrl",e[e.alt=18]="alt",e[e.pause=19]="pause",e[e.capslock=20]="capslock",e[e.escape=27]="escape",e[e.space=32]="space",e[e.pageUp=33]="pageUp",e[e.pageDown=34]="pageDown",e[e.end=35]="end",e[e.home=36]="home",e[e.left=37]="left",e[e.up=38]="up",e[e.right=39]="right",e[e.down=40]="down",e[e.insert=45]="insert",e[e.del=46]="del",e[e.zero=48]="zero",e[e.one=49]="one",e[e.two=50]="two",e[e.three=51]="three",e[e.four=52]="four",e[e.five=53]="five",e[e.six=54]="six",e[e.seven=55]="seven",e[e.eight=56]="eight",e[e.nine=57]="nine",e[e.a=65]="a",e[e.b=66]="b",e[e.c=67]="c",e[e.d=68]="d",e[e.e=69]="e",e[e.f=70]="f",e[e.g=71]="g",e[e.h=72]="h",e[e.i=73]="i",e[e.j=74]="j",e[e.k=75]="k",e[e.l=76]="l",e[e.m=77]="m",e[e.n=78]="n",e[e.o=79]="o",e[e.p=80]="p",e[e.q=81]="q",e[e.r=82]="r",e[e.s=83]="s",e[e.t=84]="t",e[e.u=85]="u",e[e.v=86]="v",e[e.w=87]="w",e[e.x=88]="x",e[e.y=89]="y",e[e.z=90]="z",e[e.leftWindow=91]="leftWindow",e[e.rightWindow=92]="rightWindow",e[e.select=93]="select",e[e.numpad0=96]="numpad0",e[e.numpad1=97]="numpad1",e[e.numpad2=98]="numpad2",e[e.numpad3=99]="numpad3",e[e.numpad4=100]="numpad4",e[e.numpad5=101]="numpad5",e[e.numpad6=102]="numpad6",e[e.numpad7=103]="numpad7",e[e.numpad8=104]="numpad8",e[e.numpad9=105]="numpad9",e[e.multiply=106]="multiply",e[e.add=107]="add",e[e.subtract=109]="subtract",e[e.decimal=110]="decimal",e[e.divide=111]="divide",e[e.f1=112]="f1",e[e.f2=113]="f2",e[e.f3=114]="f3",e[e.f4=115]="f4",e[e.f5=116]="f5",e[e.f6=117]="f6",e[e.f7=118]="f7",e[e.f8=119]="f8",e[e.f9=120]="f9",e[e.f10=121]="f10",e[e.f11=122]="f11",e[e.f12=123]="f12",e[e.numlock=144]="numlock",e[e.scrollLock=145]="scrollLock",e[e.semicolon=186]="semicolon",e[e.equal=187]="equal",e[e.comma=188]="comma",e[e.dash=189]="dash",e[e.period=190]="period",e[e.forwardSlash=191]="forwardSlash",e[e.graveAccent=192]="graveAccent",e[e.openBracket=219]="openBracket",e[e.backSlash=220]="backSlash",e[e.closeBraket=221]="closeBraket",e[e.singleQuote=222]="singleQuote"}(t.Key||(t.Key={}))},"./lib/foster/input/mouse.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/util/vector.ts"),c=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,[{key:"percent",value:function(){return new u.Vector}}],[{key:"init",value:function(){e._position=new u.Vector(0,0),e._positionNext=new u.Vector(0,0),l.Engine.root.addEventListener("mousemove",function(t){e.absolute=new u.Vector(t.pageX,t.pageY),e.setNextMouseTo(t.pageX,t.pageY)}),l.Engine.root.addEventListener("mousedown",function(t){0===t.button?e._leftNext=!0:e._rightNext=!0}),l.Engine.root.addEventListener("mouseup",function(t){0===t.button?e._leftNext=!1:e._rightNext=!1})}},{key:"update",value:function(){this._leftWas=this._left,this._left=this._leftNext,this._rightWas=this._right,this._right=this._rightNext,this._position=this._positionNext}},{key:"setNextMouseTo",value:function(t,r){var n=l.Engine.graphics.canvas.getBoundingClientRect(),i=l.Engine.graphics.getOutputBounds(),o=new u.Vector(i.width/l.Engine.width,i.height/l.Engine.height);e._positionNext,e._positionNext=new u.Vector((t-n.left-i.left)/o.x,(r-n.top-i.top)/o.y)}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"position",get:function(){return new u.Vector(this._position.x,this._position.y)}},{key:"left",get:function(){return this._left}},{key:"leftPressed",get:function(){return this._left&&!this._leftWas}},{key:"leftReleased",get:function(){return!this._left&&this._leftWas}},{key:"right",get:function(){return this._right}},{key:"rightPressed",get:function(){return this._right&&!this._rightWas}},{key:"rightReleased",get:function(){return!this._right&&this._rightWas}}]),e}();c.absolute=new u.Vector(0,0),t.Mouse=c},"./lib/foster/renderer.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/util/color.ts"),c=function(){function e(){(0,o.default)(this,e),this.sortOrder=0,this.visible=!0,this.target=null,this.clearTargetColor=new u.Color(0,0,0,0),this.scene=null,this.groupsMask=[]}return(0,a.default)(e,[{key:"update",value:function(){}},{key:"preRender",value:function(){}},{key:"render",value:function(){return this.drawBegin(),this.drawEntities()}},{key:"drawBegin",value:function(){null!=this.target?(l.Engine.graphics.setRenderTarget(this.target),l.Engine.graphics.clear(this.clearTargetColor)):l.Engine.graphics.setRenderTarget(l.Engine.graphics.buffer),l.Engine.graphics.shader=this.shader,l.Engine.graphics.shader.set(this.shaderCameraUniformName,this.getActiveCamera().matrix)}},{key:"getEntitiesToRender",value:function(){return this.groupsMask.length>0?this.scene.allInGroups(this.groupsMask):this.scene.entities}},{key:"drawEntities",value:function(){var e=this.getActiveCamera(),t=0;return this.getEntitiesToRender().each(function(r){r.visible&&(r.render(e),++t)}),t}},{key:"getActiveCamera",value:function(){return this.camera||this.scene.camera}},{key:"postRender",value:function(){}},{key:"dispose",value:function(){null!=this.target&&this.target.dispose(),this.target=null}}]),e}();t.Renderer=c},"./lib/foster/renderers/spriteRenderer.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/inherits.js"),u=n(l);Object.defineProperty(t,"__esModule",{value:!0});var c=r("./lib/foster/renderer.ts"),d=r("./lib/foster/util/shaders.ts"),h=function(e){function t(){(0,o.default)(this,t);var e=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.shader=d.Shaders.texture,e.shaderCameraUniformName="matrix",e}return(0,u.default)(t,e),t}(c.Renderer);t.SpriteRenderer=h},"./lib/foster/scene.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l);Object.defineProperty(t,"__esModule",{value:!0});var c=r("./lib/foster/components/colliders/collider.ts"),d=r("./lib/foster/engine.ts"),h=r("./lib/foster/renderers/spriteRenderer.ts"),f=r("./lib/foster/util/index.ts"),p=function(){function e(){(0,a.default)(this,e),this.camera=new f.Camera,this.entities=new f.ObjectList,this.renderers=new f.ObjectList,this.groups={},this.colliders={},this.cache={},this.earlyUpdate=[],this._markedForDestruction=[],this.camera=new f.Camera,this.addRenderer(new h.SpriteRenderer)}return(0,u.default)(e,[{key:"begin",value:function(){}},{key:"ended",value:function(){}},{key:"dispose",value:function(){var e=this;this.renderers.each(function(e){return e.dispose()}),this.renderers.clear(),this.entities.each(function(t){return e.destroy(t)}),this.entities.clear(),this.colliders={},this.groups={},this.cache={}}},{key:"update",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.earlyUpdate[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)(0,n.value)()}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}this.entities.each(function(e){e.isStarted||(e.isStarted=!0,e.started()),e.active&&e.isStarted&&e.update()}),this.entities.each(function(e){e.active&&e.isStarted&&e.lateUpdate()});var o=!0,s=!1,a=void 0;try{for(var l,u=this._markedForDestruction[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;this.destroy(c)}}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}this.renderers.each(function(e){e.visible&&e.update()}),this.entities.clean(),this.renderers.clean();for(var d in this.groups)this.groups[d].clean()}},{key:"render",value:function(){var e=this;this.entities.sort(function(e,t){return t.depth-e.depth});for(var t in this.groups)this.groups[t].sort(function(e,t){return t.depth-e.depth});this.renderers.each(function(e){e.visible&&e.preRender()}),this.renderers.each(function(e){e.visible&&e.render()}),this.renderers.each(function(e){e.visible&&e.postRender()}),d.Engine.debugMode&&(d.Engine.graphics.setRenderTarget(d.Engine.graphics.buffer),d.Engine.graphics.shader=f.Shaders.primitive,d.Engine.graphics.shader.set("matrix",this.camera.matrix),this.debugRender(this.camera),this.entities.each(function(t){t.active&&t.debugRender(e.camera)}))}},{key:"debugRender",value:function(e){}},{key:"add",value:function(e,t){var r=this;e.scene=this,this.entities.add(e),void 0!==t&&e.position.set(t.x,t.y),e.isCreated||(e.isCreated=!0,e.created());var n=!0,i=!1,o=void 0;try{for(var s,a=e.groups[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;this._groupEntity(e,l)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e.components.each(function(e){return r._trackComponent(e)}),e.added(),e}},{key:"recreate",value:function(e){if(Array.isArray(this.cache[e])&&this.cache[e].length>0){var t=this.cache[e][0];return this.cache[e].splice(0,1),this.add(t)}return null}},{key:"recycle",value:function(e,t){this.remove(t),void 0===this.cache[e]&&(this.cache[e]=[]),this.cache[e].push(t),t.recycled()}},{key:"remove",value:function(e){var t=this;e.removed(),e.components.each(function(e){return t._untrackComponent(e)});var r=!0,n=!1,i=void 0;try{for(var o,s=e.groups[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;this._ungroupEntity(e,a)}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}e.isStarted=!1,e.scene=null,this.entities.remove(e)}},{key:"removeAll",value:function(){var e=this;this.entities.each(function(t){return e.remove(t)})}},{key:"destroy",value:function(e){null!=e.scene&&this.remove(e),e.destroyed(),e.isCreated=!1}},{key:"destroyLater",value:function(e){this._markedForDestruction.push(e)}},{key:"findAllComponents",value:function(e){var t=[];return this.entities.each(function(r){t.push.apply(t,(0,o.default)(r.findAll(e)))}),t}},{key:"find",value:function(e){var t=null;return this.entities.each(function(r){if(r instanceof e)return t=r,!1}),t}},{key:"findEach",value:function(e,t){this.entities.each(function(r){if(r instanceof e)return t(r)})}},{key:"findAll",value:function(e){var t=[];return this.entities.each(function(r){r instanceof e&&t.push(r)}),t}},{key:"firstInGroup",value:function(e){return void 0!==this.groups[e]&&this.groups[e].count>0?this.groups[e].first():null}},{key:"eachInGroup",value:function(e,t){void 0!==this.groups[e]&&this.groups[e].each(t)}},{key:"allInGroup",value:function(e){return void 0!==this.groups[e]?this.groups[e]:null}},{key:"eachInGroups",value:function(e,t){for(var r=!1,n=0;n<e.length&&!r;n++)this.eachInGroup(e[n],function(e){var n=t(e);return!1===n&&(r=!0),n})}},{key:"allInGroups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!=t&&void 0!==t||(t=new f.ObjectList);var r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value,l=this.allInGroup(a);null!=l&&l.each(function(e){return t.add(e)})}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return t}},{key:"firstColliderInTag",value:function(e){return void 0!==this.colliders[e]&&this.colliders[e].length>0?this.colliders[e][0]:null}},{key:"allCollidersInTag",value:function(e){return void 0!==this.colliders[e]?this.colliders[e]:[]}},{key:"addRenderer",value:function(e){return e.scene=this,this.renderers.add(e),this.renderers.sort(function(e,t){return f.Calc.cmp(e.sortOrder,t.sortOrder)}),e}},{key:"removeRenderer",value:function(e,t){return this.renderers.remove(e),t&&e.dispose(),e.scene=null,e}},{key:"_groupEntity",value:function(e,t){void 0===this.groups[t]&&(this.groups[t]=new f.ObjectList),this.groups[t].add(e)}},{key:"_ungroupEntity",value:function(e,t){void 0!==this.groups[t]&&this.groups[t].remove(e)}},{key:"_trackComponent",value:function(e){if(null==e.entity||e.entity.scene!==this)throw Error("Component must be added through an existing entity");if(e instanceof c.Collider){var t=!0,r=!1,n=void 0;try{for(var i,o=e.tags[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this._trackCollider(e,s)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}e.scene=this,e.addedToScene()}},{key:"_untrackComponent",value:function(e){if(e.removedFromScene(),e instanceof c.Collider){var t=!0,r=!1,n=void 0;try{for(var i,o=e.tags[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this._untrackCollider(e,s)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}e.scene=null}},{key:"_trackCollider",value:function(e,t){void 0===this.colliders[t]&&(this.colliders[t]=[]),this.colliders[t].push(e)}},{key:"_untrackCollider",value:function(e,t){if(void 0!==this.colliders[t]){var r=this.colliders[t].indexOf(e);r>=0&&(this.colliders[t].splice(r,1),this.colliders[t].length<=0&&delete this.colliders[t])}}}]),e}();t.Scene=p},"./lib/foster/util/calc.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"sign",value:function(e){return e<0?-1:e>0?1:0}},{key:"cmp",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"clamp",value:function(e,t,r){return Math.max(t,Math.min(r,e))}},{key:"approach",value:function(e,t,r){return e>t?Math.max(e-r,t):Math.min(e+r,t)}},{key:"range",value:function(e,t){return void 0===t?-e+Math.random()*e*2:e+Math.random()*(t-e)}},{key:"choose",value:function(e){return e[Math.floor(Math.random()*e.length)]}}]),e}();t.Calc=l},"./lib/foster/util/camera.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/input/mouse.ts"),c=r("./lib/foster/util/rectangle.ts"),d=r("./lib/foster/util/matrix.ts"),h=r("./lib/foster/util/vector.ts"),f=function(){function e(){(0,o.default)(this,e),this.position=new h.Vector(0,0),this.origin=new h.Vector(0,0),this.scale=new h.Vector(1,1),this.rotation=0,this._matrix=new d.Matrix,this._internal=new d.Matrix,this._mouse=new h.Vector,this._worldMouse=new h.Vector,this.extentsA=new h.Vector,this.extentsB=new h.Vector,this.extentsC=new h.Vector,this.extentsD=new h.Vector,this.extentsRect=new c.Rectangle}return(0,a.default)(e,[{key:"getExtents",value:function(){var e=this.internal.invert();this.extentsA.set(0,0).transform(e),this.extentsB.set(l.Engine.width,0).transform(e),this.extentsC.set(0,l.Engine.height).transform(e),this.extentsD.set(l.Engine.width,l.Engine.height).transform(e)}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"internal",get:function(){return this._internal.identity().translate(this.origin.x,this.origin.y).rotate(this.rotation).scale(this.scale.x,this.scale.y).translate(-this.position.x,-this.position.y)}},{key:"matrix",get:function(){return this._matrix.copy(l.Engine.graphics.orthographic).multiply(this.internal)}},{key:"mouse",get:function(){return this._mouse.set(u.Mouse.x+this.position.x-this.origin.x,u.Mouse.y+this.position.y-this.origin.y).transform(this.internal.invert())}},{key:"worldMouse",get:function(){var e=this.extents;return this._worldMouse.copy(u.Mouse.position).add(h.Vector.temp0.set(e.x,e.y))}},{key:"extents",get:function(){this.getExtents();var e=this.extentsRect;return e.x=Math.min(this.extentsA.x,this.extentsB.x,this.extentsC.x,this.extentsD.x),e.y=Math.min(this.extentsA.y,this.extentsB.y,this.extentsC.y,this.extentsD.y),e.width=Math.max(this.extentsA.x,this.extentsB.x,this.extentsC.x,this.extentsD.x)-e.x,e.height=Math.max(this.extentsA.y,this.extentsB.y,this.extentsC.y,this.extentsD.y)-e.y,e}}]),e}();t.Camera=f},"./lib/foster/util/color.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(t,r,n,i){(0,o.default)(this,e),this.color=[0,0,0,1],this.r=t||0,this.g=r||0,this.b=n||0,this.a=i||1}return(0,a.default)(e,[{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}},{key:"set",value:function(e,t,r,n){return this.r=e,this.g=t,this.b=r,this.a=n,this}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"lerp",value:function(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this.a=e.a+(t.a-e.a)*r,this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"mult",value:function(e){return this.set(this.r,this.g,this.b,this.a*e)}},{key:"r",get:function(){return this.color[0]},set:function(e){this.color[0]=Math.min(1,Math.max(0,e))}},{key:"g",get:function(){return this.color[1]},set:function(e){this.color[1]=Math.min(1,Math.max(0,e))}},{key:"b",get:function(){return this.color[2]},set:function(e){this.color[2]=Math.min(1,Math.max(0,e))}},{key:"a",get:function(){return this.color[3]},set:function(e){this.color[3]=Math.min(1,Math.max(0,e))}},{key:"rgba",get:function(){return this.color}}],[{key:"fromHex",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=t.replace("#",""),new e(parseInt(3===t.length?t.slice(0,1).repeat(2):t.slice(0,2),16)/255,parseInt(3===t.length?t.slice(1,2).repeat(2):t.slice(2,4),16)/255,parseInt(3===t.length?t.slice(2,3).repeat(2):t.slice(4,6),16)/255,r)}}]),e}();l.white=new l(1,1,1,1),l.black=new l(0,0,0,1),l.red=new l(1,0,0,1),l.green=new l(0,1,0,1),l.blue=new l(0,0,1,1),l.temp=new l,t.Color=l},"./lib/foster/util/ease.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"linear",value:function(e){return e}},{key:"quadIn",value:function(e){return e*e}},{key:"quadOut",value:function(t){return 1-e.quadIn(1-t)}},{key:"quadInOut",value:function(t){return t<=.5?e.quadIn(2*t)/2:e.quadOut(2*t-1)/2+.5}},{key:"cubeIn",value:function(e){return e*e*e}},{key:"cubeOut",value:function(t){return 1-e.cubeIn(1-t)}},{key:"cubeInOut",value:function(t){return t<=.5?e.cubeIn(2*t)/2:e.cubeOut(2*t-1)/2+.5}},{key:"backIn",value:function(e){return e*e*(2.70158*e-1.70158)}},{key:"backOut",value:function(t){return 1-e.backIn(1-t)}},{key:"backInOut",value:function(t){return t<=.5?e.backIn(2*t)/2:e.backOut(2*t-1)/2+.5}},{key:"expoIn",value:function(e){return Math.pow(2,10*(e-1))}},{key:"expoOut",value:function(t){return 1-e.expoIn(t)}},{key:"expoInOut",value:function(t){return t<.5?e.expoIn(2*t)/2:e.expoOut(2*t)/2}},{key:"sineIn",value:function(e){return 1-Math.cos(Math.PI/2*e)}},{key:"sineOut",value:function(e){return Math.sin(Math.PI/2*e)}},{key:"sineInOut",value:function(e){return-Math.cos(Math.PI*e)/2+.5}},{key:"elasticInOut",value:function(e){if(2==(e/=.5))return 1;var t=.3*1.5,r=t/4;return e<1?Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/t)*-.5:Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/t)*.5+1}},{key:"arc",value:function(e,t){return e<.5?1-t(1-2*e):1-t(2*(e-.5))}}]),e}();t.Ease=l},"./lib/foster/util/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./lib/foster/util/camera.ts")),n(r("./lib/foster/util/calc.ts")),n(r("./lib/foster/util/color.ts")),n(r("./lib/foster/util/ease.ts")),n(r("./lib/foster/util/matrix.ts")),n(r("./lib/foster/util/objectList.ts")),n(r("./lib/foster/util/rectangle.ts")),n(r("./lib/foster/util/shader.ts")),n(r("./lib/foster/util/shaders.ts")),n(r("./lib/foster/util/vector.ts"))},"./lib/foster/util/io.ts":function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=function(){function t(){(0,o.default)(this,t)}return(0,a.default)(t,null,[{key:"init",value:function(){null===t.fs&&l.Engine.client===l.Client.Desktop&&(t.fs=r("./node_modules/node-libs-browser/mock/empty.js"),t.path=r("./node_modules/path-browserify/index.js"))}},{key:"read",value:function(r,n){if(l.Engine.client===l.Client.Desktop)t.fs.readFile(t.path.join(e,r),"utf8",function(e,t){if(e)throw e;n(t)});else{var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(i.readyState===XMLHttpRequest.DONE){if(200!==i.status)throw Error("Unable to read file "+r);n(i.responseText)}},i.open("GET",r),i.send()}}},{key:"join",value:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length<=0)return".";if(l.Engine.client===l.Client.Desktop){for(var i=r[0],o=1;o<r.length;o++)i=t.path.join(i,r[o]);return i}var s=[],a=!0,u=!1,c=void 0;try{for(var d,h=r[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var f=d.value,p=f.split("/"),m=!0,y=!1,b=void 0;try{for(var v,g=p[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var _=v.value;s.push(_)}}catch(e){y=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(y)throw b}}}}catch(e){u=!0,c=e}finally{try{!a&&h.return&&h.return()}finally{if(u)throw c}}return s.length>0?s.join("/"):"."}},{key:"extension",value:function(e){var t="",r=/(?:\.([^.]+))?$/.exec(e);return r.length>1&&(t=r[1]),t}}]),t}();u.fs=null,u.path=null,t.FosterIO=u}).call(t,"/")},"./lib/foster/util/matrix.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){(0,o.default)(this,e),this.mat=new Float32Array(9),this.identity()}return(0,a.default)(e,[{key:"identity",value:function(){return this.mat[0]=1,this.mat[1]=0,this.mat[2]=0,this.mat[3]=0,this.mat[4]=1,this.mat[5]=0,this.mat[6]=0,this.mat[7]=0,this.mat[8]=1,this}},{key:"copy",value:function(e){return this.mat[0]=e.mat[0],this.mat[1]=e.mat[1],this.mat[2]=e.mat[2],this.mat[3]=e.mat[3],this.mat[4]=e.mat[4],this.mat[5]=e.mat[5],this.mat[6]=e.mat[6],this.mat[7]=e.mat[7],this.mat[8]=e.mat[8],this}},{key:"set",value:function(e,t,r,n,i,o){return this.mat[0]=e,this.mat[1]=n,this.mat[2]=0,this.mat[3]=r,this.mat[4]=t,this.mat[5]=0,this.mat[6]=i,this.mat[7]=o,this.mat[8]=1,this}},{key:"add",value:function(e){return this.mat[0]+=e.mat[0],this.mat[1]+=e.mat[1],this.mat[2]+=e.mat[2],this.mat[3]+=e.mat[3],this.mat[4]+=e.mat[4],this.mat[5]+=e.mat[5],this.mat[6]+=e.mat[6],this.mat[7]+=e.mat[7],this.mat[8]+=e.mat[8],this}},{key:"sub",value:function(e){return this.mat[0]-=e.mat[0],this.mat[1]-=e.mat[1],this.mat[2]-=e.mat[2],this.mat[3]-=e.mat[3],this.mat[4]-=e.mat[4],this.mat[5]-=e.mat[5],this.mat[6]-=e.mat[6],this.mat[7]-=e.mat[7],this.mat[8]-=e.mat[8],this}},{key:"scaler",value:function(e){return this.mat[0]*=e,this.mat[1]*=e,this.mat[2]*=e,this.mat[3]*=e,this.mat[4]*=e,this.mat[5]*=e,this.mat[6]*=e,this.mat[7]*=e,this.mat[8]*=e,this}},{key:"invert",value:function(){var e=this.mat[0],t=this.mat[1],r=this.mat[2],n=this.mat[3],i=this.mat[4],o=this.mat[5],s=this.mat[6],a=this.mat[7],l=this.mat[8],u=l*i-o*a,c=-l*n+o*s,d=a*n-i*s,h=e*u+t*c+r*d;return h?(h=1/h,this.mat[0]=u*h,this.mat[1]=(-l*t+r*a)*h,this.mat[2]=(o*t-r*i)*h,this.mat[3]=c*h,this.mat[4]=(l*e-r*s)*h,this.mat[5]=(-o*e+r*n)*h,this.mat[6]=d*h,this.mat[7]=(-a*e+t*s)*h,this.mat[8]=(i*e-t*n)*h,this):this}},{key:"multiply",value:function(e){var t=this.mat[0],r=this.mat[1],n=this.mat[2],i=this.mat[3],o=this.mat[4],s=this.mat[5],a=this.mat[6],l=this.mat[7],u=this.mat[8],c=e.mat[0],d=e.mat[1],h=e.mat[2],f=e.mat[3],p=e.mat[4],m=e.mat[5],y=e.mat[6],b=e.mat[7],v=e.mat[8];return this.mat[0]=c*t+d*i+h*a,this.mat[1]=c*r+d*o+h*l,this.mat[2]=c*n+d*s+h*u,this.mat[3]=f*t+p*i+m*a,this.mat[4]=f*r+p*o+m*l,this.mat[5]=f*n+p*s+m*u,this.mat[6]=y*t+b*i+v*a,this.mat[7]=y*r+b*o+v*l,this.mat[8]=y*n+b*s+v*u,this}},{key:"rotate",value:function(e){var t=this.mat[0],r=this.mat[1],n=this.mat[2],i=this.mat[3],o=this.mat[4],s=this.mat[5],a=Math.sin(e),l=Math.cos(e);return this.mat[0]=l*t+a*i,this.mat[1]=l*r+a*o,this.mat[2]=l*n+a*s,this.mat[3]=l*i-a*t,this.mat[4]=l*o-a*r,this.mat[5]=l*s-a*n,this}},{key:"scale",value:function(e,t){return this.mat[0]=e*this.mat[0],this.mat[1]=e*this.mat[1],this.mat[2]=e*this.mat[2],this.mat[3]=t*this.mat[3],this.mat[4]=t*this.mat[4],this.mat[5]=t*this.mat[5],this}},{key:"translate",value:function(e,t){var r=this.mat[0],n=this.mat[1],i=this.mat[2],o=this.mat[3],s=this.mat[4],a=this.mat[5],l=this.mat[6],u=this.mat[7],c=this.mat[8];return this.mat[6]=e*r+t*o+l,this.mat[7]=e*n+t*s+u,this.mat[8]=e*i+t*a+c,this}},{key:"fromRotation",value:function(e){var t=Math.sin(e),r=Math.cos(e);return this.identity(),this.mat[0]=r,this.mat[1]=-t,this.mat[3]=t,this.mat[4]=r,this}},{key:"fromScale",value:function(e,t){return this.identity(),this.mat[0]=e,this.mat[4]=t,this}},{key:"fromTranslation",value:function(e,t){return this.identity(),this.mat[6]=e,this.mat[7]=t,this}}]),e}();t.Matrix=l},"./lib/foster/util/objectList.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l);Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){(0,a.default)(this,e),this.objects=[],this._count=0,this._iterating=!1,this._moveAfters=[]}return(0,u.default)(e,[{key:"add",value:function(e){return this.objects.push(e),this._count++,this.unsorted=!0,e}},{key:"contains",value:function(e){return null!=e&&this.objects.indexOf(e)>=0}},{key:"first",value:function(){for(var e=null,t=0;t<this.objects.length&&null==e;t++)e=this.objects[t];return e}},{key:"map",value:function(e){for(var t=this.objects.length,r=[],n=0;n<t;++n)r.push(e(this.objects[n]));return r}},{key:"each",value:function(e){var t=this.objects.length;this._iterating=!0;for(var r=0;r<t&&(null==this.objects[r]||!1!==e(this.objects[r]));r++);if(this._iterating=!1,this._moveAfters.length>0){var n=!0,i=!1,s=void 0;try{for(var a,l=this._moveAfters[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,o.default)(a.value,2),c=u[0],d=u[1];this.remove(c)&&this.objects.splice(d,0,c)}}catch(e){i=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}this._moveAfters=[],this.dirty=!0,this.clean()}}},{key:"moveAfter",value:function(e,t){this._iterating?this._moveAfters.push([e,t]):this.remove(e)&&this.objects.splice(t,0,e)}},{key:"at",value:function(e){for(var t=e;t<this.objects.length;t++)if(null!=this.objects[t])return this.objects[t];return null}},{key:"sort",value:function(e){if(this.unsorted){for(var t=0;t<this.objects.length-1;++t)for(var r=t+1;r>0&&null!=this.objects[r-1]&&null!=this.objects[r]&&e(this.objects[r-1],this.objects[r])>0;){var n=this.objects[r-1];this.objects[r-1]=this.objects[r],this.objects[r--]=n}this.unsorted=!1}}},{key:"remove",value:function(e){var t=this.objects.indexOf(e);return t>=0&&(this.objects[t]=null,this._count--,this.dirty=!0,!0)}},{key:"clear",value:function(){for(var e=0;e<this.objects.length;e++)this.objects[e]=null;this._count=0,this.dirty=!0}},{key:"clean",value:function(){if(this.dirty)if(this.count<=0)this.objects=[];else for(var e=this.objects.length-1;e>=0;e--)null==this.objects[e]&&this.objects.splice(e,1)}},{key:"count",get:function(){return this._count}}]),e}();t.ObjectList=c},"./lib/foster/util/rectangle.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/util/vector.ts"),u=new l.Vector,c=function(){function e(t,r,n,i){(0,o.default)(this,e),this.x=t||0,this.y=r||0,this.width=n||1,this.height=i||1}return(0,a.default)(e,[{key:"getCenter",value:function(e){return e.set(this.centerX,this.centerY),e}},{key:"corners",value:function(){return[new l.Vector(this.x,this.y),new l.Vector(this.x+this.width,this.y),new l.Vector(this.x,this.y+this.height),new l.Vector(this.x+this.width,this.y+this.height)]}},{key:"toString",value:function(){return"<Rectangle "+this.x+", "+this.y+", "+this.width+", "+this.height+">"}},{key:"set",value:function(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this}},{key:"containsPoint",value:function(e){return this.x<=e.x&&this.right>e.x&&this.y<=e.y&&this.bottom>e.y}},{key:"overlapsVertically",value:function(e){return e.top>this.top&&e.top<this.bottom||e.bottom>this.top&&e.bottom<this.bottom}},{key:"overlapsHorizontally",value:function(e){return e.left>this.left&&e.left<this.right||e.right>this.left&&e.right<this.right}},{key:"expand",value:function(e,t){this.x-=e/2,this.width+=2*e,this.y-=t/2,this.height+=2*t}},{key:"intersectsRect",value:function(e){var t=u;return this.containsPoint(t.set(e.x,e.y))||this.containsPoint(t.set(e.x+e.width,e.y))||this.containsPoint(t.set(e.x,e.y+e.height))||this.containsPoint(t.set(e.x+e.width,e.y+e.height))}},{key:"cropRect",value:function(e){return e.x<this.x&&(e.width+=e.x-this.x,e.x=this.x),e.y<this.x&&(e.height+=e.y-this.y,e.y=this.y),e.x>this.right&&(e.x=this.right,e.width=0),e.y>this.bottom&&(e.y=this.bottom,e.height=0),e.right>this.right&&(e.width=this.right-e.x),e.bottom>this.bottom&&(e.height=this.bottom-e.y),e}},{key:"crop",value:function(t,r,n,i,o){return void 0===o&&(o=new e),o.set(t,r,n,i),this.cropRect(o),o}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"left",get:function(){return this.x},set:function(e){var t=this.x+this.width;this.x=e,this.width=t-this.x}},{key:"right",get:function(){return this.x+this.width},set:function(e){this.width=e-this.x}},{key:"top",get:function(){return this.y},set:function(e){var t=this.y+this.height;this.y=e,this.height=t-this.y}},{key:"bottom",get:function(){return this.y+this.height},set:function(e){this.height=e-this.y}},{key:"centerX",get:function(){return this.x+this.width/2}},{key:"centerY",get:function(){return this.y+this.height/2}}]),e}();c.temp0=new c,c.temp1=new c,c.temp2=new c,t.Rectangle=c},"./lib/foster/util/shader.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/engine.ts"),u=r("./lib/foster/util/matrix.ts"),c=r("./lib/foster/util/vector.ts"),d=function(){function e(t,r,n,i){(0,o.default)(this,e),this.dirty=!0,this.uniformsByName={},l.Engine.graphics.gl,this.attributes=i,this.uniforms=n,this.setProgramText(t,r)}return(0,a.default)(e,[{key:"setProgramText",value:function(e,t){var r=l.Engine.graphics.gl,n=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error("An error occurred compiling the shaders: "+r.getShaderInfoLog(n));var i=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))throw Error("An error occurred compiling the shaders: "+r.getShaderInfoLog(i));if(this.program&&r.deleteProgram(this.program),this.program=r.createProgram(),r.attachShader(this.program,n),r.attachShader(this.program,i),r.linkProgram(this.program),!r.getProgramParameter(this.program,r.LINK_STATUS))throw Error("Unable to initialize the shader program.");r.deleteShader(n),r.deleteShader(i);var o=!0,s=!1,a=void 0;try{for(var u,c=this.attributes[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d.attribute=r.getAttribLocation(this.program,d.name)}}catch(e){s=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}var f=!0,p=!1,m=void 0;try{for(var y,b=this.uniforms[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var v=y.value;this.uniformsByName[v.name]=v,v.shader=this,v.uniform=r.getUniformLocation(this.program,v.name),v.type===h.sampler2D&&null==this.sampler2d&&(this.sampler2d=v)}}catch(e){p=!0,m=e}finally{try{!f&&b.return&&b.return()}finally{if(p)throw m}}}},{key:"set",value:function(e,t){this.uniformsByName[e].value=t}}]),e}();d._last_uuid=0,t.Shader=d;var h;!function(e){e[e.float=0]="float",e[e.floatArray=1]="floatArray",e[e.float2=2]="float2",e[e.float2Array=3]="float2Array",e[e.float3=4]="float3",e[e.float3Array=5]="float3Array",e[e.float4=6]="float4",e[e.float4Array=7]="float4Array",e[e.matrix2d=8]="matrix2d",e[e.matrix3d=9]="matrix3d",e[e.matrix4d=10]="matrix4d",e[e.int=11]="int",e[e.intArray=12]="intArray",e[e.int2=13]="int2",e[e.int2Array=14]="int2Array",e[e.int3=15]="int3",e[e.int3Array=16]="int3Array",e[e.int4=17]="int4",e[e.int4Array=18]="int4Array",e[e.sampler2D=19]="sampler2D"}(h=t.ShaderUniformType||(t.ShaderUniformType={}));var f=function(){function e(t,r,n){(0,o.default)(this,e),this._value=null,this.name=t,this.type=r,this._value=n}return(0,a.default)(e,[{key:"value",get:function(){return this._value},set:function(e){this.value!=e&&(this._value=e,this._shader.dirty=!0,this.dirty=!0)}},{key:"shader",set:function(e){this._shader=e}}]),e}();t.ShaderUniform=f,function(e){e[e.Position=0]="Position",e[e.Texcoord=1]="Texcoord",e[e.Color=2]="Color"}(t.ShaderAttributeType||(t.ShaderAttributeType={}));var p=function e(t,r){(0,o.default)(this,e),this.name=t,this.type=r};t.ShaderAttribute=p,t.setGLUniformValue={},t.setGLUniformValue[h.float]=function(e,t,r){e.uniform1f(t,r)},t.setGLUniformValue[h.float2]=function(e,t,r){r instanceof c.Vector?e.uniform2f(t,r.x,r.y):e.uniform2f(t,r[0],r[1])},t.setGLUniformValue[h.float3]=function(e,t,r){e.uniform3f(t,r[0],r[1],r[2])},t.setGLUniformValue[h.float4]=function(e,t,r){e.uniform4f(t,r[0],r[1],r[2],r[3])},t.setGLUniformValue[h.floatArray]=function(e,t,r){e.uniform1fv(t,r)},t.setGLUniformValue[h.float2Array]=function(e,t,r){e.uniform2fv(t,r)},t.setGLUniformValue[h.float3Array]=function(e,t,r){e.uniform3fv(t,r)},t.setGLUniformValue[h.float4Array]=function(e,t,r){e.uniform4fv(t,r)},t.setGLUniformValue[h.int]=function(e,t,r){e.uniform1i(t,r)},t.setGLUniformValue[h.int2]=function(e,t,r){r instanceof c.Vector?e.uniform2i(t,Math.round(r.x),Math.round(r.y)):e.uniform2i(t,r[0],r[1])},t.setGLUniformValue[h.int3]=function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},t.setGLUniformValue[h.int4]=function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},t.setGLUniformValue[h.intArray]=function(e,t,r){e.uniform1iv(t,r)},t.setGLUniformValue[h.int2Array]=function(e,t,r){e.uniform2iv(t,r)},t.setGLUniformValue[h.int3Array]=function(e,t,r){e.uniform3iv(t,r)},t.setGLUniformValue[h.int4Array]=function(e,t,r){e.uniform4iv(t,r)},t.setGLUniformValue[h.matrix2d]=function(e,t,r){e.uniformMatrix2fv(t,!1,r)},t.setGLUniformValue[h.matrix3d]=function(e,t,r){r instanceof u.Matrix?e.uniformMatrix3fv(t,!1,r.mat):e.uniformMatrix3fv(t,!1,r)},t.setGLUniformValue[h.matrix4d]=function(e,t,r){e.uniformMatrix2fv(t,!1,r)}},"./lib/foster/util/shaders.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./lib/foster/util/shader.ts"),u=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"init",value:function(){e.texture=new l.Shader("attribute vec2 a_position;attribute vec2 a_texcoord;attribute vec4 a_color;uniform mat3 matrix;varying vec2 v_texcoord;varying vec4 v_color;void main(){\tgl_Position = vec4((matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);\tv_texcoord = a_texcoord;\tv_color = vec4(a_color.rgb * a_color.a, a_color.a);}","precision mediump float;varying vec2 v_texcoord;varying vec4 v_color;uniform sampler2D texture;void main() {\tgl_FragColor = texture2D(texture, v_texcoord) * v_color;}",[new l.ShaderUniform("matrix",l.ShaderUniformType.matrix3d),new l.ShaderUniform("texture",l.ShaderUniformType.sampler2D)],[new l.ShaderAttribute("a_position",l.ShaderAttributeType.Position),new l.ShaderAttribute("a_texcoord",l.ShaderAttributeType.Texcoord),new l.ShaderAttribute("a_color",l.ShaderAttributeType.Color)]),e.solid=new l.Shader("attribute vec2 a_position;attribute vec2 a_texcoord;attribute vec4 a_color;uniform mat3 matrix;varying vec2 v_texcoord;varying vec4 v_color;void main(){\tgl_Position = vec4((matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);\tv_texcoord = a_texcoord;\tv_color = a_color;}","precision mediump float;varying vec2 v_texcoord;varying vec4 v_color;uniform sampler2D texture;void main() {\tgl_FragColor = v_color * texture2D(texture, v_texcoord).a;}",[new l.ShaderUniform("matrix",l.ShaderUniformType.matrix3d),new l.ShaderUniform("texture",l.ShaderUniformType.sampler2D)],[new l.ShaderAttribute("a_position",l.ShaderAttributeType.Position),new l.ShaderAttribute("a_texcoord",l.ShaderAttributeType.Texcoord),new l.ShaderAttribute("a_color",l.ShaderAttributeType.Color)]),e.primitive=new l.Shader("attribute vec2 a_position;attribute vec4 a_color;uniform mat3 matrix;varying vec4 v_color;void main(){\tgl_Position = vec4((matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);\tv_color = a_color;}","precision mediump float;varying vec4 v_color;void main() {\tgl_FragColor = v_color;}",[new l.ShaderUniform("matrix",l.ShaderUniformType.matrix3d)],[new l.ShaderAttribute("a_position",l.ShaderAttributeType.Position),new l.ShaderAttribute("a_color",l.ShaderAttributeType.Color)])}}]),e}();t.Shaders=u},"./lib/foster/util/vector.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(t,r){(0,o.default)(this,e),this.x=0,this.y=0,void 0!==t&&(this.x=t),void 0!==r&&(this.y=r)}return(0,a.default)(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"mult",value:function(e){return"number"==typeof e?(this.x*=e,this.y*=e):(this.x*=e.x,this.y*=e.y),this}},{key:"div",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"rotate",value:function(e,t){var r=this.x,n=this.y;return this.x=r*t-n*e,this.y=r*e+n*t,this}},{key:"transform",value:function(e){var t=this.x,r=this.y;return this.x=e.mat[0]*t+e.mat[3]*r+e.mat[6],this.y=e.mat[1]*t+e.mat[4]*r+e.mat[7],this}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.length;return this.x=this.x/t*e,this.y=this.y/t*e,this}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"angle",get:function(){return Math.atan2(this.y,this.x)}},{key:"normal",get:function(){var t=this.length;return new e(this.x/t,this.y/t)}}],[{key:"zero",get:function(){return e._zero.set(0,0)}}]),e}();l.directions=[new l(-1,0),new l(0,-1),new l(1,0),new l(0,1)],l.temp0=new l,l.temp1=new l,l.temp2=new l,l.temp3=new l,l.temp4=new l,l.temp5=new l,l.up=new l(0,-1),l.down=new l(0,1),l.left=new l(-1,0),l.right=new l(1,0),l._zero=new l,t.Vector=l},"./node_modules/babel-runtime/core-js/array/from.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/get-iterator.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/get-iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/is-iterable.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/is-iterable.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/get-own-property-descriptor.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-prototype-of.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/get-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":function(e,t,r){"use strict";t.__esModule=!0;var n=r("./node_modules/babel-runtime/core-js/object/define-property.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},"./node_modules/babel-runtime/helpers/get.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n(i),s=r("./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js"),a=n(s);t.default=function e(t,r,n){null===t&&(t=Function.prototype);var i=(0,a.default)(t,r);if(void 0===i){var s=(0,o.default)(t);return null===s?void 0:e(s,r,n)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(n):void 0}},"./node_modules/babel-runtime/helpers/inherits.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r("./node_modules/babel-runtime/core-js/object/set-prototype-of.js"),o=n(i),s=r("./node_modules/babel-runtime/core-js/object/create.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/typeof.js"),u=n(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(e,t,r){"use strict";t.__esModule=!0;var n=r("./node_modules/babel-runtime/helpers/typeof.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},"./node_modules/babel-runtime/helpers/slicedToArray.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r("./node_modules/babel-runtime/core-js/is-iterable.js"),o=n(i),s=r("./node_modules/babel-runtime/core-js/get-iterator.js"),a=n(s);t.default=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,l=(0,a.default)(e);!(n=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},"./node_modules/babel-runtime/helpers/toConsumableArray.js":function(e,t,r){"use strict";t.__esModule=!0;var n=r("./node_modules/babel-runtime/core-js/array/from.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}},"./node_modules/babel-runtime/helpers/typeof.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r("./node_modules/babel-runtime/core-js/symbol/iterator.js"),o=n(i),s=r("./node_modules/babel-runtime/core-js/symbol.js"),a=n(s),l="function"==typeof a.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":l(e)}},"./node_modules/babel-runtime/regenerator/index.js":function(e,t,r){e.exports=r("./node_modules/regenerator-runtime/runtime-module.js")},"./node_modules/core-js/library/fn/array/from.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.string.iterator.js"),r("./node_modules/core-js/library/modules/es6.array.from.js"),e.exports=r("./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/get-iterator.js":function(e,t,r){r("./node_modules/core-js/library/modules/web.dom.iterable.js"),r("./node_modules/core-js/library/modules/es6.string.iterator.js"),e.exports=r("./node_modules/core-js/library/modules/core.get-iterator.js")},"./node_modules/core-js/library/fn/is-iterable.js":function(e,t,r){r("./node_modules/core-js/library/modules/web.dom.iterable.js"),r("./node_modules/core-js/library/modules/es6.string.iterator.js"),e.exports=r("./node_modules/core-js/library/modules/core.is-iterable.js")},"./node_modules/core-js/library/fn/object/create.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.create.js");var n=r("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return n.create(e,t)}},"./node_modules/core-js/library/fn/object/define-property.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.define-property.js");var n=r("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"./node_modules/core-js/library/fn/object/get-own-property-descriptor.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js");var n=r("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},"./node_modules/core-js/library/fn/object/get-prototype-of.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.get-prototype-of.js"),e.exports=r("./node_modules/core-js/library/modules/_core.js").Object.getPrototypeOf},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),e.exports=r("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/symbol/index.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.symbol.js"),r("./node_modules/core-js/library/modules/es6.object.to-string.js"),r("./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),r("./node_modules/core-js/library/modules/es7.symbol.observable.js"),e.exports=r("./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.string.iterator.js"),r("./node_modules/core-js/library/modules/web.dom.iterable.js"),e.exports=r("./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":function(e,t){e.exports=function(){}},"./node_modules/core-js/library/modules/_an-object.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_array-includes.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-iobject.js"),i=r("./node_modules/core-js/library/modules/_to-length.js"),o=r("./node_modules/core-js/library/modules/_to-index.js");e.exports=function(e){return function(t,r,s){var a,l=n(t),u=i(l.length),c=o(s,u);if(e&&r!=r){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},"./node_modules/core-js/library/modules/_classof.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_cof.js"),i=r("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},"./node_modules/core-js/library/modules/_cof.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"./node_modules/core-js/library/modules/_core.js":function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},"./node_modules/core-js/library/modules/_create-property.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_object-dp.js"),i=r("./node_modules/core-js/library/modules/_property-desc.js");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},"./node_modules/core-js/library/modules/_ctx.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":function(e,t,r){e.exports=!r("./node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"./node_modules/core-js/library/modules/_dom-create.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js"),i=r("./node_modules/core-js/library/modules/_global.js").document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-keys.js"),i=r("./node_modules/core-js/library/modules/_object-gops.js"),o=r("./node_modules/core-js/library/modules/_object-pie.js");e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),l=o.f,u=0;a.length>u;)l.call(e,s=a[u++])&&t.push(s);return t}},"./node_modules/core-js/library/modules/_export.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_global.js"),i=r("./node_modules/core-js/library/modules/_core.js"),o=r("./node_modules/core-js/library/modules/_ctx.js"),s=r("./node_modules/core-js/library/modules/_hide.js"),a=function(e,t,r){var l,u,c,d=e&a.F,h=e&a.G,f=e&a.S,p=e&a.P,m=e&a.B,y=e&a.W,b=h?i:i[t]||(i[t]={}),v=b.prototype,g=h?n:f?n[t]:(n[t]||{}).prototype;h&&(r=t);for(l in r)(u=!d&&g&&void 0!==g[l])&&l in b||(c=u?g[l]:r[l],b[l]=h&&"function"!=typeof g[l]?r[l]:m&&u?o(c,n):y&&g[l]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((b.virtual||(b.virtual={}))[l]=c,e&a.R&&v&&!v[l]&&s(v,l,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},"./node_modules/core-js/library/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/library/modules/_global.js":function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"./node_modules/core-js/library/modules/_has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"./node_modules/core-js/library/modules/_hide.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-dp.js"),i=r("./node_modules/core-js/library/modules/_property-desc.js");e.exports=r("./node_modules/core-js/library/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},"./node_modules/core-js/library/modules/_html.js":function(e,t,r){e.exports=r("./node_modules/core-js/library/modules/_global.js").document&&document.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":function(e,t,r){e.exports=!r("./node_modules/core-js/library/modules/_descriptors.js")&&!r("./node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty(r("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/library/modules/_iobject.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"./node_modules/core-js/library/modules/_is-array-iter.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_iterators.js"),i=r("./node_modules/core-js/library/modules/_wks.js")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},"./node_modules/core-js/library/modules/_is-array.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"./node_modules/core-js/library/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/library/modules/_iter-call.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},"./node_modules/core-js/library/modules/_iter-create.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_object-create.js"),i=r("./node_modules/core-js/library/modules/_property-desc.js"),o=r("./node_modules/core-js/library/modules/_set-to-string-tag.js"),s={};r("./node_modules/core-js/library/modules/_hide.js")(s,r("./node_modules/core-js/library/modules/_wks.js")("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_library.js"),i=r("./node_modules/core-js/library/modules/_export.js"),o=r("./node_modules/core-js/library/modules/_redefine.js"),s=r("./node_modules/core-js/library/modules/_hide.js"),a=r("./node_modules/core-js/library/modules/_has.js"),l=r("./node_modules/core-js/library/modules/_iterators.js"),u=r("./node_modules/core-js/library/modules/_iter-create.js"),c=r("./node_modules/core-js/library/modules/_set-to-string-tag.js"),d=r("./node_modules/core-js/library/modules/_object-gpo.js"),h=r("./node_modules/core-js/library/modules/_wks.js")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,m,y,b,v){u(r,t,m);var g,_,j,x=function(e){if(!f&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",k="values"==y,C=!1,O=e.prototype,S=O[h]||O["@@iterator"]||y&&O[y],T=S||x(y),E=y?k?x("entries"):T:void 0,P="Array"==t?O.entries||S:S;if(P&&(j=d(P.call(new e)))!==Object.prototype&&(c(j,w,!0),n||a(j,h)||s(j,h,p)),k&&S&&"values"!==S.name&&(C=!0,T=function(){return S.call(this)}),n&&!v||!f&&!C&&O[h]||s(O,h,T),l[t]=T,l[w]=p,y)if(g={values:k?T:x("values"),keys:b?T:x("keys"),entries:E},v)for(_ in g)_ in O||o(O,_,g[_]);else i(i.P+i.F*(f||C),t,g);return g}},"./node_modules/core-js/library/modules/_iter-detect.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_wks.js")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},e(o)}catch(e){}return r}},"./node_modules/core-js/library/modules/_iter-step.js":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":function(e,t){e.exports={}},"./node_modules/core-js/library/modules/_keyof.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-keys.js"),i=r("./node_modules/core-js/library/modules/_to-iobject.js");e.exports=function(e,t){for(var r,o=i(e),s=n(o),a=s.length,l=0;a>l;)if(o[r=s[l++]]===t)return r}},"./node_modules/core-js/library/modules/_library.js":function(e,t){e.exports=!0},"./node_modules/core-js/library/modules/_meta.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_uid.js")("meta"),i=r("./node_modules/core-js/library/modules/_is-object.js"),o=r("./node_modules/core-js/library/modules/_has.js"),s=r("./node_modules/core-js/library/modules/_object-dp.js").f,a=0,l=Object.isExtensible||function(){return!0},u=!r("./node_modules/core-js/library/modules/_fails.js")(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},h=function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},f=function(e){return u&&p.NEED&&l(e)&&!o(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},"./node_modules/core-js/library/modules/_object-create.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_an-object.js"),i=r("./node_modules/core-js/library/modules/_object-dps.js"),o=r("./node_modules/core-js/library/modules/_enum-bug-keys.js"),s=r("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),a=function(){},l=function(){var e,t=r("./node_modules/core-js/library/modules/_dom-create.js")("iframe"),n=o.length;for(t.style.display="none",r("./node_modules/core-js/library/modules/_html.js").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=l(),void 0===t?r:i(r,t)}},"./node_modules/core-js/library/modules/_object-dp.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_an-object.js"),i=r("./node_modules/core-js/library/modules/_ie8-dom-define.js"),o=r("./node_modules/core-js/library/modules/_to-primitive.js"),s=Object.defineProperty;t.f=r("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},"./node_modules/core-js/library/modules/_object-dps.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-dp.js"),i=r("./node_modules/core-js/library/modules/_an-object.js"),o=r("./node_modules/core-js/library/modules/_object-keys.js");e.exports=r("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,l=0;a>l;)n.f(e,r=s[l++],t[r]);return e}},"./node_modules/core-js/library/modules/_object-gopd.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-pie.js"),i=r("./node_modules/core-js/library/modules/_property-desc.js"),o=r("./node_modules/core-js/library/modules/_to-iobject.js"),s=r("./node_modules/core-js/library/modules/_to-primitive.js"),a=r("./node_modules/core-js/library/modules/_has.js"),l=r("./node_modules/core-js/library/modules/_ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=r("./node_modules/core-js/library/modules/_descriptors.js")?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-iobject.js"),i=r("./node_modules/core-js/library/modules/_object-gopn.js").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(n(e))}},"./node_modules/core-js/library/modules/_object-gopn.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r("./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_has.js"),i=r("./node_modules/core-js/library/modules/_to-object.js"),o=r("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_has.js"),i=r("./node_modules/core-js/library/modules/_to-iobject.js"),o=r("./node_modules/core-js/library/modules/_array-includes.js")(!1),s=r("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var r,a=i(e),l=0,u=[];for(r in a)r!=s&&n(a,r)&&u.push(r);for(;t.length>l;)n(a,r=t[l++])&&(~o(u,r)||u.push(r));return u}},"./node_modules/core-js/library/modules/_object-keys.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r("./node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_export.js"),i=r("./node_modules/core-js/library/modules/_core.js"),o=r("./node_modules/core-js/library/modules/_fails.js");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},"./node_modules/core-js/library/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/library/modules/_redefine.js":function(e,t,r){e.exports=r("./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-proto.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js"),i=r("./node_modules/core-js/library/modules/_an-object.js"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("./node_modules/core-js/library/modules/_ctx.js")(Function.call,r("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-dp.js").f,i=r("./node_modules/core-js/library/modules/_has.js"),o=r("./node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},"./node_modules/core-js/library/modules/_shared-key.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_shared.js")("keys"),i=r("./node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return n[e]||(n[e]=i(e))}},"./node_modules/core-js/library/modules/_shared.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_global.js"),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},"./node_modules/core-js/library/modules/_string-at.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-integer.js"),i=r("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(t,r){var o,s,a=i(t)+"",l=n(r),u=a.length;return l<0||l>=u?e?"":void 0:(o=a.charCodeAt(l),o<55296||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):s-56320+(o-55296<<10)+65536)}}},"./node_modules/core-js/library/modules/_to-index.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-integer.js"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},"./node_modules/core-js/library/modules/_to-integer.js":function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"./node_modules/core-js/library/modules/_to-iobject.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_iobject.js"),i=r("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return n(i(e))}},"./node_modules/core-js/library/modules/_to-length.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(n(e))}},"./node_modules/core-js/library/modules/_to-primitive.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},"./node_modules/core-js/library/modules/_wks-define.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_global.js"),i=r("./node_modules/core-js/library/modules/_core.js"),o=r("./node_modules/core-js/library/modules/_library.js"),s=r("./node_modules/core-js/library/modules/_wks-ext.js"),a=r("./node_modules/core-js/library/modules/_object-dp.js").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},"./node_modules/core-js/library/modules/_wks-ext.js":function(e,t,r){t.f=r("./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_shared.js")("wks"),i=r("./node_modules/core-js/library/modules/_uid.js"),o=r("./node_modules/core-js/library/modules/_global.js").Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},"./node_modules/core-js/library/modules/core.get-iterator-method.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_classof.js"),i=r("./node_modules/core-js/library/modules/_wks.js")("iterator"),o=r("./node_modules/core-js/library/modules/_iterators.js");e.exports=r("./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},"./node_modules/core-js/library/modules/core.get-iterator.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_an-object.js"),i=r("./node_modules/core-js/library/modules/core.get-iterator-method.js");e.exports=r("./node_modules/core-js/library/modules/_core.js").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"./node_modules/core-js/library/modules/core.is-iterable.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_classof.js"),i=r("./node_modules/core-js/library/modules/_wks.js")("iterator"),o=r("./node_modules/core-js/library/modules/_iterators.js");e.exports=r("./node_modules/core-js/library/modules/_core.js").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},"./node_modules/core-js/library/modules/es6.array.from.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_ctx.js"),i=r("./node_modules/core-js/library/modules/_export.js"),o=r("./node_modules/core-js/library/modules/_to-object.js"),s=r("./node_modules/core-js/library/modules/_iter-call.js"),a=r("./node_modules/core-js/library/modules/_is-array-iter.js"),l=r("./node_modules/core-js/library/modules/_to-length.js"),u=r("./node_modules/core-js/library/modules/_create-property.js"),c=r("./node_modules/core-js/library/modules/core.get-iterator-method.js");i(i.S+i.F*!r("./node_modules/core-js/library/modules/_iter-detect.js")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,d,h=o(e),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,y=void 0!==m,b=0,v=c(h);if(y&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==v||f==Array&&a(v))for(t=l(h.length),r=new f(t);t>b;b++)u(r,b,y?m(h[b],b):h[b]);else for(d=v.call(h),r=new f;!(i=d.next()).done;b++)u(r,b,y?s(d,m,[i.value,b],!0):i.value);return r.length=b,r}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_add-to-unscopables.js"),i=r("./node_modules/core-js/library/modules/_iter-step.js"),o=r("./node_modules/core-js/library/modules/_iterators.js"),s=r("./node_modules/core-js/library/modules/_to-iobject.js");e.exports=r("./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},"./node_modules/core-js/library/modules/es6.object.create.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{create:r("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_export.js");n(n.S+n.F*!r("./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:r("./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-iobject.js"),i=r("./node_modules/core-js/library/modules/_object-gopd.js").f;r("./node_modules/core-js/library/modules/_object-sap.js")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},"./node_modules/core-js/library/modules/es6.object.get-prototype-of.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_to-object.js"),i=r("./node_modules/core-js/library/modules/_object-gpo.js");r("./node_modules/core-js/library/modules/_object-sap.js")("getPrototypeOf",function(){return function(e){return i(n(e))}})},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{setPrototypeOf:r("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":function(e,t){},"./node_modules/core-js/library/modules/es6.string.iterator.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_string-at.js")(!0);r("./node_modules/core-js/library/modules/_iter-define.js")(String,"String",function(e){this._t=e+"",this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},"./node_modules/core-js/library/modules/es6.symbol.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/library/modules/_global.js"),i=r("./node_modules/core-js/library/modules/_has.js"),o=r("./node_modules/core-js/library/modules/_descriptors.js"),s=r("./node_modules/core-js/library/modules/_export.js"),a=r("./node_modules/core-js/library/modules/_redefine.js"),l=r("./node_modules/core-js/library/modules/_meta.js").KEY,u=r("./node_modules/core-js/library/modules/_fails.js"),c=r("./node_modules/core-js/library/modules/_shared.js"),d=r("./node_modules/core-js/library/modules/_set-to-string-tag.js"),h=r("./node_modules/core-js/library/modules/_uid.js"),f=r("./node_modules/core-js/library/modules/_wks.js"),p=r("./node_modules/core-js/library/modules/_wks-ext.js"),m=r("./node_modules/core-js/library/modules/_wks-define.js"),y=r("./node_modules/core-js/library/modules/_keyof.js"),b=r("./node_modules/core-js/library/modules/_enum-keys.js"),v=r("./node_modules/core-js/library/modules/_is-array.js"),g=r("./node_modules/core-js/library/modules/_an-object.js"),_=r("./node_modules/core-js/library/modules/_to-iobject.js"),j=r("./node_modules/core-js/library/modules/_to-primitive.js"),x=r("./node_modules/core-js/library/modules/_property-desc.js"),w=r("./node_modules/core-js/library/modules/_object-create.js"),k=r("./node_modules/core-js/library/modules/_object-gopn-ext.js"),C=r("./node_modules/core-js/library/modules/_object-gopd.js"),O=r("./node_modules/core-js/library/modules/_object-dp.js"),S=r("./node_modules/core-js/library/modules/_object-keys.js"),T=C.f,E=O.f,P=k.f,R=n.Symbol,M=n.JSON,A=M&&M.stringify,L=f("_hidden"),F=f("toPrimitive"),B={}.propertyIsEnumerable,D=c("symbol-registry"),G=c("symbols"),U=c("op-symbols"),N=Object.prototype,I="function"==typeof R,V=n.QObject,X=!V||!V.prototype||!V.prototype.findChild,Y=o&&u(function(){return 7!=w(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=T(N,t);n&&delete N[t],E(e,t,r),n&&e!==N&&E(N,t,n)}:E,H=function(e){var t=G[e]=w(R.prototype);return t._k=e,t},W=I&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},z=function(e,t,r){return e===N&&z(U,t,r),g(e),t=j(t,!0),g(r),i(G,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=w(r,{enumerable:x(0,!1)})):(i(e,L)||E(e,L,x(1,{})),e[L][t]=!0),Y(e,t,r)):E(e,t,r)},K=function(e,t){g(e);for(var r,n=b(t=_(t)),i=0,o=n.length;o>i;)z(e,r=n[i++],t[r]);return e},q=function(e,t){return void 0===t?w(e):K(w(e),t)},J=function(e){var t=B.call(this,e=j(e,!0));return!(this===N&&i(G,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(G,e)||i(this,L)&&this[L][e])||t)},$=function(e,t){if(e=_(e),t=j(t,!0),e!==N||!i(G,t)||i(U,t)){var r=T(e,t);return!r||!i(G,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=P(_(e)),n=[],o=0;r.length>o;)i(G,t=r[o++])||t==L||t==l||n.push(t);return n},Z=function(e){for(var t,r=e===N,n=P(r?U:_(e)),o=[],s=0;n.length>s;)!i(G,t=n[s++])||r&&!i(N,t)||o.push(G[t]);return o};I||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===N&&t.call(U,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),Y(this,e,x(1,r))};return o&&X&&Y(N,e,{configurable:!0,set:t}),H(e)},a(R.prototype,"toString",function(){return this._k}),C.f=$,O.f=z,r("./node_modules/core-js/library/modules/_object-gopn.js").f=k.f=Q,r("./node_modules/core-js/library/modules/_object-pie.js").f=J,r("./node_modules/core-js/library/modules/_object-gops.js").f=Z,o&&!r("./node_modules/core-js/library/modules/_library.js")&&a(N,"propertyIsEnumerable",J,!0),p.f=function(e){return H(f(e))}),s(s.G+s.W+s.F*!I,{Symbol:R});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ee=S(f.store),te=0;ee.length>te;)m(ee[te++]);s(s.S+s.F*!I,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=R(e)},keyFor:function(e){if(W(e))return y(D,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){X=!0},useSimple:function(){X=!1}}),s(s.S+s.F*!I,"Object",{create:q,defineProperty:z,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),M&&s(s.S+s.F*(!I||u(function(){var e=R();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,A.apply(M,n)}}}),R.prototype[F]||r("./node_modules/core-js/library/modules/_hide.js")(R.prototype,F,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":function(e,t,r){r("./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":function(e,t,r){r("./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.array.iterator.js");for(var n=r("./node_modules/core-js/library/modules/_global.js"),i=r("./node_modules/core-js/library/modules/_hide.js"),o=r("./node_modules/core-js/library/modules/_iterators.js"),s=r("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=a[l],c=n[u],d=c&&c.prototype;d&&!d[s]&&i(d,s,u),o[u]=o.Array}},"./node_modules/css-loader/index.js!./public_dev/tree-editor.css":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"\r\n.json-editor {\r\n\twidth: 400px;\r\n\tposition: absolute;\r\n\tright: 0;\r\n\ttop: 10px;\r\n\tbackground: white;\r\n\tfont-family: Consolas;\r\n\tfont-size: 10px;\r\n}",""])},"./node_modules/css-loader/lib/css-base.js":function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=n(i);return[r].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([o]).join("\n")}return""+r}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),t.push(s))}},t}},"./node_modules/electron/index.js":function(e,t,r){(function(t){var n=r("./node_modules/node-libs-browser/mock/empty.js"),i=r("./node_modules/path-browserify/index.js"),o=i.join(t,"path.txt");if(!n.existsSync(o))throw Error("Electron failed to install correctly, please delete node_modules/electron and try installing again");e.exports=i.join(t,n.readFileSync(o,"utf-8"))}).call(t,"/")},"./node_modules/node-libs-browser/mock/empty.js":function(e,t){},"./node_modules/path-browserify/index.js":function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===s(e,-1);return e=r(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}for(var u=[],l=a;l<i.length;l++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(e,t){function r(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):y=-1,p.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=p.length;t;){for(f=p,p=[];++y<t;)f&&f[y].run();y=-1,t=p.length}f=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var f,p=[],m=!1,y=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new l(e,t)),1!==p.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw Error("process.chdir is not supported")},h.umask=function(){return 0}},"./node_modules/reflect-metadata/Reflect.js":function(e,t,r){(function(e,t){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r;!function(r){"use strict";function n(e,t,r,n){if(k(r)){if(!A(e))throw new TypeError;if(!F(t))throw new TypeError;return f(e,t)}if(!A(e))throw new TypeError;if(!S(t))throw new TypeError;if(!S(n)&&!k(n)&&!C(n))throw new TypeError;return C(n)&&(n=void 0),r=M(r),p(e,t,r,n)}function i(e,t){function r(r,n){if(!S(r))throw new TypeError;if(!k(n)&&!B(n))throw new TypeError;_(e,t,r,n)}return r}function o(e,t,r,n){if(!S(r))throw new TypeError;return k(n)||(n=M(n)),_(e,t,r,n)}function s(e,t,r){if(!S(t))throw new TypeError;return k(r)||(r=M(r)),y(e,t,r)}function a(e,t,r){if(!S(t))throw new TypeError;return k(r)||(r=M(r)),b(e,t,r)}function l(e,t,r){if(!S(t))throw new TypeError;return k(r)||(r=M(r)),v(e,t,r)}function u(e,t,r){if(!S(t))throw new TypeError;return k(r)||(r=M(r)),g(e,t,r)}function c(e,t){if(!S(e))throw new TypeError;return k(t)||(t=M(t)),j(e,t)}function d(e,t){if(!S(e))throw new TypeError;return k(t)||(t=M(t)),x(e,t)}function h(e,t,r){if(!S(t))throw new TypeError;k(r)||(r=M(r));var n=m(t,r,!1);if(k(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=ee.get(t);return i.delete(r),i.size>0||(ee.delete(t),!0)}function f(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r],i=n(t);if(!k(i)&&!C(i)){if(!F(i))throw new TypeError;t=i}}return t}function p(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=e[i],s=o(t,r,n);if(!k(s)&&!C(s)){if(!S(s))throw new TypeError;n=s}}return n}function m(e,t,r){var n=ee.get(e);if(k(n)){if(!r)return;n=new $,ee.set(e,n)}var i=n.get(t);if(k(i)){if(!r)return;i=new $,n.set(t,i)}return i}function y(e,t,r){if(b(e,t,r))return!0;var n=V(t);return!C(n)&&y(e,n,r)}function b(e,t,r){var n=m(t,r,!1);return!k(n)&&P(n.has(e))}function v(e,t,r){if(b(e,t,r))return g(e,t,r);var n=V(t);return C(n)?void 0:v(e,n,r)}function g(e,t,r){var n=m(t,r,!1);if(!k(n))return n.get(e)}function _(e,t,r,n){m(r,n,!0).set(e,t)}function j(e,t){var r=x(e,t),n=V(e);if(null===n)return r;var i=j(n,t);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new Q,s=[],a=0,l=r;a<l.length;a++){var u=l[a],c=o.has(u);c||(o.add(u),s.push(u))}for(var d=0,h=i;d<h.length;d++){var u=h[d],c=o.has(u);c||(o.add(u),s.push(u))}return s}function x(e,t){var r=[],n=m(e,t,!1);if(k(n))return r;for(var i=n.keys(),o=G(i),s=0;;){var a=N(o);if(!a)return r.length=s,r;var l=U(a);try{r[s]=l}catch(e){try{I(o)}finally{throw e}}s++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function k(e){return void 0===e}function C(e){return null===e}function O(e){return"symbol"==typeof e}function S(e){return"object"==typeof e?null!==e:"function"==typeof e}function T(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",n=D(e,z);if(void 0!==n){var i=n.call(e,r);if(S(i))throw new TypeError;return i}return E(e,"default"===r?"number":r)}function E(e,t){if("string"===t){var r=e.toString;if(L(r)){var n=r.call(e);if(!S(n))return n}var i=e.valueOf;if(L(i)){var n=i.call(e);if(!S(n))return n}}else{var i=e.valueOf;if(L(i)){var n=i.call(e);if(!S(n))return n}var o=e.toString;if(L(o)){var n=o.call(e);if(!S(n))return n}}throw new TypeError}function P(e){return!!e}function R(e){return""+e}function M(e){var t=T(e,3);return O(t)?t:R(t)}function A(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function L(e){return"function"==typeof e}function F(e){return"function"==typeof e}function B(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}function D(e,t){var r=e[t];if(void 0!==r&&null!==r){if(!L(r))throw new TypeError;return r}}function G(e){var t=D(e,K);if(!L(t))throw new TypeError;var r=t.call(e);if(!S(r))throw new TypeError;return r}function U(e){return e.value}function N(e){var t=e.next();return!t.done&&t}function I(e){var t=e.return;t&&t.call(e)}function V(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===q)return t;if(t!==q)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i?t:i===e?t:i}function X(e){return e.__=void 0,delete e.__,e}var Y,H=Object.prototype.hasOwnProperty,W="function"==typeof Symbol,z=W&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",K=W&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator";!function(e){var t="function"==typeof Object.create,r={__proto__:[]}instanceof Array,n=!t&&!r;e.create=t?function(){return X(Object.create(null))}:r?function(){return X({__proto__:null})}:function(){return X({})},e.has=n?function(e,t){return H.call(e,t)}:function(e,t){return t in e},e.get=n?function(e,t){return H.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}}(Y||(Y={}));var q=Object.getPrototypeOf(Function),J="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,$=J||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){function e(e,t){return e}function t(e,t){return t}function r(e,t){return[e,t]}var n={},i=[],o=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[K]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var t=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:t,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:e,done:!0}},e}();return function(){function i(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._find(e,!1)>=0},i.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},i.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},i.prototype.delete=function(e){var t=this._find(e,!1);if(t>=0){for(var r=this._keys.length,i=t+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},i.prototype.keys=function(){return new o(this._keys,this._values,e)},i.prototype.values=function(){return new o(this._keys,this._values,t)},i.prototype.entries=function(){return new o(this._keys,this._values,r)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[K]=function(){return this.entries()},i.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},i}()}():Map,Q=J||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){return function(){function e(){this._map=new $}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[K]=function(){return this.keys()},e}()}():Set,Z=J||"function"!=typeof WeakMap?function(){function e(){var e;do{e="@@WeakMap@@"+i()}while(Y.has(s,e));return s[e]=!0,e}function t(e,t){if(!H.call(e,a)){if(!t)return;Object.defineProperty(e,a,{value:Y.create()})}return e[a]}function r(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function n(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):r(new Uint8Array(e),e):r(Array(e),e)}function i(){var e=n(o);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<o;++r){var i=e[r];4!==r&&6!==r&&8!==r||(t+="-"),i<16&&(t+="0"),t+=i.toString(16).toLowerCase()}return t}var o=16,s=Y.create(),a=e();return function(){function r(){this._key=e()}return r.prototype.has=function(e){var r=t(e,!1);return void 0!==r&&Y.has(r,this._key)},r.prototype.get=function(e){var r=t(e,!1);return void 0!==r?Y.get(r,this._key):void 0},r.prototype.set=function(e,r){return t(e,!0)[this._key]=r,this},r.prototype.delete=function(e){var r=t(e,!1);return void 0!==r&&delete r[this._key]},r.prototype.clear=function(){this._key=e()},r}()}():WeakMap,ee=new Z;r.decorate=n,r.metadata=i,r.defineMetadata=o,r.hasMetadata=s,r.hasOwnMetadata=a,r.getMetadata=l,r.getOwnMetadata=u,r.getMetadataKeys=c,r.getOwnMetadataKeys=d,r.deleteMetadata=h,function(e){if(void 0!==e.Reflect){if(e.Reflect!==r)for(var t in r)H.call(r,t)&&(e.Reflect[t]=r[t])}else e.Reflect=r}(void 0!==t?t:"undefined"!=typeof self?self:Function("return this;")())}(r||(r={}))}).call(t,r("./node_modules/process/browser.js"),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/regenerator-runtime/runtime-module.js":function(e,t,r){(function(t){var n="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r("./node_modules/regenerator-runtime/runtime.js"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/regenerator-runtime/runtime.js":function(e,t,r){(function(t){!function(t){"use strict";function r(e,t,r,n){var o=t&&t.prototype instanceof i?t:i,s=Object.create(o.prototype),a=new f(n||[]);return s._invoke=u(e,r,a),s}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function s(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function r(t,i,o,s){var a=n(e[t],e,i);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&v.call(u,"__await")?Promise.resolve(u.__await).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},s)}s(a.arg)}function i(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return o=o?o.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var o;this._invoke=i}function u(e,t,r){var i=C;return function(o,s){if(i===S)throw Error("Generator is already running");if(i===T){if("throw"===o)throw s;return m()}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var l=c(a,r);if(l){if(l===E)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===C)throw i=T,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=S;var u=n(e,t,r);if("normal"===u.type){if(i=r.done?T:O,u.arg===E)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=T,r.method="throw",r.arg=u.arg)}}}function c(e,t){var r=e.iterator[t.method];if(r===y){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=y,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function p(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=y,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:y,done:!0}}var y,b=Object.prototype,v=b.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},_=g.iterator||"@@iterator",j=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag",w="object"==typeof e,k=t.regeneratorRuntime;if(k)return void(w&&(e.exports=k));k=t.regeneratorRuntime=w?e.exports:{},k.wrap=r;var C="suspendedStart",O="suspendedYield",S="executing",T="completed",E={},P={};P[_]=function(){return this};var R=Object.getPrototypeOf,M=R&&R(R(p([])));M&&M!==b&&v.call(M,_)&&(P=M);var A=s.prototype=i.prototype=Object.create(P);o.prototype=A.constructor=s,s.constructor=o,s[x]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(A),e},k.awrap=function(e){return{__await:e}},a(l.prototype),l.prototype[j]=function(){return this},k.AsyncIterator=l,k.async=function(e,t,n,i){var o=new l(r(e,t,n,i));return k.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(A),A[x]="Generator",A[_]=function(){return this},A.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=y),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=v.call(i,"catchLoc"),a=v.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=y),E}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/style-loader/lib/addStyles.js":function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=p[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(c(n.parts[o],t))}else{for(var s=[],o=0;o<n.parts.length;o++)s.push(c(n.parts[o],t));p[n.id]={id:n.id,refs:1,parts:s}}}}function i(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a=o[1],l=o[2],u=o[3],c={css:a,media:l,sourceMap:u};n[s]?n[s].parts.push(c):r.push(n[s]={id:s,parts:[c]})}return r}function o(e,t){var r=y(e.insertInto);if(!r)throw Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=g[g.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function s(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),o(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),o(e,t),t}function u(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function c(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var u=v++;r=b||(b=a(t)),n=d.bind(null,r,u,!1),i=d.bind(null,r,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=l(t),n=f.bind(null,r,t),i=function(){s(r),r.href&&URL.revokeObjectURL(r.href)}):(r=a(t),n=h.bind(null,r),i=function(){s(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function d(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=j(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function h(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function f(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=_(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var p={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}(function(e){return document.querySelector(e)}),b=null,v=0,g=[],_=r("./node_modules/style-loader/lib/urls.js");e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=i(e,t);return n(r,t),function(e){for(var o=[],s=0;s<r.length;s++){var a=r[s],l=p[a.id];l.refs--,o.push(l)}e&&n(i(e,t),t);for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var j=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},"./node_modules/style-loader/lib/urls.js":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./public_dev/tree-editor.css":function(e,t,r){var n=r("./node_modules/css-loader/index.js!./public_dev/tree-editor.css");"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0,r("./node_modules/style-loader/lib/addStyles.js")(n,i),n.locals&&(e.exports=n.locals)},"./src/game/autocomponent.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/index.ts"),AutoComponent=function(e){function AutoComponent(e){(0,o.default)(this,AutoComponent);var t=(0,u.default)(this,(AutoComponent.__proto__||Object.getPrototypeOf(AutoComponent)).call(this));return t.opts=e,t}return(0,d.default)(AutoComponent,e),(0,a.default)(AutoComponent,[{key:"removeSelf",value:function(){this.entity.remove(this)}},{key:"destroyParentEntity",value:function(){this.entity.scene.remove(this.entity)}},{key:"level",get:function(){return this.scene}}]),AutoComponent}(h.Component);t.AutoComponent=AutoComponent},"./src/game/autosprite.ts":function(e,t,r){"use strict";function n(){var e={},t=!0,r=!1,n=void 0;try{for(var i,l=Object.entries(s.Assets.atlases)[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var u=(0,o.default)(i.value,2),c=u[0],d=u[1],h=c.split("_");if(!(h.length<2)){var f=(0,o.default)(h,2),p=f[0];f[1],(e[p]||(e[p]=[])).push(d)}}}catch(e){r=!0,n=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw n}}var m=!0,y=!1,b=void 0;try{for(var v,g=Object.entries(e)[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var _=(0,o.default)(v.value,2),p=_[0],j=_[1],x=a.SpriteBank.create(p),w=!0,k=!1,C=void 0;try{for(var O,S=j[Symbol.iterator]();!(w=(O=S.next()).done);w=!0){var d=O.value,c=d.name,T=c.slice(p.length+1),E=[],P=!0,R=!1,M=void 0;try{for(var A,L=Object.entries(d.subtextures)[Symbol.iterator]();!(P=(A=L.next()).done);P=!0){var F=(0,o.default)(A.value,2),B=(F[0],F[1]);E.push(B)}}catch(e){R=!0,M=e}finally{try{!P&&L.return&&L.return()}finally{if(R)throw M}}var D=E[0].metadata.loops;x.add(T,10,E,D)}}catch(e){k=!0,C=e}finally{try{!w&&S.return&&S.return()}finally{if(k)throw C}}}}catch(e){y=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(y)throw b}}}var i=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0});var s=r("./lib/foster/assets/index.ts"),a=r("./lib/foster/assets/animations/index.ts");t.loadAutoSprites=n},"./src/game/clouds.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/index.ts"),f=r("./lib/foster/assets/index.ts"),p=r("./lib/foster/components/sprites/index.ts"),m=function(e){function t(e,r){(0,o.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.add(n.sprite=new p.Graphic(f.Assets.atlases.gfx.get("clouds "+e))),n.sprite.origin.set(n.sprite.width/2,n.sprite.height/2),n.depth=r,n.timerY=Math.random()*Math.PI*2,n.timerX=Math.random()*Math.PI*2,n}return(0,d.default)(t,e),(0,a.default)(t,[{key:"update",value:function(){this.timerY+=h.Engine.delta,this.timerX+=h.Engine.delta,this.sprite.x=4*Math.sin(2*this.timerX),this.sprite.y=2*Math.sin(this.timerY)}}]),t}(h.Entity);t.Clouds=m},"./src/game/components/autotween.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./src/game/autocomponent.ts"),b=r("./lib/foster/components/index.ts"),v=r("./lib/foster/util/index.ts"),g=r("./lib/foster/components/sprites/index.ts"),AutoTween=function(e){function AutoTween(){return(0,o.default)(this,AutoTween),(0,u.default)(this,(AutoTween.__proto__||Object.getPrototypeOf(AutoTween)).apply(this,arguments))}return(0,f.default)(AutoTween,e),(0,a.default)(AutoTween,[{key:"addedToScene",value:function(){var e=this;(0,d.default)(AutoTween.prototype.__proto__||Object.getPrototypeOf(AutoTween.prototype),"addedToScene",this).call(this);var t=v.Ease[this.opts.ease||"linear"],r=void 0;if("scale"!==this.opts.mode)throw Error("unimplemented "+this.opts.mode);var n=this.entity.find(g.Sprite);r=function(e){n.scale.set(e,e)};var i=void 0!==this.opts.from?this.opts.from:0,o=void 0!==this.opts.to?this.opts.to:0;r(i),this.activeTween=b.Tween.create(this.entity).start(this.opts.duration,i,o,t,r).setOnComplete(function(){e.activeTween=null}).restart()}}]),AutoTween}(y.AutoComponent);AutoTween=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([y.AutoComponent.register],AutoTween),t.AutoTween=AutoTween},"./src/game/components/awareness.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r,n,i,o,s,a,u;return l.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=t.scenePosition,n=Math.floor((e.sceneLeft-r.x)/t.tileWidth),i=Math.floor((e.sceneTop-r.y)/t.tileHeight),o=Math.ceil((e.sceneRight-r.x)/t.tileWidth),s=Math.ceil((e.sceneBottom-r.y)/t.tileHeight),a=n;case 6:if(!(a<o)){l.next=18;break}u=i;case 8:if(!(u<s)){l.next=15;break}if(!t.has(a,u)){l.next=12;break}return l.next=12,new O.Hitbox({left:a*t.tileWidth+r.x,width:t.tileWidth,top:u*t.tileHeight+r.y,height:t.tileHeight});case 12:u++,l.next=8;break;case 15:a++,l.next=6;break;case 18:case"end":return l.stop()}},w[0],this)}function o(e,t){var r=[],n=!0,o=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;if(u instanceof O.Hitgrid){var c=!0,d=!1,h=void 0;try{for(var f,p=i(e,u)[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;r.push(m)}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}else r.push(u)}}catch(e){o=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}return r}function s(e,t){switch(e){case"left":t.sort(function(e,t){return-C.Calc.cmp(e.sceneRight,t.sceneRight)});break;case"right":t.sort(function(e,t){return C.Calc.cmp(e.sceneLeft,t.sceneLeft)});break;case"up":t.sort(function(e,t){return-C.Calc.cmp(e.sceneBottom,t.sceneBottom)});break;case"down":t.sort(function(e,t){return C.Calc.cmp(e.sceneTop,t.sceneTop)});break;default:throw Error(e)}return t}var a=r("./node_modules/babel-runtime/regenerator/index.js"),l=n(a),u=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),c=n(u),d=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=n(d),f=r("./node_modules/babel-runtime/helpers/createClass.js"),p=n(f),m=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),y=n(m),b=r("./node_modules/babel-runtime/helpers/get.js"),v=n(b),g=r("./node_modules/babel-runtime/helpers/inherits.js"),_=n(g),j=r("./node_modules/babel-runtime/helpers/typeof.js"),x=n(j),w=[i].map(l.default.mark);Object.defineProperty(t,"__esModule",{value:!0});var k=r("./src/game/autocomponent.ts"),C=r("./lib/foster/util/index.ts"),O=r("./lib/foster/components/colliders/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var S=["player","enemy_solid","solid","mimic_orb"],Awareness=function(e){function Awareness(){(0,h.default)(this,Awareness);var e=(0,y.default)(this,(Awareness.__proto__||Object.getPrototypeOf(Awareness)).apply(this,arguments));return e.xrayGroups=[],e.lookingFor="player",e.killing=[],e.wouldKill=!1,e.sightboxes={},e.killboxes={},e}return(0,_.default)(Awareness,e),(0,p.default)(Awareness,[{key:"update",value:function(){var e=this;this.killing.length=0,this.wouldKill=!1;var t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(this.killboxes)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=(0,c.default)(i.value,2),u=l[0],d=l[1],h=s(u,o(d,d.collideAllMulti(S).filter(function(t){return t.entity!==e.entity})));if(h.length>0){var f=h[0];if(f.entity&&-1!==f.entity.groups.indexOf(this.lookingFor)){this.killing.push(f),this.wouldKill=!0;break}var p=!0,m=!1,y=void 0;try{for(var b,v=h[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=b.value;g.entity&&-1!==g.entity.groups.indexOf(this.lookingFor)&&(this.wouldKill=!0)}}catch(e){m=!0,y=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw y}}}}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}this.xrayGroups.length=0;var _=!0,j=!1,x=void 0;try{for(var w,k=Object.entries(this.sightboxes)[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var C=(0,c.default)(w.value,2),u=C[0],d=C[1],O=!0,T=!1,E=void 0;try{for(var P,R=d.collideAllMulti(S)[Symbol.iterator]();!(O=(P=R.next()).done);O=!0){var M=P.value,A=!0,L=!1,F=void 0;try{for(var B,D=M.entity.groups[Symbol.iterator]();!(A=(B=D.next()).done);A=!0){var G=B.value;this.xrayGroups.push(G)}}catch(e){L=!0,F=e}finally{try{!A&&D.return&&D.return()}finally{if(L)throw F}}}}catch(e){T=!0,E=e}finally{try{!O&&R.return&&R.return()}finally{if(T)throw E}}}}catch(e){j=!0,x=e}finally{try{!_&&k.return&&k.return()}finally{if(j)throw x}}}},{key:"addedToScene",value:function(){function e(e,r){e.down=f.add(new O.Hitbox({left:l-r/2+d/2,top:o,width:r,height:t})),e.up=f.add(new O.Hitbox({left:l-r/2+d/2,top:o-t,width:r,height:t})),e.left=f.add(new O.Hitbox({left:i-t,top:a-r/2+h/2,width:t,height:r})),e.right=f.add(new O.Hitbox({left:l,top:a-r/2+h/2,width:t,height:r}))}(0,v.default)(Awareness.prototype.__proto__||Object.getPrototypeOf(Awareness.prototype),"addedToScene",this).call(this),this.mainHitbox=this.entity.find(O.Hitbox);var t=330,r=this.getLookCenter(),n=(0,c.default)(r,2),i=n[0],o=n[1],s=[this.mainHitbox.top,this.mainHitbox.left],a=s[0],l=s[1],u=[this.mainHitbox.width,this.mainHitbox.height],d=u[0],h=u[1],f=this.entity;e(this.sightboxes,34),e(this.killboxes,4)}},{key:"getLookCenter",value:function(){var e=this.mainHitbox;return[e.left+e.width/2,e.top+e.height/2]}}]),Awareness}(k.AutoComponent);Awareness=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,x.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([k.AutoComponent.register],Awareness),t.Awareness=Awareness},"./src/game/components/burst.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return void 0===e?t:e}var o=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=n(o),a=r("./node_modules/babel-runtime/helpers/createClass.js"),l=n(a),u=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),d=r("./node_modules/babel-runtime/helpers/get.js"),h=n(d),f=r("./node_modules/babel-runtime/helpers/inherits.js"),p=n(f),m=r("./node_modules/babel-runtime/helpers/typeof.js"),y=n(m);Object.defineProperty(t,"__esModule",{value:!0});var b=r("./lib/foster/index.ts"),v=r("./src/game/autocomponent.ts"),g=r("./lib/foster/components/particles/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var Burst=function(e){function Burst(){(0,s.default)(this,Burst);var e=(0,c.default)(this,(Burst.__proto__||Object.getPrototypeOf(Burst)).apply(this,arguments));return e.loop=!1,e}return(0,p.default)(Burst,e),(0,l.default)(Burst,[{key:"addedToScene",value:function(){(0,h.default)(Burst.prototype.__proto__||Object.getPrototypeOf(Burst.prototype),"addedToScene",this).call(this),this.pSys=this.entity.find(g.ParticleSystem),this.pSys||(this.pSys=this.entity.add(new g.ParticleSystem(this.opts.template))),this.opts.template&&(this.pSys.template.name,this.opts.template),i(this.opts.autoPlay,!0)&&this.trigger()}},{key:"update",value:function(){if(void 0===this.opts.rate){if(this.pSys.numActiveParticles>0)return;this.loop&&this.pSys.active?this.trigger():i(this.opts.autoRemove,!0)&&this.entity.scene.remove(this.entity)}else this.trigger()}},{key:"trigger",value:function(){var e=this.opts,t=e.x,r=e.y,n=e.direction,i=e.rangeX,o=e.rangeY,s=e.count,a=e.rate;void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0!==a&&(s=a*b.Engine.delta),this.pSys.numActiveParticles<this.maxParticles&&this.pSys.burst(t,r,n,i,o,s)}},{key:"maxParticles",get:function(){return this.opts.maxParticles||400}}]),Burst}(v.AutoComponent);Burst=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,y.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([v.AutoComponent.register],Burst),t.Burst=Burst},"./src/game/components/causesdamage.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/components/index.ts"),b=r("./lib/foster/util/index.ts"),v=r("./lib/foster/components/colliders/index.ts"),g=r("./src/game/game.ts"),_=r("./src/game/prefabs.ts"),j=r("./src/game/components/health.ts"),x=r("./src/game/autocomponent.ts"),CausesDamage=function(e){function CausesDamage(){(0,o.default)(this,CausesDamage);var e=(0,u.default)(this,(CausesDamage.__proto__||Object.getPrototypeOf(CausesDamage)).apply(this,arguments));return e.amount=1,e}return(0,f.default)(CausesDamage,e),(0,a.default)(CausesDamage,[{key:"addedToScene",value:function(){(0,d.default)(CausesDamage.prototype.__proto__||Object.getPrototypeOf(CausesDamage.prototype),"addedToScene",this).call(this),this.hitbox=this.entity.find(v.Hitbox)}},{key:"update",value:function(){var e=this;(0,d.default)(CausesDamage.prototype.__proto__||Object.getPrototypeOf(CausesDamage.prototype),"update",this).call(this);var t=!0,r=!1,n=void 0;try{for(var i,o=this.hitbox.collideAll(g.Game.TAGS.PLAYER)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,a=s.entity.find(j.Health);if(a){if(a.tryApplyDamage(this),this.opts.damageParticles){var l=this.hitbox.getSceneBounds(b.Rectangle.temp0).getCenter(b.Vector.temp0);this.scene.add(_.instantiatePrefab(this.opts.damageParticles,null,l.x,l.y))}this.opts.diesOnCollision&&y.Alarm.create(this.entity).start(.01,function(){e.entity.scene.remove(e.entity),e.active=!1})}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}]),CausesDamage}(x.AutoComponent);CausesDamage=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([x.AutoComponent.register],CausesDamage),t.CausesDamage=CausesDamage},"./src/game/components/childentity.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./lib/foster/util/index.ts"),v=r("./src/game/prefabs.ts"),g=r("./src/game/autocomponent.ts");r("./node_modules/reflect-metadata/Reflect.js");var ChildEntity=function(e){function ChildEntity(){return(0,o.default)(this,ChildEntity),(0,u.default)(this,(ChildEntity.__proto__||Object.getPrototypeOf(ChildEntity)).apply(this,arguments))}return(0,f.default)(ChildEntity,e),(0,a.default)(ChildEntity,[{key:"setActive",value:function(e){(0,d.default)(ChildEntity.prototype.__proto__||Object.getPrototypeOf(ChildEntity.prototype),"setActive",this).call(this,e),this.child.visible=e}},{key:"addedToScene",value:function(){(0,d.default)(ChildEntity.prototype.__proto__||Object.getPrototypeOf(ChildEntity.prototype),"addedToScene",this).call(this),this.child=this.scene.add(this.opts.prefabName?v.instantiatePrefab(this.opts.prefabName):new y.Entity),void 0!==this.opts.name&&(this.child.name=this.opts.name),this.updatePos()}},{key:"update",value:function(){this.updatePos()}},{key:"updatePos",value:function(){this.getScenePosition(this.child.position),this.child.position.add(b.Vector.temp0.set(this.opts.left||0,this.opts.top||0))}},{key:"removedFromScene",value:function(){this.child&&this.scene.remove(this.child),(0,d.default)(ChildEntity.prototype.__proto__||Object.getPrototypeOf(ChildEntity.prototype),"removedFromScene",this).call(this)}}]),ChildEntity}(g.AutoComponent);ChildEntity=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([g.AutoComponent.register],ChildEntity),t.ChildEntity=ChildEntity},"./src/game/components/emitter.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./src/game/prefabs.ts"),v=r("./src/game/components/gameevents.ts"),Emitter=function(e){function Emitter(e){var t=e.prefab,r=void 0===t?"":t,n=e.onEmit;(0,o.default)(this,Emitter);var i=(0,u.default)(this,(Emitter.__proto__||Object.getPrototypeOf(Emitter)).call(this));return i.prefab=r,i.onEmit=new v.EventDelegate(n),i}return(0,f.default)(Emitter,e),(0,a.default)(Emitter,[{key:"addedToScene",value:function(){(0,d.default)(Emitter.prototype.__proto__||Object.getPrototypeOf(Emitter.prototype),"addedToScene",this).call(this),this.onEmit.bind(this.entity)}},{key:"emit",value:function(){if(this.active){var e=this.scenePosition,t=e.x,r=e.y;this.scene.add(b.instantiatePrefab(this.prefab,new y.Entity(t,r))),this.onEmit.invoke()}}}]),Emitter}(y.Component);Emitter=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([y.Component.register,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Emitter),t.Emitter=Emitter},"./src/game/components/exit.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/colliders/index.ts"),_=r("./lib/foster/components/sprites/index.ts"),j=r("./src/game/autocomponent.ts"),x=r("./src/game/game.ts");r("./node_modules/reflect-metadata/Reflect.js");var Exit=function(e){function Exit(){(0,o.default)(this,Exit);var e=(0,u.default)(this,(Exit.__proto__||Object.getPrototypeOf(Exit)).apply(this,arguments));return e.isOpen=!1,e.triggered=!1,e}return(0,f.default)(Exit,e),(0,a.default)(Exit,[{key:"addedToScene",value:function(){(0,d.default)(Exit.prototype.__proto__||Object.getPrototypeOf(Exit.prototype),"addedToScene",this).call(this),this.sprite.play("closed")}},{key:"update",value:function(){this.isOpen||0!==this.scene.allCollidersInTag("treasure").length?!this.triggered&&this.isOpen&&this.hitbox.check(x.Game.TAGS.PLAYER)&&(this.triggered=!0,this.level&&this.level.nextLevel()):(this.isOpen=!0,this.sprite.play("open"),this.hitbox.untag(x.Game.TAGS.SOLID))}}]),Exit}(j.AutoComponent);y([v.Component.require,b("design:type",_.Sprite)],Exit.prototype,"sprite",void 0),y([v.Component.require,b("design:type",g.Hitbox)],Exit.prototype,"hitbox",void 0),Exit=y([j.AutoComponent.register],Exit),t.Exit=Exit},"./src/game/components/facing.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h),p=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var m=r("./src/game/autocomponent.ts"),y=r("./lib/foster/components/sprites/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var Facing=function(e){function Facing(){return(0,o.default)(this,Facing),(0,u.default)(this,(Facing.__proto__||Object.getPrototypeOf(Facing)).apply(this,arguments))}return(0,d.default)(Facing,e),(0,a.default)(Facing,[{key:"update",value:function(){var e=this.scene.firstColliderInTag("player");this.sprite.flipX=e.sceneCenterX>this.sprite.sceneCenterX,this.sprite.play(Math.abs(e.sceneCenterX-this.sprite.sceneCenterX)<24?"face_in":"face_out")}}]),Facing}(m.AutoComponent);p([m.AutoComponent.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",y.Sprite)],Facing.prototype,"sprite",void 0),Facing=p([m.AutoComponent.register],Facing),t.Facing=Facing},"./src/game/components/floats.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var b=r("./lib/foster/index.ts"),v=r("./lib/foster/components/index.ts"),g=r("./lib/foster/util/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var Floats=function(e){function Floats(){(0,o.default)(this,Floats);var e=(0,u.default)(this,(Floats.__proto__||Object.getPrototypeOf(Floats)).apply(this,arguments));return e.floatTime=1.64,e.lastLeft=-1,e.lastTop=-1,e.timeToFloat=1e3,e}return(0,f.default)(Floats,e),(0,a.default)(Floats,[{key:"addedToScene",value:function(){(0,d.default)(Floats.prototype.__proto__||Object.getPrototypeOf(Floats.prototype),"addedToScene",this).call(this)}},{key:"updateOld",value:function(){var e=this;if(this.lastLeft===this.physics.sceneLeft&&this.lastTop===this.physics.sceneTop&&this.physics.check("water")?this.timeToFloat-=b.Engine.delta:this.timeToFloat=this.floatTime,this.timeToFloat<=0){this.timeToFloat=this.floatTime;var t=this.scenePosition,r=g.Ease.linear;v.Tween.create(this.entity).start(.5,t.x,t.x+24,r,function(t){e.physics.moveX(t-e.physics.scenePosition.x)},!0).restart()}this.lastLeft=this.physics.sceneLeft,this.lastTop=this.physics.sceneTop}}]),Floats}(b.Component);y([b.Component.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",v.Physics)],Floats.prototype,"physics",void 0),Floats=y([b.Component.register],Floats),t.Floats=Floats},"./src/game/components/freezable.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var b=r("./lib/foster/index.ts"),v=r("./lib/foster/components/index.ts"),g=r("./lib/foster/components/sprites/index.ts"),_=r("./lib/foster/util/index.ts"),j=r("./src/game/components/index.ts"),x=r("./src/game/components/childentity.ts"),w=r("./src/game/prefabs.ts"),k=r("./src/game/components/pushable.ts"),C=r("./src/game/autocomponent.ts");r("./node_modules/reflect-metadata/Reflect.js");var O=r("./src/game/components/gameevents.ts"),Freezable=S=function(e){function Freezable(){(0,o.default)(this,Freezable);var e=(0,u.default)(this,(Freezable.__proto__||Object.getPrototypeOf(Freezable)).apply(this,arguments));return e.totalFreezeTime=12,e.freezeTime=1/0,e.frozenLastFrame=!1,e}return(0,f.default)(Freezable,e),(0,a.default)(Freezable,[{key:"addedToScene",value:function(){(0,d.default)(Freezable.prototype.__proto__||Object.getPrototypeOf(Freezable.prototype),"addedToScene",this).call(this),this.onFreezeDelegate=new O.EventDelegate(this.opts.onFreeze,this.entity),this.onThawDelegate=new O.EventDelegate(this.opts.onThaw,this.entity)}},{key:"update",value:function(){if(void 0===this.trackedComponents){this.trackedComponents=[],this.physics=this.entity.find(v.Physics);var e=!0,t=!1,r=void 0;try{for(var n,i=S.frozenComponents[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value,s=j.getComponentByName(o),a=this.entity.find(s);a&&this.trackedComponents.push(a)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}var l=b.Engine.elapsed;this.pushable&&l-this.pushable.lastFloatingTime<.5&&(this.freezeTime+=b.Engine.delta);var u=l-this.freezeTime,c=this.isFrozen,d=_.Calc.clamp(u<0?0:(this.totalFreezeTime-u)/this.totalFreezeTime,0,1);if(this.graphic.color.set(1-d,1-d,1,1),c&&!this.frozenLastFrame){var h=!0,f=!1,p=void 0;try{for(var m,y=this.trackedComponents[Symbol.iterator]();!(h=(m=y.next()).done);h=!0)m.value.active=!1}catch(e){f=!0,p=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw p}}this.physics&&this.physics.stop(),this.pushable=this.entity.add(new k.Pushable({threshold:.2})),this.frozenGraphic=this.entity.add(new x.ChildEntity({prefabName:"icecube"})),this.onFreezeDelegate.invoke()}else if(!c&&this.frozenLastFrame){var g=!0,w=!1,C=void 0;try{for(var O,T=this.trackedComponents[Symbol.iterator]();!(g=(O=T.next()).done);g=!0){var E=O.value;E.active=!0}}catch(e){w=!0,C=e}finally{try{!g&&T.return&&T.return()}finally{if(w)throw C}}this.entity.remove(this.pushable),this.pushable=void 0,this.frozenGraphic.entity.remove(this.frozenGraphic),this.frozenGraphic=void 0,this.onThawDelegate.invoke()}this.frozenLastFrame=c}},{key:"freeze",value:function(){this.isFrozen?this.shatter():this.freezeTime=b.Engine.elapsed}},{key:"shatter",value:function(){var e=_.Vector.temp0.set(this.graphic.sceneCenterX,this.graphic.sceneCenterY);this.scene.add(w.instantiatePrefab("ice_burst"),e),this.scene.remove(this.entity)}},{key:"isFrozen",get:function(){var e=b.Engine.elapsed-this.freezeTime;return e>0&&e<=this.totalFreezeTime}}]),Freezable}(C.AutoComponent);Freezable.frozenComponents=["Mover","Sprite","Wonder","Emitter","Facing"],y([C.AutoComponent.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",g.Graphic)],Freezable.prototype,"graphic",void 0),Freezable=S=y([C.AutoComponent.register],Freezable),t.Freezable=Freezable;var S},"./src/game/components/gameevents.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/get.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/inherits.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/createClass.js"),b=n(y),v=r("./node_modules/babel-runtime/helpers/typeof.js"),g=n(v),_=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,g.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var j=r("./lib/foster/index.ts"),x=r("./src/game/components/index.ts"),w=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,m.default)(this,e),this.callInfos=t||[],r&&this.bind(r)}return(0,b.default)(e,[{key:"bind",value:function(e){this.cbs=k.makeCalls(e,this.callInfos)}},{key:"invoke",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.cbs[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)(0,n.value)()}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}}]),e}();t.EventDelegate=w;var k=function(){function e(){(0,m.default)(this,e)}return(0,b.default)(e,null,[{key:"makeCalls",value:function(t,r){var n=[];if(void 0!==r){"string"==typeof r&&(r=[[r,[]]]);var i=!0,o=!1,s=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;n.push(e.makeCall(t,u))}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}return n}},{key:"makeCall",value:function(t,r){if("string"==typeof r&&(r=[r,[]]),r instanceof Array){var n=r,i=(0,f.default)(n,2),o=i[0],s=i[1],a=o.split("."),l=(0,f.default)(a,2),u=l[0],c=l[1];return e.makeCall(t,{componentName:u,methodName:c,args:s})}var h=void 0;if(r.componentName[0].toLowerCase()===r.componentName[0])h=t.componentByName[r.componentName];else{var p=x.getComponentByName(r.componentName);h=t.find(p)}var m=h[r.methodName],y=r.args;return y instanceof Array||(y=[y]),function(){return m.call.apply(m,[h].concat((0,d.default)(y)))}}}]),e}();t.EventUtil=k;var GameEvents=function(e){function GameEvents(e){(0,m.default)(this,GameEvents);var t=(0,a.default)(this,(GameEvents.__proto__||Object.getPrototypeOf(GameEvents)).call(this));return t.eventListeners=e,t}return(0,u.default)(GameEvents,e),(0,b.default)(GameEvents,[{key:"addedToScene",value:function(){var e=this.scene.events,t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(this.eventListeners)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=(0,f.default)(i.value,2),a=s[0],l=s[1],u=void 0;switch(a){case"onSingleHeartCollected":u=e.onSingleHeartCollected;break;case"onHeartsCollected":u=e.onHeartsCollected;break;case"onTreasureCollected":u=e.onTreasureCollected;break;default:throw Error("unrecognized event "+a)}var c=!0,d=!1,h=void 0;try{for(var p,m=l[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var y=p.value;u.push(k.makeCall(this.entity,y))}}catch(e){d=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw h}}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}]),GameEvents}(j.Component);GameEvents=_([j.Component.register,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,g.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],GameEvents),t.GameEvents=GameEvents;var GameEventsEmitter=C=function(e){function GameEventsEmitter(){(0,m.default)(this,GameEventsEmitter);var e=(0,a.default)(this,(GameEventsEmitter.__proto__||Object.getPrototypeOf(GameEventsEmitter)).apply(this,arguments));return e.onSingleHeartCollected=[],e.onHeartsCollected=[],e.onTreasureCollected=[],e}return(0,u.default)(GameEventsEmitter,e),(0,b.default)(GameEventsEmitter,[{key:"triggerSingleHeartCollected",value:function(){C.callAll(this.onSingleHeartCollected)}},{key:"addedToScene",value:function(){this.didEmitHeartsCollected=!1,this.didEmitTreasureCollected=!1}},{key:"update",value:function(){(0,o.default)(GameEventsEmitter.prototype.__proto__||Object.getPrototypeOf(GameEventsEmitter.prototype),"update",this).call(this),this.didEmitHeartsCollected||0!==this.scene.allCollidersInTag("heart").length||(this.didEmitHeartsCollected=!0,C.callAll(this.onHeartsCollected)),this.didEmitTreasureCollected||0!==this.scene.allCollidersInTag("treasure").length||(this.didEmitTreasureCollected=!0,C.callAll(this.onTreasureCollected))}}],[{key:"callAll",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)(0,i.value)()}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}]),GameEventsEmitter}(j.Component);GameEventsEmitter=C=_([j.Component.register],GameEventsEmitter),t.GameEventsEmitter=GameEventsEmitter;var C},"./src/game/components/graphichiteffect.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h),p=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},m=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./lib/foster/components/sprites/index.ts"),v=r("./src/game/components/health.ts");r("./node_modules/reflect-metadata/Reflect.js");var GraphicHitEffect=function(e){function GraphicHitEffect(e){var t=e.deathAnim;(0,o.default)(this,GraphicHitEffect);var r=(0,u.default)(this,(GraphicHitEffect.__proto__||Object.getPrototypeOf(GraphicHitEffect)).call(this));return r.playedDead=!1,r.deathAnim=t,r}return(0,d.default)(GraphicHitEffect,e),(0,a.default)(GraphicHitEffect,[{key:"update",value:function(){var e=!0;this.health.invincible&&(e=y.Engine.frameCount%2==0),!this.playedDead&&this.deathAnim&&this.health.dead&&(this.playedDead=!0,this.graphic.play(this.deathAnim)),this.graphic.visible=e}}]),GraphicHitEffect}(y.Component);p([y.Component.require,m("design:type",b.Graphic)],GraphicHitEffect.prototype,"graphic",void 0),p([y.Component.require,m("design:type",v.Health)],GraphicHitEffect.prototype,"health",void 0),GraphicHitEffect=p([y.Component.register,m("design:paramtypes",[Object])],GraphicHitEffect),t.GraphicHitEffect=GraphicHitEffect},"./src/game/components/health.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/index.ts"),Health=function(e){function Health(){(0,o.default)(this,Health);var e=(0,u.default)(this,(Health.__proto__||Object.getPrototypeOf(Health)).apply(this,arguments));return e.health=1,e.invincibilityTime=1,e.lastHitTime=-1e3,e.onDamage=[],e.onDie=[],e}return(0,d.default)(Health,e),(0,a.default)(Health,[{key:"kill",value:function(){this.applyDamage(this.health,null)}},{key:"tryApplyDamage",value:function(e){return!this.invincible&&this.applyDamage(e.amount,e)}},{key:"applyDamage",value:function(e,t){this.lastHitTime=p.Engine.elapsed;var r=this.health;this.health-=e;var n=!0,i=!1,o=void 0;try{for(var s,a=this.onDamage[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)(0,s.value)(t)}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}if(r>0&&this.health<=0){var l=!0,u=!1,c=void 0;try{for(var d,h=this.onDie[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)(0,d.value)(t)}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}return!0}},{key:"dead",get:function(){return this.health<=0}},{key:"invincible",get:function(){return!this.dead&&p.Engine.elapsed-this.lastHitTime<this.invincibilityTime}}]),Health}(p.Component);Health=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([p.Component.register],Health),t.Health=Health},"./src/game/components/hitgridwithholes.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.top=-1e3,e.left=-1e3,e.width=0,e.height=0}function o(e){if(!e||"object"!==(void 0===e?"undefined":(0,a.default)(e)))return e;if(Array.isArray(e))return e.map(o);var t={};return Object.keys(e).forEach(function(r){t[r]=o(e[r])}),t}var s=r("./node_modules/babel-runtime/helpers/typeof.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/createClass.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/get.js"),b=n(y),v=r("./node_modules/babel-runtime/helpers/inherits.js"),g=n(v);Object.defineProperty(t,"__esModule",{value:!0});var _=r("./lib/foster/components/colliders/index.ts"),j=r("./lib/foster/util/index.ts"),x=r("./lib/foster/index.ts"),w=r("./src/game/editablescene.ts"),k=r("./lib/foster/components/sprites/index.ts"),HitgridWithHoles=function(e){function HitgridWithHoles(){(0,d.default)(this,HitgridWithHoles);var e=(0,m.default)(this,(HitgridWithHoles.__proto__||Object.getPrototypeOf(HitgridWithHoles)).apply(this,arguments));return e.lastFrameObjs=[],e.thisFrameObjs=[],e.colors=[new j.Color(1,0,1,1),new j.Color(0,1,0,1),new j.Color(0,0,1,1),new j.Color(1,1,0,1)],e.splits={},e}return(0,g.default)(HitgridWithHoles,e),(0,f.default)(HitgridWithHoles,[{key:"addedToScene",value:function(){var e=this;(0,b.default)(HitgridWithHoles.prototype.__proto__||Object.getPrototypeOf(HitgridWithHoles.prototype),"addedToScene",this).call(this),this.originalCopy=new _.Hitgrid(this.tileWidth,this.tileHeight),this.originalCopy.map=o(this.map),this.scene.earlyUpdate.push(function(){e.earlyUpdate()})}},{key:"copy",value:function(e){this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.type=e.type,this.map=o(e.map)}},{key:"trackObject",value:function(e){this.thisFrameObjs.push(e),e.untag("solid"),e.untag("enemy_solid"),e.solids=e.solids.filter(function(e){return"player"!==e})}},{key:"earlyUpdate",value:function(){this.thisFrameObjs.length=0}},{key:"makeHitboxes",value:function(e,t){if(HitgridWithHoles.pool.length>=e){var r=HitgridWithHoles.pool.splice(0,e),n=!0,i=!1,o=void 0;try{for(var s,a=r[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;l.left=t.x,l.top=t.y,l.width=t.width,l.height=t.height}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}for(var u=[],c=0;c<e;++c){var d=this.entity.add(new _.Hitbox({left:t.x,top:t.y,width:t.width,height:t.height,tags:this.tags}));d.debugColor=this.colors[c],u.push(d)}return u}},{key:"returnHitboxes",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value;i(a),HitgridWithHoles.pool.push(a)}}catch(e){r=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}}},{key:"lateUpdate",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,s=this.lastFrameObjs[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var a=i.value;-1===this.thisFrameObjs.indexOf(a)&&e.push(a)}}catch(e){r=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}var l=[],c=!0,d=!1,h=void 0;try{for(var f,p=this.thisFrameObjs[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;-1===this.lastFrameObjs.indexOf(m)&&l.push(m)}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}this.map=o(this.originalCopy.map);var y=!0,b=!1,v=void 0;try{for(var g,_=Object.entries(this.splits)[Symbol.iterator]();!(y=(g=_.next()).done);y=!0){var j=(0,u.default)(g.value,2),x=(j[0],j[1]);this.returnHitboxes(x)}}catch(e){b=!0,v=e}finally{try{!y&&_.return&&_.return()}finally{if(b)throw v}}this.splits={};var w=!0,k=!1,C=void 0;try{for(var O,S=this.thisFrameObjs[Symbol.iterator]();!(w=(O=S.next()).done);w=!0){var T=O.value;this.carve(T.sceneBounds)}}catch(e){k=!0,C=e}finally{try{!w&&S.return&&S.return()}finally{if(k)throw C}}var E=this.scene.firstColliderInTag("player"),P=this.tags[0];if(E&&E.check(P))for(var R=0;R<3;++R){if(!E.check(P,0,-R)){E.move(0,-R);break}if(!E.check(P,0,R)){E.move(0,R);break}if(!E.check(P,R,0)){E.move(R,0);break}if(!E.check(P,-R,0)){E.move(-R,0);break}}}},{key:"carve",value:function(e){window.hg=this;var t=this.scenePosition,r=this.tileWidth,n=this.tileHeight,i=!0,o=!1,s=void 0;try{for(var a,l=this.tiles()[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,u.default)(a.value,2),d=c[0],h=c[1],f=new j.Rectangle(t.x+d*r,t.y+h*n,r,n);if(f.intersectsRect(e)){var p=d+"_"+h,m=void 0;this.splits[p]?m=this.splits[p]:(m=this.splits[p]=this.makeHitboxes(4,f),this.set(!1,d,h)),m[0].width=Math.min(f.right,e.left)-f.left,m[1].height=Math.min(f.bottom,e.top)-f.top,m[2].setTop(Math.min(f.bottom,e.bottom)),m[3].setLeft(Math.min(f.right,e.right)),m[0].active=m[0].width>0&&m[0].height>0,m[1].active=m[1].width>0&&m[1].height>0,m[2].active=m[2].width>1&&m[2].height>1,m[3].active=m[3].width>1&&m[3].height>1}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},{key:"worldToMap",value:function(e){var t=this.scenePosition;e.x=Math.floor((e.x-t.x)/this.tileWidth),e.y=Math.floor((e.y-t.y)/this.tileHeight)}}]),HitgridWithHoles}(_.Hitgrid);HitgridWithHoles.pool=[],t.HitgridWithHoles=HitgridWithHoles;var C=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,f.default)(t,[{key:"begin",value:function(){(0,b.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"begin",this).call(this),this.camera.origin.set(x.Engine.width/2,x.Engine.height/2);var e=this.add(new x.Entity);e.name="test terrain";for(var r=e.add(new HitgridWithHoles(24,24,["water_solid"])),n=0;n<5;++n)for(var i=0;i<5;++i)r.set(!0,i,n);this.add(new x.Entity).add(new k.Sprite({animation:"guy"}))}}]),t}(w.EditableScene);t.HitgridHolesTestScene=C},"./src/game/components/index.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function o(e){if(!e)throw Error("must pass a non-empty non-null name to getComponentByName");var t=_.Component.registeredComponents[e];if(t)return t}var s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/get.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/typeof.js"),b=n(y),v=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,b.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},g=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,b.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),i(r("./src/game/components/awareness.ts")),i(r("./src/game/components/autotween.ts")),i(r("./src/game/components/burst.ts")),i(r("./src/game/components/causesdamage.ts")),i(r("./src/game/components/childentity.ts")),i(r("./src/game/components/emitter.ts")),i(r("./src/game/components/exit.ts")),i(r("./src/game/components/facing.ts")),i(r("./src/game/components/floats.ts")),i(r("./src/game/components/freezable.ts")),i(r("./src/game/components/medusa.ts")),i(r("./src/game/components/pushable.ts")),i(r("./src/game/components/gameevents.ts")),i(r("./src/game/components/graphichiteffect.ts")),i(r("./src/game/components/health.ts")),i(r("./src/game/components/knockback.ts")),i(r("./src/game/components/mover.ts")),i(r("./src/game/components/particleloop.ts")),i(r("./src/game/components/pickup.ts")),i(r("./src/game/components/shake.ts")),i(r("./src/game/components/spikes.ts")),i(r("./src/game/components/spriteautoplay.ts")),i(r("./src/game/components/spriteevents.ts")),i(r("./src/game/components/staticgraphic.ts")),i(r("./src/game/components/teleport.ts")),i(r("./src/game/components/topdowncontrols.ts")),i(r("./src/game/components/trigger.ts")),i(r("./src/game/components/waterflow.ts")),i(r("./src/game/components/wobble.ts")),i(r("./src/game/components/wonder.ts")),r("./node_modules/reflect-metadata/Reflect.js");var _=r("./lib/foster/index.ts"),j=r("./lib/foster/components/index.ts"),x=r("./lib/foster/components/colliders/index.ts"),w=r("./lib/foster/components/particles/index.ts"),k=r("./lib/foster/components/sprites/index.ts"),C=r("./src/game/components/pickup.ts"),O=r("./src/game/components/topdowncontrols.ts"),S=r("./src/game/components/wonder.ts"),T=r("./src/game/prefabs.ts"),RenderDepth=function(e){function RenderDepth(e){var t=e.depth;(0,a.default)(this,RenderDepth);var r=(0,d.default)(this,(RenderDepth.__proto__||Object.getPrototypeOf(RenderDepth)).call(this));return r.depth=t,r}return(0,m.default)(RenderDepth,e),(0,u.default)(RenderDepth,[{key:"addedToScene",value:function(){(0,f.default)(RenderDepth.prototype.__proto__||Object.getPrototypeOf(RenderDepth.prototype),"addedToScene",this).call(this),void 0===this.depth||isNaN(this.depth)||(this.entity.depth=this.depth)}}]),RenderDepth}(_.Component);RenderDepth=v([_.Component.register,g("design:paramtypes",[Object])],RenderDepth),t.RenderDepth=RenderDepth;var Blockize=function(e){function Blockize(){return(0,a.default)(this,Blockize),(0,d.default)(this,(Blockize.__proto__||Object.getPrototypeOf(Blockize)).apply(this,arguments))}return(0,m.default)(Blockize,e),(0,u.default)(Blockize,[{key:"update",value:function(){this.physics.check("player")&&(this.sprite.play("blockize"),this.physics.stop(),this.wonder.active=!1)}}]),Blockize}(_.Component);v([_.Component.require,g("design:type",j.Physics)],Blockize.prototype,"physics",void 0),v([_.Component.require,g("design:type",k.Sprite)],Blockize.prototype,"sprite",void 0),v([_.Component.require,g("design:type",S.Wonder)],Blockize.prototype,"wonder",void 0),Blockize=v([_.Component.register],Blockize);var HeartPickup=function(e){function HeartPickup(e){(0,a.default)(this,HeartPickup);var t=(0,d.default)(this,(HeartPickup.__proto__||Object.getPrototypeOf(HeartPickup)).call(this,e));return t.type=e.type,t}return(0,m.default)(HeartPickup,e),(0,u.default)(HeartPickup,[{key:"didPickup",value:function(e){(0,f.default)(HeartPickup.prototype.__proto__||Object.getPrototypeOf(HeartPickup.prototype),"didPickup",this).call(this,e);var t=e.find(O.FreezingShot);t&&t.didPickupHeart(this),this.level&&this.level.events.triggerSingleHeartCollected()}}]),HeartPickup}(C.Pickup);HeartPickup=v([_.Component.register,g("design:paramtypes",[Object])],HeartPickup),t.HeartPickup=HeartPickup;var DiesOnCollision=function(e){function DiesOnCollision(e){(0,a.default)(this,DiesOnCollision);var t=(0,d.default)(this,(DiesOnCollision.__proto__||Object.getPrototypeOf(DiesOnCollision)).call(this));return t.done=!1,t.opts=e,t}return(0,m.default)(DiesOnCollision,e),(0,u.default)(DiesOnCollision,[{key:"addedToScene",value:function(){var e=this;(0,f.default)(DiesOnCollision.prototype.__proto__||Object.getPrototypeOf(DiesOnCollision.prototype),"addedToScene",this).call(this),this.physics.onCollide.push(function(t,r){e.done||(e.done=!0,e.opts.particlesPrefab&&e.scene.add(T.instantiatePrefab(e.opts.particlesPrefab,null,e.physics.sceneCenterX,e.physics.sceneCenterY)),j.Alarm.create(e.entity).start(.01,function(){e.entity.scene.remove(e.entity),e.active=!1}))})}}]),DiesOnCollision}(_.Component);v([_.Component.require,g("design:type",j.Physics)],DiesOnCollision.prototype,"physics",void 0),DiesOnCollision=v([_.Component.register,g("design:paramtypes",[Object])],DiesOnCollision),t.DiesOnCollision=DiesOnCollision;var MapLocation=function(e){function MapLocation(e){var t=e.name;(0,a.default)(this,MapLocation);var r=(0,d.default)(this,(MapLocation.__proto__||Object.getPrototypeOf(MapLocation)).call(this));return r.name=t,r}return(0,m.default)(MapLocation,e),MapLocation}(_.Component);MapLocation=v([_.Component.register,g("design:paramtypes",[Object])],MapLocation),t.MapLocation=MapLocation;var Rotater=function(e){function Rotater(){(0,a.default)(this,Rotater);var e=(0,d.default)(this,(Rotater.__proto__||Object.getPrototypeOf(Rotater)).apply(this,arguments));return e.degrees=0,e.speed=2,e}return(0,m.default)(Rotater,e),(0,u.default)(Rotater,[{key:"update",value:function(){(0,f.default)(Rotater.prototype.__proto__||Object.getPrototypeOf(Rotater.prototype),"update",this).call(this),this.degrees+=_.Engine.delta*this.speed,this.graphic.rotation=this.degrees}}]),Rotater}(_.Component);v([_.Component.require,g("design:type",k.Graphic)],Rotater.prototype,"graphic",void 0),Rotater=v([_.Component.register],Rotater);for(var E=[x.Hitbox,j.Physics,k.Sprite,w.ParticleSystem],P=0;P<E.length;P++){var R=E[P];_.Component.register(R)}t.getComponentByName=o},"./src/game/components/knockback.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/index.ts"),_=r("./lib/foster/components/colliders/index.ts"),j=r("./lib/foster/util/index.ts"),x=r("./src/game/components/health.ts");r("./node_modules/reflect-metadata/Reflect.js");var KnockBack=function(e){function KnockBack(){(0,o.default)(this,KnockBack);var e=(0,u.default)(this,(KnockBack.__proto__||Object.getPrototypeOf(KnockBack)).apply(this,arguments));return e.factor=3.4,e.speed=new j.Vector,e}return(0,f.default)(KnockBack,e),(0,a.default)(KnockBack,[{key:"addedToScene",value:function(){var e=this;(0,d.default)(KnockBack.prototype.__proto__||Object.getPrototypeOf(KnockBack.prototype),"addedToScene",this).call(this),this.health.onDamage.push(function(t){if(e.speed.set(0,0),t){var r=t.entity.find(_.Hitbox);if(r){var n=j.Vector.temp0.set(r.sceneLeft+r.width/2,r.sceneTop+r.height/2);e.speed.copy(e.entity.position).sub(n).normalize().mult(100).mult(e.factor)}e.physics.speed.add(e.speed)}})}}]),KnockBack}(v.Component);y([v.Component.require,b("design:type",x.Health)],KnockBack.prototype,"health",void 0),y([v.Component.require,b("design:type",g.Physics)],KnockBack.prototype,"physics",void 0),KnockBack=y([v.Component.register],KnockBack),t.KnockBack=KnockBack},"./src/game/components/medusa.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h),p=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},m=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./lib/foster/components/index.ts"),v=r("./src/game/autocomponent.ts"),g=r("./lib/foster/util/index.ts"),_=r("./src/game/components/awareness.ts"),j=r("./lib/foster/components/colliders/index.ts"),x=r("./lib/foster/components/index.ts"),w=r("./lib/foster/components/sprites/index.ts"),k=r("./src/game/player.ts");r("./node_modules/reflect-metadata/Reflect.js");var Medusa=function(e){function Medusa(){(0,o.default)(this,Medusa);var e=(0,u.default)(this,(Medusa.__proto__||Object.getPrototypeOf(Medusa)).apply(this,arguments));return e.lastKillTime=-1e3,e.triggered=!1,e}return(0,d.default)(Medusa,e),(0,a.default)(Medusa,[{key:"update",value:function(){if(this.awareness.killing.length>0){this.lastKillTime=y.Engine.elapsed,this.sprite.play("fire");var e=!0,t=!1,r=void 0;try{for(var n,i=this.awareness.killing[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;this.triggerDeath(o)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}else this.awareness.wouldKill||y.Engine.elapsed-this.lastKillTime<1?this.sprite.play("fire"):-1!==this.awareness.xrayGroups.indexOf("player")?this.sprite.play("alert"):this.sprite.play("asleep")}},{key:"triggerDeath",value:function(e){var t=e.entity;if(t instanceof k.Player)t.kill();else if("grey_orb"===t.name){t.find(w.Sprite).play("disintegrate"),t.ungroup("player"),t.findAll(j.Collider).forEach(function(e){return e.untag("player")});var r=t.find(w.Sprite);x.Alarm.create(t).start(.31,function(){return t.scene.remove(t)}),b.Tween.create(t).start(.3,1,0,g.Ease.linear,function(e){r.alpha=e},!0).restart()}else t.scene.remove(t)}}]),Medusa}(v.AutoComponent);p([v.AutoComponent.require,m("design:type",w.Sprite)],Medusa.prototype,"sprite",void 0),p([v.AutoComponent.require,m("design:type",_.Awareness)],Medusa.prototype,"awareness",void 0),Medusa=p([v.AutoComponent.register],Medusa),t.Medusa=Medusa},"./src/game/components/mover.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h),p=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var m=r("./lib/foster/components/index.ts"),y=r("./src/game/autocomponent.ts");r("./node_modules/reflect-metadata/Reflect.js");var Mover=function(e){function Mover(){return(0,o.default)(this,Mover),(0,u.default)(this,(Mover.__proto__||Object.getPrototypeOf(Mover)).apply(this,arguments))}return(0,d.default)(Mover,e),(0,a.default)(Mover,[{key:"update",value:function(){this.physics.speed.set(this.opts.x,this.opts.y)}},{key:"setDelta",value:function(e,t){this.opts.x=e,this.opts.y=t}}]),Mover}(y.AutoComponent);p([y.AutoComponent.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",m.Physics)],Mover.prototype,"physics",void 0),Mover=p([y.AutoComponent.register],Mover),t.Mover=Mover},"./src/game/components/particleloop.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./src/game/autocomponent.ts"),b=r("./lib/foster/index.ts"),v=r("./lib/foster/components/particles/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var ParticleLoop=function(e){function ParticleLoop(){return(0,o.default)(this,ParticleLoop),(0,u.default)(this,(ParticleLoop.__proto__||Object.getPrototypeOf(ParticleLoop)).apply(this,arguments))}return(0,f.default)(ParticleLoop,e),(0,a.default)(ParticleLoop,[{key:"addedToScene",value:function(){(0,d.default)(ParticleLoop.prototype.__proto__||Object.getPrototypeOf(ParticleLoop.prototype),"addedToScene",this).call(this),this.pSys=this.entity.find(v.ParticleSystem),this.pSys||(this.pSys=this.entity.add(new v.ParticleSystem(this.opts.template))),this.pSys.template.name,this.opts.template}},{key:"update",value:function(){b.Engine.elapsed,this.rate}},{key:"rate",get:function(){return void 0===this.opts.rate?50:this.opts.rate}}]),ParticleLoop}(y.AutoComponent);ParticleLoop=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([y.AutoComponent.register],ParticleLoop),t.ParticleLoop=ParticleLoop},"./src/game/components/pickup.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h),p=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},m=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/components/index.ts"),b=r("./lib/foster/util/index.ts"),v=r("./lib/foster/components/sprites/index.ts"),g=r("./lib/foster/components/colliders/index.ts"),_=r("./src/game/prefabs.ts"),j=r("./src/game/autocomponent.ts"),x=r("./src/game/player.ts");r("./node_modules/reflect-metadata/Reflect.js");var Pickup=w=function(e){function Pickup(){(0,o.default)(this,Pickup);var e=(0,u.default)(this,(Pickup.__proto__||Object.getPrototypeOf(Pickup)).apply(this,arguments));return e.pickedUp=!1,e}return(0,d.default)(Pickup,e),(0,a.default)(Pickup,[{key:"didPickup",value:function(e){}},{key:"update",value:function(){var e=this.hitbox.collide("player",0,0);if(e&&e.entity instanceof x.Player){this.active=!1,this.didPickup(e.entity);var t=b.Vector.temp0.set(this.graphic.sceneCenterX,this.graphic.sceneCenterY),r=this.opts.burstName||"pickup_burst";this.entity.scene.add(_.instantiatePrefab(r),t),w.fadeOutAllGraphicsAndRemoveEntity(this.entity)}}}],[{key:"fadeOutAllGraphicsAndRemoveEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,r=e.findAll(v.Graphic),n=r.map(function(e){return e.alpha}),i=y.Tween.create(e).start(t,1,0,b.Ease.linear,function(e){for(var t=0;t<r.length;++t)r[t].alpha=e*n[t]},!0);i.setOnComplete(function(){return e.scene.remove(e)}),i.restart()}}]),Pickup}(j.AutoComponent);p([j.AutoComponent.require,m("design:type",v.Graphic)],Pickup.prototype,"graphic",void 0),p([j.AutoComponent.require,m("design:type",g.Hitbox)],Pickup.prototype,"hitbox",void 0),Pickup=w=p([j.AutoComponent.register],Pickup),t.Pickup=Pickup;var w},"./src/game/components/pushable.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/get.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/typeof.js"),b=n(y);Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/index.ts"),_=r("./lib/foster/components/colliders/index.ts"),j=r("./lib/foster/util/index.ts"),x=r("./src/game/game.ts"),w=r("./src/game/components/topdowncontrols.ts"),k=r("./src/game/autocomponent.ts"),C=r("./src/game/player.ts"),Pushable=function(e){function Pushable(){(0,a.default)(this,Pushable);var e=(0,d.default)(this,(Pushable.__proto__||Object.getPrototypeOf(Pushable)).apply(this,arguments));return e.tileWidth=24,e.tileHeight=24,e.pushCounter=new j.Vector,e.lastFloatingTime=-100,e}return(0,m.default)(Pushable,e),(0,u.default)(Pushable,[{key:"addedToScene",value:function(){(0,f.default)(Pushable.prototype.__proto__||Object.getPrototypeOf(Pushable.prototype),"addedToScene",this).call(this),x.Game.TAGS.SOLID,x.Game.TAGS.PLAYER,this.physics=this.entity.find(g.Physics),this.physics,this.entity.add(this.hitbox=new _.Hitbox({left:-1,top:-1,width:this.tileWidth+2,height:this.tileHeight+2,tags:[]}))}},{key:"play_sound",value:function(){}},{key:"updatePushCounterFromWater",value:function(){var e=this.scene.waterFlow,t=e.trackObject(this.physics);if(t){this.lastFloatingTime=v.Engine.elapsed;var r=(0,o.default)(t,2),n=r[0],i=r[1],s=e.currentStrength*v.Engine.delta;n*=s,i*=s;var a=this.physics.collide("player",0,0);a&&a.entity.find(g.Physics).move(n,i),this.physics.move(n,i)}}},{key:"updatePushCounterFromPlayer",value:function(){var e=this.hitbox.collide(x.Game.TAGS.PLAYER,void 0,void 0);if(!(e&&e.entity instanceof C.Player))return void this.pushCounter.set(0,0);var t=e.entity.find(g.Physics),r=e.entity.find(w.TopDownControls),n=r.addedSpeed,i=Math.sign(n.x),o=Math.sign(n.y),s=t.sceneBounds,a=this.physics.sceneBounds;(i>0&&s.centerX>a.centerX||i<0&&s.centerX<a.centerX)&&(i=0),(o>0&&s.centerY>a.centerY||o<0&&s.centerY<a.centerY)&&(o=0),0===i||a.overlapsVertically(s)||(i=0),0===o||a.overlapsHorizontally(s)||(o=0),this.pushCounter.set(0===i?0:this.pushCounter.x+v.Engine.delta*i,0===o?0:this.pushCounter.y+v.Engine.delta*o)}},{key:"update",value:function(){var e=this;if((0,f.default)(Pushable.prototype.__proto__||Object.getPrototypeOf(Pushable.prototype),"update",this).call(this),!this.activeTween&&this.physics){this.physics.check("water")?this.updatePushCounterFromWater():this.updatePushCounterFromPlayer();var t=j.Ease.sineInOut,r=this.scenePosition,n=[x.Game.TAGS.SOLID,"enemy_solid"];if(Math.abs(this.pushCounter.x)>this.threshold){var i=Math.sign(this.pushCounter.x)*this.tileWidth,o=this.physics.collideAllMulti(n,i,0);this.isBlocked(o)||(this.play_sound(),this.activeTween=g.Tween.create(this.entity).start(.42,r.x,r.x+i,t,function(t){e.physics.moveX(t-e.scenePosition.x)},!0).setOnComplete(function(){e.activeTween=void 0}).restart(),this.pushCounter.x=0)}if(Math.abs(this.pushCounter.y)>this.threshold){var s=Math.sign(this.pushCounter.y)*this.tileHeight,a=this.physics.collideAllMulti(n,0,s);this.isBlocked(a)||(this.play_sound(),this.activeTween=g.Tween.create(this.entity).start(.42,r.y,r.y+s,t,function(t){e.physics.moveY(t-e.scenePosition.y)},!0).setOnComplete(function(){e.activeTween=void 0}).restart(),this.pushCounter.y=0)}}}},{key:"isBlocked",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)if(i.value.entity!==this.entity)return!0}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return!1}},{key:"threshold",get:function(){return void 0===this.opts.threshold?.5:this.opts.threshold}}]),Pushable}(k.AutoComponent);Pushable=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,b.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([v.Component.register],Pushable),t.Pushable=Pushable},"./src/game/components/shake.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var b=r("./src/game/autocomponent.ts"),v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/sprites/index.ts"),_=r("./lib/foster/util/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var Shake=function(e){function Shake(){(0,o.default)(this,Shake);var e=(0,u.default)(this,(Shake.__proto__||Object.getPrototypeOf(Shake)).apply(this,arguments));return e.startTime=Number.POSITIVE_INFINITY,e.startPos=new _.Vector,e}return(0,f.default)(Shake,e),(0,a.default)(Shake,[{key:"addedToScene",value:function(){(0,d.default)(Shake.prototype.__proto__||Object.getPrototypeOf(Shake.prototype),"addedToScene",this).call(this),this.opts.autoPlay&&this.play()}},{key:"play",value:function(){this.startTime=v.Engine.elapsed,this.startPos.copy(this.graphic.position)}},{key:"update",value:function(){(0,d.default)(Shake.prototype.__proto__||Object.getPrototypeOf(Shake.prototype),"update",this).call(this);var e=v.Engine.elapsed-this.startTime;e<0||(this.graphic.position.copy(this.startPos),e<this.opts.time?this.graphic.position.add(_.Vector.temp1.set(_.Calc.range(this.opts.amount),_.Calc.range(this.opts.amount))):this.startTime=Number.POSITIVE_INFINITY)}}]),Shake}(b.AutoComponent);y([b.AutoComponent.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",g.Graphic)],Shake.prototype,"graphic",void 0),Shake=y([b.AutoComponent.register],Shake),t.Shake=Shake},"./src/game/components/spikes.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/colliders/index.ts"),_=r("./src/game/components/causesdamage.ts"),j=r("./src/game/game.ts");r("./node_modules/reflect-metadata/Reflect.js");var Spikes=function(e){function Spikes(e){var t=e.delay,r=void 0===t?.6:t,n=e.spikeUpTime,i=void 0===n?2.2:n;(0,o.default)(this,Spikes);var s=(0,u.default)(this,(Spikes.__proto__||Object.getPrototypeOf(Spikes)).call(this));return s.lastTriggerTime=-1e3,s.state="Dormant",s.delay=r,s.spikeUpTime=i,s}return(0,f.default)(Spikes,e),(0,a.default)(Spikes,[{key:"addedToScene",value:function(){(0,d.default)(Spikes.prototype.__proto__||Object.getPrototypeOf(Spikes.prototype),"addedToScene",this).call(this),this.spikeSprite=this.entity.componentByName.spines}},{key:"update",value:function(){var e=v.Engine.elapsed,t=e-this.lastTriggerTime,r=this.spikeSprite,n=this.delay+this.spikeUpTime;switch(r.visible="Dormant"!==this.state,this.causesDamage.active=t>this.delay&&t<n,this.state){case"Dormant":t>n&&this.hitbox.check(j.Game.TAGS.PLAYER)&&(this.lastTriggerTime=e,this.state="Triggered",r.rate=1);break;case"Triggered":t>this.delay&&(r.play("thrust",!0),this.state="Up");break;case"Up":t>n&&(r.rate=0,r.frame=0,this.state="Dormant");break;default:throw Error(this.state)}}}]),Spikes}(v.Component);y([v.Component.require,b("design:type",g.Hitbox)],Spikes.prototype,"hitbox",void 0),y([v.Component.require,b("design:type",_.CausesDamage)],Spikes.prototype,"causesDamage",void 0),Spikes=y([v.Component.register,b("design:paramtypes",[Object])],Spikes),t.Spikes=Spikes},"./src/game/components/spriteautoplay.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/typeof.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/index.ts"),m=r("./lib/foster/components/sprites/index.ts"),SpriteAutoPlay=function(e){function SpriteAutoPlay(e){var t=e.animationName;(0,o.default)(this,SpriteAutoPlay);var r=(0,u.default)(this,(SpriteAutoPlay.__proto__||Object.getPrototypeOf(SpriteAutoPlay)).call(this));return r.animationName=t,r}return(0,d.default)(SpriteAutoPlay,e),(0,a.default)(SpriteAutoPlay,[{key:"addedToScene",value:function(){this.entity.find(m.Sprite).play(this.animationName)}}]),SpriteAutoPlay}(p.Component);SpriteAutoPlay=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([p.Component.register,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],SpriteAutoPlay),t.SpriteAutoPlay=SpriteAutoPlay},"./src/game/components/spriteevents.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var b=r("./src/game/autocomponent.ts"),v=r("./lib/foster/components/sprites/index.ts"),g=r("./src/game/components/gameevents.ts"),SpriteEvents=function(e){function SpriteEvents(){(0,o.default)(this,SpriteEvents);var e=(0,u.default)(this,(SpriteEvents.__proto__||Object.getPrototypeOf(SpriteEvents)).apply(this,arguments));return e.wasPlaying=!1,e}return(0,f.default)(SpriteEvents,e),(0,a.default)(SpriteEvents,[{key:"addedToScene",value:function(){(0,d.default)(SpriteEvents.prototype.__proto__||Object.getPrototypeOf(SpriteEvents.prototype),"addedToScene",this).call(this),this.onFinish=new g.EventDelegate(this.opts.onFinish,this.entity)}},{key:"update",value:function(){!this.wasPlaying&&this.sprite.active?this.wasPlaying=!0:this.wasPlaying&&!this.sprite.active&&this.onFinish.invoke()}}]),SpriteEvents}(b.AutoComponent);y([b.AutoComponent.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",v.Sprite)],SpriteEvents.prototype,"sprite",void 0),SpriteEvents=y([b.AutoComponent.register],SpriteEvents),t.SpriteEvents=SpriteEvents},"./src/game/components/staticgraphic.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./src/game/autocomponent.ts"),b=r("./lib/foster/assets/index.ts"),v=r("./lib/foster/components/sprites/index.ts"),g=r("./lib/foster/util/index.ts"),StaticGraphic=function(e){function StaticGraphic(){return(0,o.default)(this,StaticGraphic),(0,u.default)(this,(StaticGraphic.__proto__||Object.getPrototypeOf(StaticGraphic)).apply(this,arguments))}return(0,f.default)(StaticGraphic,e),(0,a.default)(StaticGraphic,[{key:"addedToScene",value:function(){(0,d.default)(StaticGraphic.prototype.__proto__||Object.getPrototypeOf(StaticGraphic.prototype),"addedToScene",this).call(this);var e=b.Assets.textures[this.opts.texture];if(!e)throw Error("texture not in Assets: "+this.opts.texture);this.entity.add(new v.Graphic(e,new g.Vector(this.opts.x,this.opts.y)))}}]),StaticGraphic}(y.AutoComponent);StaticGraphic=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([y.AutoComponent.register],StaticGraphic),t.StaticGraphic=StaticGraphic},"./src/game/components/teleport.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/inherits.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/typeof.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/index.ts"),Teleport=function(e){function Teleport(e){(0,o.default)(this,Teleport);var t=(0,a.default)(this,(Teleport.__proto__||Object.getPrototypeOf(Teleport)).call(this));return t.name=e,t}return(0,u.default)(Teleport,e),Teleport}(h.Component);Teleport=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,d.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([h.Component.register,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,d.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[String])],Teleport),t.Teleport=Teleport},"./src/game/components/topdowncontrols.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/createClass.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/get.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/index.ts"),_=r("./lib/foster/components/colliders/index.ts"),j=r("./lib/foster/components/sprites/index.ts"),x=r("./lib/foster/input/index.ts"),w=r("./lib/foster/util/index.ts"),k=r("./src/game/player.ts"),C=r("./src/game/game.ts"),O=r("./src/game/prefabs.ts"),S=r("./src/game/components/mover.ts"),T=r("./src/game/components/freezable.ts"),TopDownDirection=function(e){function TopDownDirection(){(0,u.default)(this,TopDownDirection);var e=(0,d.default)(this,(TopDownDirection.__proto__||Object.getPrototypeOf(TopDownDirection)).apply(this,arguments));return e.direction=new w.Vector(1,0),e}return(0,f.default)(TopDownDirection,e),TopDownDirection}(v.Component);TopDownDirection=y([v.Component.register],TopDownDirection),t.TopDownDirection=TopDownDirection;var FreezingShot=function(e){function FreezingShot(e){var t=e.shotSpeed;(0,u.default)(this,FreezingShot);var r=(0,d.default)(this,(FreezingShot.__proto__||Object.getPrototypeOf(FreezingShot)).call(this));return r.shotSpeed=10,r.shots=[],r.shotSpeed=void 0!==t?t:r.shotSpeed,r}return(0,f.default)(FreezingShot,e),(0,o.default)(FreezingShot,[{key:"addedToScene",value:function(){(0,a.default)(FreezingShot.prototype.__proto__||Object.getPrototypeOf(FreezingShot.prototype),"addedToScene",this).call(this),this.bodySprite=this.entity.getComponentByName("body"),this.mouthSprite=this.entity.getComponentByName("mouth"),this.mouthSprite.visible=!1}},{key:"update",value:function(){if(x.Keyboard.pressed(C.Game.KEYS.SHOOT)){var e=this.bodySprite.scale.x<0;if(this.mouthSprite.x=e?7:9,this.mouthSprite.visible=!0,this.mouthSprite.play("close",!0),this.shots.length>0)this.fireShot(this.shots.splice(0,1)[0]);else if(C.Game.cheats.unlimitedAmmo)this.fireShot("ice");else{var t=this.sceneX+(e?-17:17),r=this.scene.add(O.instantiatePrefab("empty_breath",null,t,this.sceneY));e&&(r.find(j.Sprite).flipX=!0)}}}},{key:"fireShot",value:function(e){var t=this,r=void 0;switch(e){case"ice":r="blue_orb";break;case"mimic":r="grey_orb";break;default:throw Error(r)}var n=this.scene.add(O.instantiatePrefab(r,null,this.physics.sceneCenterX,this.physics.sceneCenterY)),i=n.find(S.Mover),o=this.topDownDirection.direction,s=o.x,a=o.y,l=void 0;if("ice"===e){l=300;var u=!1;n.find(g.Physics).onCollide.push(function(e,t){var r=t.entity?t.entity.find(T.Freezable):null;r&&!u&&(u=!0,r.freeze())})}else{if("mimic"!==e)throw Error(e);l=120;var c=!1;n.group("player");var d=n.find(g.Physics);d.onCollide.push(function(e,r){if(!c){c=!0;var n=w.Vector.temp0.set(d.sceneCenterX,d.sceneCenterY).sub(w.Vector.temp2.set(12,12)).add(w.Vector.temp1.set(12*-s,12*-a));t.scene.add(new k.Player,n)}})}i.setDelta(s*l,a*l)}},{key:"didPickupHeart",value:function(e){this.shots.push(e.type)}},{key:"shotsLeft",get:function(){return this.shots.length}}]),FreezingShot}(v.Component);y([v.Component.require,b("design:type",TopDownDirection)],FreezingShot.prototype,"topDownDirection",void 0),y([v.Component.require,b("design:type",g.Physics)],FreezingShot.prototype,"physics",void 0),FreezingShot=y([v.Component.register,b("design:paramtypes",[Object])],FreezingShot),t.FreezingShot=FreezingShot;var TopDownControls=function(e){function TopDownControls(e){var t=e.maxSpeed;(0,u.default)(this,TopDownControls);var r=(0,d.default)(this,(TopDownControls.__proto__||Object.getPrototypeOf(TopDownControls)).call(this));return r.movingEnabled=!0,r.maxSpeed=55,r.addedSpeed=new w.Vector(0,0),r.maxSpeed=t,r}return(0,f.default)(TopDownControls,e),(0,o.default)(TopDownControls,[{key:"addedToScene",value:function(){var e=this;(0,a.default)(TopDownControls.prototype.__proto__||Object.getPrototypeOf(TopDownControls.prototype),"addedToScene",this).call(this),this.physics.onCollideX=function(){e.physics.speed.x=0},this.physics.onCollideY=function(){e.physics.speed.y=0}}},{key:"unstick",value:function(){var e=this.physics,t=["water_solid","solid"],r=e.collideAllMulti(t),n=e.sceneBounds.getCenter(w.Vector.temp0);if(r.length>0){var i=r[0],o=void 0;if(i instanceof _.Hitgrid){var s=[[e.collideAllMulti(t,-e.width,0).length,[-1,0]],[e.collideAllMulti(t,e.width,0).length,[1,0]],[e.collideAllMulti(t,0,-e.height).length,[0,-1]],[e.collideAllMulti(t,0,e.height).length,[0,1]]];s.sort(function(e,t){return w.Calc.cmp(e[0],t[0])}),o=s[0][1]}else if(i instanceof _.Hitbox){var a=[Math.abs(n.x-i.sceneLeft),[-1,0]],l=[Math.abs(n.x-i.sceneRight),[1,0]],u=[Math.abs(n.x-i.sceneTop),[0,-1]],c=[Math.abs(n.x-i.sceneBottom),[0,1]],d=[a,l,u,c];d.sort(function(e,t){return w.Calc.cmp(e[0],t[0])}),o=d[0][1]}e.entity.position.add(w.Vector.temp1.set(o[0],o[1]))}}},{key:"update",value:function(){(0,a.default)(TopDownControls.prototype.__proto__||Object.getPrototypeOf(TopDownControls.prototype),"update",this).call(this);var e=this.maxSpeed,t=285*v.Engine.delta,r=this.addedSpeed.set(0,0);if(this.movingEnabled){r.set((x.Keyboard.check(C.Game.KEYS.LEFT)?-t:0)+(x.Keyboard.check(C.Game.KEYS.RIGHT)?t:0),(x.Keyboard.check(C.Game.KEYS.UP)?-t:0)+(x.Keyboard.check(C.Game.KEYS.DOWN)?t:0));var n=this.entity.find(TopDownDirection);0===r.x&&0===r.y||(Math.abs(r.x)>Math.abs(r.y)?n.direction.set(r.x>0?1:-1,0):n.direction.set(0,r.y>0?1:-1))}this.physics.speed.add(r),this.physics.friction(0===r.x?245:0,0===r.y?245:0),this.physics.circularMaxspeed(e);var i=w.Calc.sign(this.physics.speed.x);0!==i&&(this.sprite.scale.x=i,this.sprite.x=i>0?0:this.sprite.width),this.movingEnabled&&this.sprite.play(this.physics.speed.length>0?"walk":"idle"),this.unstick()}}]),TopDownControls}(v.Component);y([v.Component.require,b("design:type",g.Physics)],TopDownControls.prototype,"physics",void 0),y([v.Component.require,b("design:type",j.Sprite)],TopDownControls.prototype,"sprite",void 0),y([v.Component.require,b("design:type",TopDownDirection)],TopDownControls.prototype,"topDownDirection",void 0),TopDownControls=y([v.Component.register,b("design:paramtypes",[Object])],TopDownControls),t.TopDownControls=TopDownControls},"./src/game/components/trigger.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./lib/foster/components/colliders/index.ts"),v=r("./src/game/game.ts"),g=r("./src/game/components/gameevents.ts"),Trigger=function(e){function Trigger(e){var t=e.active,r=e.hitboxName,n=e.onTrigger;(0,o.default)(this,Trigger);var i=(0,u.default)(this,(Trigger.__proto__||Object.getPrototypeOf(Trigger)).call(this,{active:t}));return i.triggerEvery=1,i.lastTrigger=-1,i.hitboxName=r,i.onTrigger=new g.EventDelegate(n),i}return(0,f.default)(Trigger,e),(0,a.default)(Trigger,[{key:"completeLevel",value:function(){this.scene.completeLevel()}},{key:"addedToScene",value:function(){(0,d.default)(Trigger.prototype.__proto__||Object.getPrototypeOf(Trigger.prototype),"addedToScene",this).call(this),void 0!==this.hitboxName?this.hitbox=this.entity.componentByName[this.hitboxName]:this.hitbox=this.entity.find(b.Hitbox),this.onTrigger.bind(this.entity)}},{key:"update",value:function(){if((0,d.default)(Trigger.prototype.__proto__||Object.getPrototypeOf(Trigger.prototype),"update",this).call(this),this.hitbox.check(v.Game.TAGS.PLAYER)){var e=y.Engine.elapsed;this.lastTrigger+this.triggerEvery>=e||(this.lastTrigger=e,this.onTrigger.invoke())}}}]),Trigger}(y.Component);Trigger=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([y.Component.register,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Trigger),t.Trigger=Trigger},"./src/game/components/waterflow.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,r;return j.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e.height)){n.next=12;break}r=0;case 3:if(!(r<e.width)){n.next=9;break}return n.next=6,[r,t];case 6:++r,n.next=3;break;case 9:++t,n.next=1;break;case 12:case"end":return n.stop()}},x[0],this)}function o(e,t){var r=void 0,n=e.getMapLocationByName("water_source");if(n){var o=n.getScenePosition(C.Vector.temp1).sub(t.getScenePosition(C.Vector.temp2)).div(C.Vector.temp3.set(t.tileWidth,t.tileHeight)),s=o.x,a=o.y;t.has(s,a)&&(r=[s,a])}if(!r){var l=!0,u=!1,c=void 0;try{for(var d,h=i(t)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=(0,g.default)(d.value,2),p=f[0],m=f[1];if(t.has(p,m)){r=[p,m];break}}}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}if(r){var y={},b={},v=function(e){var t=(0,g.default)(e,2);return t[0]+"_"+t[1]};b[v(r)]=!0;for(var _=[r],j=0;_.length>0&&++j<1e4;){var x=(0,g.default)(_.splice(0,1)[0],2),w=x[0],k=x[1],O=(v([w,k]),[]),T=!0,E=!1,P=void 0;try{for(var R,M=S[Symbol.iterator]();!(T=(R=M.next()).done);T=!0){var A=(0,g.default)(R.value,2),L=A[0],F=A[1],B=w+L,D=k+F,G=v([B,D]);!b[G]&&t.has(B,D)&&(b[G]=!0,O.push([L,F]),_.push([B,D]))}}catch(e){E=!0,P=e}finally{try{!T&&M.return&&M.return()}finally{if(E)throw P}}void 0===y[w]&&(y[w]={}),y[w][k]=O}return{flowmap:y,numTiles:j}}}var s=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/createClass.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/get.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/inherits.js"),b=n(y),v=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),g=n(v),_=r("./node_modules/babel-runtime/regenerator/index.js"),j=n(_),x=[i].map(j.default.mark);Object.defineProperty(t,"__esModule",{value:!0});var w=r("./lib/foster/index.ts"),k=r("./lib/foster/components/particles/index.ts"),C=r("./lib/foster/util/index.ts"),O=r("./src/game/components/hitgridwithholes.ts"),S=[[1,0],[0,1],[-1,0],[0,-1]],WaterFlow=function(e){function WaterFlow(e){var t=e.tilemap,r=e.hitgrid;(0,u.default)(this,WaterFlow);var n=(0,f.default)(this,(WaterFlow.__proto__||Object.getPrototypeOf(WaterFlow)).call(this));return n.currentStrength=10,n.rects=[],n.prewarmed=!1,n.debugSub=new C.Color(200,0,200,.8),n.tilemap=t,n.hitgrid=r,n}return(0,b.default)(WaterFlow,e),(0,d.default)(WaterFlow,[{key:"worldToMap",value:function(e){var t=this.scenePosition;e.x=Math.floor((e.x-t.x)/this.tilemap.tileWidth),e.y=Math.floor((e.y-t.y)/this.tilemap.tileHeight)}},{key:"trackObject",value:function(e){this.solids.trackObject(e);var t=[],r=[e.sceneBounds.getCenter(new C.Vector)],n=!0,i=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,c=this.getAtWorld(u);c&&c.length>0&&t.push.apply(t,(0,a.default)(c))}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}if(this.directionLastFrame){var d=!0,h=!1,f=void 0;try{for(var p,m=t[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var y=p.value;if(y[0]===this.directionLastFrame[0]&&y[1]===this.directionLastFrame[1])return y}}catch(e){h=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw f}}}return t.length>0?(this.directionLastFrame=t[0],this.directionLastFrame):void(this.directionLastFrame=void 0)}},{key:"initWaterflow",value:function(){this.map=o(this.scene,this.tilemap);for(var e=this.scenePosition,t=this.tilemap,r=t.tileWidth,n=t.tileHeight,i=0;i<this.tilemap.height;++i)for(var s=0;s<this.tilemap.width;++s)this.has(s,i)&&this.rects.push(new C.Rectangle(e.x+s*r,e.y+i*n,r,n));this.solids=new O.HitgridWithHoles(this.hitgrid.tileWidth,this.hitgrid.tileHeight,["water_solid"]);var a=!0,l=!1,u=void 0;try{for(var c,d=this.hitgrid.tiles()[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=(0,g.default)(c.value,2),f=h[0],p=h[1];this.solids.set(!0,f,p)}}catch(e){l=!0,u=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw u}}this.hitgrid.entity.add(this.solids),this.particles=this.entity.add(new k.ParticleSystem("water"))}},{key:"update",value:function(){if((0,m.default)(WaterFlow.prototype.__proto__||Object.getPrototypeOf(WaterFlow.prototype),"update",this).call(this),this.map||this.initWaterflow(),!this.prewarmed){this.prewarmed=!0;for(var e=0;e<1e3;++e)this.update()}var t=this.scenePosition,r=this.rects[Math.floor(C.Calc.range(0,this.rects.length))],n=this.tilemap,i=n.tileWidth,o=n.tileHeight;this.particles.activeParticles.length<10*this.map.numTiles&&this.particles.burst(r.x+i/2,r.y+o/2,0,i/2,o/2,5);var s=!0,a=!1,l=void 0;try{for(var u,c=this.particles.activeParticles[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=Math.floor((d.x-t.x)/i),f=Math.floor((d.y-t.y)/o),p=void 0!==this.map.flowmap[h]?this.map.flowmap[h][f]:void 0;if(p){var y=!0,b=!1,v=void 0;try{for(var _,j=p[Symbol.iterator]();!(y=(_=j.next()).done);y=!0){var x=(0,g.default)(_.value,2),w=x[0],k=x[1];d.accelX=Math.min(25*w*.4,48),d.accelY=Math.min(25*k*.4,48)}}catch(e){b=!0,v=e}finally{try{!y&&j.return&&j.return()}finally{if(b)throw v}}}else d.percent=1}}catch(e){a=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(a)throw l}}}},{key:"has",value:function(e,t){return void 0!==this.map.flowmap[e]&&!!this.map.flowmap[e][t]}},{key:"getAtWorld",value:function(e){var t=this.scenePosition,r=Math.floor((e.x-t.x)/this.tilemap.tileWidth),n=Math.floor((e.y-t.y)/this.tilemap.tileHeight);return void 0!==this.map.flowmap[r]?this.map.flowmap[r][n]:void 0}},{key:"debugRender",value:function(e){for(var t=w.Engine.graphics,r=this.tilemap,n=r.tileWidth,i=r.tileHeight,o=e.extents,s=this.scenePosition,a=Math.floor((o.left-s.x)/n)-1,l=Math.ceil((o.right-s.x)/n)+1,u=Math.floor((o.top-s.y)/i)-1,c=Math.ceil((o.bottom-s.y)/i)+1,d=a;d<l;d++)if(void 0!==this.map.flowmap[d])for(var h=u;h<c;h++)if(this.map.flowmap[d][h]){var f=s.x+d*n,p=s.y+h*i,m=new C.Color(1,0,1,.7),y=!0,b=!1,v=void 0;try{for(var _,j=this.map.flowmap[d][h][Symbol.iterator]();!(y=(_=j.next()).done);y=!0){var x=(0,g.default)(_.value,2),k=x[0],O=x[1];-1==k&&0==O?t.triangle(C.Vector.temp0.set(f,p+i/2),C.Vector.temp1.set(f+8,p),C.Vector.temp2.set(f+8,p+i),m):1==k&&0==O?t.triangle(C.Vector.temp0.set(f+n-8,p),C.Vector.temp1.set(f+n,p+i/2),C.Vector.temp2.set(f+n-8,p+i),m):0==k&&-1==O?t.triangle(C.Vector.temp0.set(f,p+8),C.Vector.temp1.set(f+n/2,p),C.Vector.temp2.set(f+n,p+8),m):0==k&&1==O&&t.triangle(C.Vector.temp0.set(f,p+i-8),C.Vector.temp1.set(f+n/2,p+i),C.Vector.temp2.set(f+n,p+i-8),m)}}catch(e){b=!0,v=e}finally{try{!y&&j.return&&j.return()}finally{if(b)throw v}}}}}]),WaterFlow}(w.Component);t.WaterFlow=WaterFlow},"./src/game/components/wobble.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var b=r("./lib/foster/index.ts"),v=r("./lib/foster/components/sprites/index.ts"),g=r("./lib/foster/util/index.ts"),_=r("./src/game/components/childentity.ts"),Wobble=function(e){function Wobble(){(0,o.default)(this,Wobble);var e=(0,u.default)(this,(Wobble.__proto__||Object.getPrototypeOf(Wobble)).apply(this,arguments));return e.startPos=new g.Vector,e.intensity=3,e.frequency=2.1,e.offset=0,e.extraHeight=-3,e.shadows=[],e}return(0,f.default)(Wobble,e),(0,a.default)(Wobble,[{key:"addedToScene",value:function(){(0,d.default)(Wobble.prototype.__proto__||Object.getPrototypeOf(Wobble.prototype),"addedToScene",this).call(this),this.offset=g.Calc.range(0,2*Math.PI),this.startPos.copy(this.graphic.position);var e=this.scene.numShadows,t=this.entity.add(new _.ChildEntity({name:"Wobble Child of "+this.entity.name}));t.child.depth=this.entity.depth+1;for(var r=0;r<e;++r){var n=this.scene.getShadow(r),i=t.entity.add(new v.Graphic(n,g.Vector.temp0.set(-4,-5)));i.alpha=.7,i.visible=!1,this.shadows.push(i)}}},{key:"update",value:function(){if((0,d.default)(Wobble.prototype.__proto__||Object.getPrototypeOf(Wobble.prototype),"update",this).call(this),!(b.Engine.delta<=0)){var e=Math.sin(b.Engine.elapsed*this.frequency+this.offset),t=(e+1)/2,r=Math.floor(t*this.shadows.length),n=this.startPos.y+t*this.intensity;this.graphic.y=n+this.extraHeight;for(var i=(this.startPos.y,this.intensity,this.startPos.y,this.intensity,0);i<this.shadows.length;++i)this.shadows[i].visible=i===r}}}]),Wobble}(b.Component);y([b.Component.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",v.Graphic)],Wobble.prototype,"graphic",void 0),Wobble=y([b.Component.register],Wobble),t.Wobble=Wobble},"./src/game/components/wonder.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/typeof.js"),m=n(p),y=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var v=r("./lib/foster/index.ts"),g=r("./lib/foster/components/index.ts"),_=r("./lib/foster/util/index.ts");r("./node_modules/reflect-metadata/Reflect.js");var Wonder=function(e){function Wonder(e){var t=e.speed;(0,o.default)(this,Wonder);var r=(0,u.default)(this,(Wonder.__proto__||Object.getPrototypeOf(Wonder)).call(this));return r.speed=15,r.speed=t,r}return(0,f.default)(Wonder,e),(0,a.default)(Wonder,[{key:"addedToScene",value:function(){(0,d.default)(Wonder.prototype.__proto__||Object.getPrototypeOf(Wonder.prototype),"addedToScene",this).call(this),this.dir="right"}},{key:"onCollide",value:function(e){e.entity!==this.entity&&("right"===this.dir?this.dir="up":"left"===this.dir?this.dir="down":"down"===this.dir?this.dir="right":"up"===this.dir&&(this.dir="left"))}},{key:"update",value:function(){var e=this;(0,d.default)(Wonder.prototype.__proto__||Object.getPrototypeOf(Wonder.prototype),"update",this).call(this),this.physics.onCollideX=function(t){e.onCollide(t)},this.physics.onCollideY=function(t){e.onCollide(t)};var t=_.Vector[this.dir];this.physics.speed.set(this.speed*t.x,this.speed*t.y)}}]),Wonder}(v.Component);y([v.Component.require,b("design:type",g.Physics)],Wonder.prototype,"physics",void 0),Wonder=y([v.Component.register,b("design:paramtypes",[Object])],Wonder),t.Wonder=Wonder},"./src/game/door.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/inherits.js"),d=n(c);Object.defineProperty(t,"__esModule",{value:!0});var h=r("./lib/foster/index.ts"),f=r("./lib/foster/components/index.ts"),p=r("./lib/foster/components/colliders/index.ts"),m=r("./lib/foster/util/index.ts"),y=r("./src/game/game.ts"),b=r("./src/game/level.ts"),v=r("./src/game/player.ts"),g=function(e){function t(e,r,n,i){(0,o.default)(this,t);var s=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.spawnPlayerTimer=1,s.playerOn=!0,s.isOpen=!0,s.closedEase=1,s.name=e,s.gotoScene=r,s.gotoDoor=n,s.spawnPlayer=i,s.add(s.hitbbox=new p.Hitbox({left:-4,top:-8,width:8,height:8})),s}return(0,d.default)(t,e),(0,a.default)(t,[{key:"added",value:function(){this.spawnPlayer&&this.scene.camera.position.set(this.x,this.y-64)}},{key:"update",value:function(){var e=this;if(this.spawnPlayer&&this.spawnPlayerTimer>0){if(this.spawnPlayerTimer-=1.25*h.Engine.delta,this.scene.camera.position.set(this.x,this.y-64*m.Ease.cubeIn(this.spawnPlayerTimer)),this.spawnPlayerTimer<=0){var t=void 0;this.scene.add(t=new v.Player,new m.Vector(this.x,this.y)),t.find(f.Physics).speed.y=120,this.closedEase=0}}else this.hitbbox.check(y.Game.TAGS.PLAYER)?this.gotoScene.length>0&&!this.playerOn&&(this.scene.remove(this.scene.find(v.Player)),this.playerOn=!0,this.scene.doSlide(1,0,function(){h.Engine.goto(new b.Level(e.gotoScene,e.gotoDoor),!1)})):(this.isOpen&&this.gotoScene.length<=0&&(this.hitbbox.tag(y.Game.TAGS.SOLID),this.isOpen=!1),this.playerOn=!1,this.isOpen||(this.closedEase=m.Calc.approach(this.closedEase,1,h.Engine.delta)))}},{key:"render",value:function(){h.Engine.graphics.rect(this.x+-6,this.y-13,12,13,y.Game.COLORS[3]),h.Engine.graphics.rect(this.x+-5,this.y-12,10,12,y.Game.COLORS[2]),h.Engine.graphics.rect(this.x+-4,this.y-11,8,11,y.Game.COLORS[3]),this.isOpen||h.Engine.graphics.rect(this.x+-3,this.y-10,6,10*this.closedEase,y.Game.COLORS[2])}}]),t}(h.Entity);t.Door=g},"./src/game/editablescene.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/util/index.ts"),m=r("./lib/foster/index.ts"),y=r("./lib/foster/components/colliders/index.ts"),b=r("./lib/foster/input/index.ts"),v=r("./src/game/level.ts"),g=r("./lib/foster/input/index.ts"),_=r("./src/game/game.ts"),j=r("./src/game/prefabs.ts"),x=r("./src/game/editor.ts"),w=function(e){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,o.default)(this,t);var r=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.sliderEnabled=!0,r.slider=0,r.sliderTo=-1,r.groupsMask=[],r.selection=null,r.dragging=null,r.dragOrigin=new p.Vector,r.draggingRect=new p.Rectangle,r.loaded=!1,window.scene=r,e||(r.slider=r.sliderTo),r}return(0,f.default)(t,e),(0,a.default)(t,[{key:"findUnder",value:function(e){var t=this.groupsMask.length>0?this.allInGroups(this.groupsMask):this.entities,r=null;return t.each(function(t){if(t.visible){var n=t.findAll(y.Hitbox),i=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;if(u.sceneBounds.containsPoint(e))return r=u,!1}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}}),r}},{key:"renderSlider",value:function(){var e=_.Game.transitionColor;if(!this.loaded)return void m.Engine.graphics.clear(e);var t=p.Vector.temp5.copy(this.camera.position),r=t.x+p.Ease.cubeInOut(this.slider)*(m.Engine.width+0),n=t.y-m.Engine.height/2,i=r-m.Engine.width/2;m.Engine.width,m.Engine.graphics.setRenderTarget(m.Engine.graphics.buffer),m.Engine.graphics.shader=p.Shaders.texture,m.Engine.graphics.shader.set("matrix",this.camera.matrix),m.Engine.graphics.rect(i-1,n,m.Engine.width+2,m.Engine.height,e);var o=p.Vector.temp0.set(i,n),s=p.Vector.temp1.set(i-0,n+m.Engine.height),a=p.Vector.temp2.set(i,n+m.Engine.height);m.Engine.graphics.triangle(o,s,a,e)}},{key:"update",value:function(){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),_.Game.developer&&this.checkCommonDevKeys(),this.sliderEnabled&&this.slider!==this.sliderTo&&(this.slider=p.Calc.approach(this.slider,this.sliderTo,1.7*m.Engine.delta),this.slider===this.sliderTo&&this.sliderOnEnd&&(this.sliderOnEnd(),this.sliderOnEnd=null)),m.Engine.debugMode&&_.Game.developer&&this.updateDebugView()}},{key:"checkCommonDevKeys",value:function(){g.Keyboard.pressed(_.Game.KEYS.SELECT)&&(m.Engine.debugMode=!m.Engine.debugMode),g.Keyboard.pressed(_.Game.KEYS.PAUSE)&&(m.Engine.paused=!m.Engine.paused),m.Engine.timeScale=g.Keyboard.check(_.Game.KEYS.FAST_FORWARD)?7:1}},{key:"render",value:function(){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),this.sliderEnabled&&this.slider!==this.sliderTo&&this.renderSlider()}},{key:"debugRender",value:function(e){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"debugRender",this).call(this,e),m.Engine.graphics.fillText("scene: "+this.scene,100,100)}},{key:"updateDebugView",value:function(){var e=this.camera.worldMouse;if(b.Mouse.leftPressed){var r=(this.groupsMask.length>0?this.allInGroups(this.groupsMask):this.entities,this.findUnder(e));r&&(this.selection=r,window.editSelection=r,x.editJSON(this.selection.prefabLink),this.dragging=r,this.draggingMode=t.borderContainsPoint(r.sceneBounds,e,3),this.draggingRect.copy(r.sceneBounds),this.dragOrigin.copy(e).sub(p.Vector.temp1.set(r.left,r.top)))}else if(b.Mouse.left&&this.dragging){var n=p.Vector.temp0.copy(e).sub(this.dragOrigin),i=p.Vector.temp1.copy(e).sub(p.Vector.temp2.set(this.draggingRect.x,this.draggingRect.y)),o=p.Vector.temp3.set(this.draggingRect.right,this.draggingRect.bottom).sub(e);i.x+=1,i.y+=1;var s={};switch(this.draggingMode){case"None":s={left:n.x,top:n.y};break;case"Top":s={top:n.y,height:o.y};break;case"Bottom":s={height:i.y};break;case"Left":s={left:n.x,width:o.x};break;case"Right":s={width:i.x};break;case"BottomRight":s={width:i.x,height:i.y};break;case"TopLeft":s={top:n.y,height:o.y,left:n.x,width:o.x};break;case"TopRight":s={top:n.y,height:o.y,width:i.x};break;case"BottomLeft":s={height:i.y,left:n.x,width:o.x};break;default:throw Error("unexpected RectBorder")}this.dragging.setPrefabValues(s)}else if(!b.Mouse.left){var a="inherit",l=this.findUnder(e);if(l){var u=l.sceneBounds,c=t.borderContainsPoint(u,e,3);a="None"===c?"move":t.cursorForRectBorder(c)}m.Engine.graphics.canvas.style.cursor=a}b.Mouse.leftReleased&&this.dragging&&(this.dragging=null,j.sendPrefabsToServer())}},{key:"markLevel",value:function(){localStorage.setItem(t.DEV_LEVELNAME_KEY,this.scene)}},{key:"transitionTo",value:function(e){var t=this;this.sliderEnabled?this.doSlide(1,0,function(){return t.goto(e)}):this.goto(e)}},{key:"transitionToTitle",value:function(){var e=this,t=new(r("./src/game/titlescreen.ts").TitleScreen);this.sliderEnabled?this.doSlide(1,0,function(){return e.gotoLevel(t)}):this.gotoLevel(t)}},{key:"gotoLevel",value:function(e){m.Engine.goto(e,!0)}},{key:"goto",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.gotoLevel(new v.Level(e,"start",t))}},{key:"reloadLevel",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.goto(this.scene,!1):this.transitionTo(this.scene)}},{key:"nextLevel",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.levelDelta(1,e,t)}},{key:"prevLevel",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.levelDelta(-1,e,t)}},{key:"newGame",value:function(){_.Game.clearCompletedLevels(),this.nextLevel()}},{key:"completeLevel",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_.Game.markLevelCompleted(this.scene),this.nextLevel(e)}},{key:"levelDelta",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=_.Game.levels.indexOf(this.scene),i=1!=e||r?_.Game.levels[n+e]:_.Game.getNextLevelName();i&&(t?this.transitionTo(i):this.goto(i,!1))}},{key:"doSlide",value:function(e,t,r){this.sliderOnEnd||(this.slider=e,this.sliderTo=t,this.sliderOnEnd=r)}}],[{key:"borderContainsPoint",value:function(e,t){var r=t.x,n=t.y,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=e.left,s=e.top,a=e.right,l=e.bottom,u=Math.abs(o-r)<=i,c=Math.abs(a-r)<=i,d=Math.abs(s-n)<=i,h=Math.abs(l-n)<=i;if(u&&d)return"TopLeft";if(c&&d)return"TopRight";if(u&&h)return"BottomLeft";if(c&&h)return"BottomRight";var f=o<r&&r<a,p=s<n&&n<l;return d&&f?"Top":h&&f?"Bottom":u&&p?"Left":c&&p?"Right":"None"}},{key:"cursorForRectBorder",value:function(e){switch(e){case"Top":return"n-resize";case"Bottom":return"s-resize";case"Left":return"w-resize";case"Right":return"e-resize";case"TopLeft":return"nw-resize";case"TopRight":return"ne-resize";case"BottomLeft":return"sw-resize";case"BottomRight":return"se-resize";case"None":return"inherit";default:throw Error("unexpected RectBorder value")}}}]),t}(m.Scene);w.DEV_LEVELNAME_KEY="lastDevLevel",t.EditableScene=w},"./src/game/editor.ts":function(e,t,r){"use strict";function n(e){}Object.defineProperty(t,"__esModule",{value:!0}),r("./public_dev/tree-editor.css"),t.editJSON=n},"./src/game/game.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){x=r("./src/game/particletemplates.ts"),x.defineTemplates()}function o(e){var t=[];return JSON.stringify(e,function(e,r){if("object"===(void 0===r?"undefined":(0,h.default)(r))&&null!==r){if(-1!==t.indexOf(r))return;t.push(r)}return r},2)}var s=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),a=(n(s),r("./node_modules/babel-runtime/helpers/classCallCheck.js")),l=n(a),u=r("./node_modules/babel-runtime/helpers/createClass.js"),c=n(u),d=r("./node_modules/babel-runtime/helpers/typeof.js"),h=n(d);Object.defineProperty(t,"__esModule",{value:!0});var f=r("./lib/foster/index.ts"),p=r("./lib/foster/assets/index.ts"),m=r("./lib/foster/assets/textures/index.ts"),y=r("./src/game/savegame.ts"),b=r("./lib/foster/input/index.ts"),v=r("./lib/foster/util/index.ts"),g=r("./src/game/autosprite.ts"),_=(r("./src/game/level.ts"),r("./src/game/titlescreen.ts")),j=(r("./src/game/prefabtestscene.ts"),r("./src/game/prefabs.ts")),x=void 0,w=function(){function e(){(0,l.default)(this,e)}return(0,c.default)(e,null,[{key:"start",value:function(){f.Engine.start(":) ;) >:-]",320,288,5,function(){f.Engine.graphics.clearColor=e.transitionColor,e.load()})}},{key:"load",value:function(){var t=e.KEYS,r=b.Keyboard.map;r(t.LEFT,[b.Key.left,b.Key.a,b.Key.j]),r(t.RIGHT,[b.Key.right,b.Key.d,b.Key.l]),r(t.UP,[b.Key.up,b.Key.w,b.Key.i]),r(t.DOWN,[b.Key.down,b.Key.s,b.Key.k]),r(t.A,[b.Key.z,b.Key.c]),r(t.B,[b.Key.x,b.Key.v]),r(t.SHOOT,[b.Key.space,b.Key.ctrl]),r(t.RESTART,[b.Key.r]),r(t.START,[b.Key.enter]),r(t.SELECT,[b.Key.shift]),r(t.TELEPORT,[b.Key.t]),r(t.PAUSE,[b.Key.p]),r(t.FAST_FORWARD,[b.Key.graveAccent]),r(t.DEBUG_NEXT_LEVEL,[b.Key.closeBraket]),r(t.DEBUG_PREV_LEVEL,[b.Key.openBracket]),r(t.DEBUG_OPEN_DOOR,[b.Key.o]),r(t.BACK_TO_TITLE,[b.Key.escape]),i(),UpdateLoadingBarProgress(.2),new p.AssetLoader("assets").addJson("assets.json").load(function(){UpdateLoadingBarProgress(.25),e.loadAssets(p.Assets.json["assets/assets.json"])})}},{key:"getAtlasReaderByName",value:function(e){switch(e){case"DoodleStudio":return m.AtlasReaders.DoodleStudio;case"Asesprite":return m.AtlasReaders.Aseprite;default:throw Error("expected a loaderType but got "+e)}}},{key:"loadAssets",value:function(t){var r=new p.AssetLoader("assets");r.progressCallback=function(e){UpdateLoadingBarProgress(.25+.75*e)};var n=!0,i=!1,o=void 0;try{for(var s,a=t.atlases[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,u=l.name,c=l.image,d=l.data,h=l.loaderType;r.addAtlas(u,c,d,this.getAtlasReaderByName(h))}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}var f="fantasy/TMX/";r.addAtlas("gfx","atlas.png","atlas.json",m.AtlasReaders.Aseprite).addXml(f+"oryx_creatures.tsx").addXml(f+"oryx_items.tsx").addXml(f+"oryx_world2.tsx").addTexture(f+"../oryx_world2.png",v.Color.black).addTexture(f+"../oryx_creatures.png",v.Color.black).addTexture(f+"../oryx_items.png").addJson("world.json").addJson("prefabs.json").addTexture("instructions.png").addTexture("newgame.png").addTexture("startgame.png").load(function(){e.levels=p.Assets.json["assets/world.json"].levels,j.setPrefabs(p.Assets.json["assets/prefabs.json"]),RemoveLoadingBar(),e.begin()})}},{key:"debugText",value:function(t){t="object"===(void 0===t?"undefined":(0,h.default)(t))?o(t):t,e.getConsoleEl().innerText=""+t}},{key:"markLevelCompleted",value:function(e){y.SaveGame.markLevelCompleted(e)}},{key:"getNextLevelName",value:function(){return y.SaveGame.getNextLevelName()}},{key:"clearCompletedLevels",value:function(){return y.SaveGame.clearCompletedLevels()}},{key:"getConsoleEl",value:function(){var e=document.getElementById("debug_console");return e||(e=document.createElement("pre"),e.setAttribute("id","debug_console"),document.body.appendChild(e)),e}},{key:"getStartScene",value:function(){return new _.TitleScreen}},{key:"begin",value:function(){j.initPrefabs(),g.loadAutoSprites(),f.Engine.graphics.pixel=p.Assets.atlases.gfx.get("pixel"),f.Engine.goto(e.getStartScene(),!1)}},{key:"hasLevelsCompleted",get:function(){return y.SaveGame.hasLevelsCompleted}}]),e}();w.developer=!1,w.cheats={unlimitedAmmo:!1},w.TAGS={PLAYER:"player",SOLID:"solid"},w.KEYS={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down",A:"a",B:"b",SHOOT:"shoot",START:"start",SELECT:"select",BACK_TO_TITLE:"back_to_title",TELEPORT:"teleport",RESTART:"restart",PAUSE:"pause",FAST_FORWARD:"fast_forward",DEBUG_NEXT_LEVEL:"debug_next_level",DEBUG_PREV_LEVEL:"debug_prev_level",DEBUG_OPEN_DOOR:"debug_open_door"},w.SOUNDS={},w.COLORS=[new v.Color(155/255,188/255,15/255,1),new v.Color(139/255,172/255,15/255,1),new v.Color(48/255,98/255,48/255,1),new v.Color(15/255,56/255,15/255,1)],w.transitionColor=new v.Color(0,.25,.05),w.levels=[],w.debugConsoleId="debug_console",t.Game=w},"./src/game/hud.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;return t.alpha=0,g.Tween.create(e).start(r,0,1,v.Ease.linear,function(e){t.alpha=e},!0).restart()}function o(e){if("ice"===e)return _.SpriteBank.get("blue_orb").first.frames[0];if("mimic"===e)return _.SpriteBank.get("grey_orb").first.frames[0];throw Error(e)}var s=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/createClass.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/get.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/inherits.js"),m=n(p);Object.defineProperty(t,"__esModule",{value:!0});var y=r("./lib/foster/index.ts"),b=r("./lib/foster/components/sprites/index.ts"),v=r("./lib/foster/util/index.ts"),g=r("./lib/foster/components/index.ts"),_=r("./lib/foster/assets/animations/index.ts"),j=r("./src/game/components/index.ts"),x=function(e){function t(){(0,a.default)(this,t);var e=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.graphics=[],e.totalPadding=new v.Vector(10,10),e.lastShots="~",e.lastNumShots=-1,e.name="Hud",e}return(0,m.default)(t,e),(0,u.default)(t,[{key:"started",value:function(){(0,f.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"started",this).call(this);var e=this.scene.firstColliderInTag("player");this.gun=e.entity.find(j.FreezingShot),this.rect=this.add(new b.Rectsprite(0,8,new v.Color(0,0,0,.8))),this.rect.y=5}},{key:"update",value:function(){(0,f.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=_.SpriteBank.get("blue_orb");if(e){var r=this.scene.camera.extents;this.position.set(r.left,r.top).add(this.totalPadding);var n=this.gun.shotsLeft,s=e.first.frames[0],a=this.gun.shots.join("_");if(a!==this.lastShots){this.lastShots=a;var l=this.gun.shots.length-this.lastNumShots;for(this.lastNumShots=this.gun.shots.length;this.graphics.length;)this.remove(this.graphics.splice(0,1)[0]);var u=0,c=!0,d=!1,h=void 0;try{for(var p,m=this.gun.shots[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var y=p.value,g=o(y),j=new b.Graphic(g,v.Vector.temp0.set(this.graphics.length*(g.width+4),0));this.graphics.push(this.add(j)),l>0&&this.gun.shots.length-u-1<l&&i(this,j,.3),u++}}catch(e){d=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw h}}this.rect.visible=n>0,this.rect.width=(s.width+4)*n-4}}}}]),t}(y.Entity);t.Hud=x},"./src/game/level.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=e.getAttribute(t);return parseInt(r,10)}function o(e,t){switch(t){case"int":return parseInt(e,10);case"float":return parseFloat(e);case"bool":return""+e=="true";case"string":default:return""+e}}function s(e){return parseInt(e,10)}function a(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e.tileproperties)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=(0,f.default)(o.value,2),u=l[0],c=l[1].shadow;void 0!==c&&(t[c]=e.tilemap.getTileSubtexture(s(u)))}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}function l(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e.tileproperties)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=(0,f.default)(o.value,2),u=l[0],c=l[1],d=c.anim_name,h=c.anim_frame,p=c.anim_speed,m=c.anim_track,y=c.anim_goto;if(d){var b=s(u),v=m||"main",g=t[d]||(t[d]={});void 0===g[v]&&(g[v]={frames:[],speed:2.2,gotoFrames:null});var _=g[v].frames,j=e.tilemap.getTileSubtexture(b);void 0===h?_.push(j):_.splice(h,0,j),void 0!==p&&(g.speed=p),void 0!==y&&(g[v].gotoFrames=[""+y])}}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}var x=!0,w=!1,k=void 0;try{for(var C,O=Object.entries(t)[Symbol.iterator]();!(x=(C=O.next()).done);x=!0){var S=(0,f.default)(C.value,2),T=S[0],E=S[1],P=A.SpriteBank.create(T),R=!0,M=!1,L=void 0;try{for(var F,B=Object.entries(E)[Symbol.iterator]();!(R=(F=B.next()).done);R=!0){var D=(0,f.default)(F.value,2),G=D[0],U=D[1],N=U.speed,I=U.frames,V=U.gotoFrames,X=P.add(G,N,I,!0);if(V){var Y=X.get(G);Y.goto=V,Y.loops=!1}}}catch(e){M=!0,L=e}finally{try{!R&&B.return&&B.return()}finally{if(M)throw L}}}}catch(e){w=!0,k=e}finally{try{!x&&O.return&&O.return()}finally{if(w)throw k}}}function u(e){var t,r,n,i,o,s,a,l;return d.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=0,r=0,n=!0,i=!1,o=void 0,u.prev=5,s=e.data[Symbol.iterator]();case 7:if(n=(a=s.next()).done){u.next=15;break}return l=a.value,u.next=11,{tile:l,mapX:t,mapY:r};case 11:++t>=e.width&&(t=0,r++);case 12:n=!0,u.next=7;break;case 15:u.next=21;break;case 17:u.prev=17,u.t0=u.catch(5),i=!0,o=u.t0;case 21:u.prev=21,u.prev=22,!n&&s.return&&s.return();case 24:if(u.prev=24,!i){u.next=27;break}throw o;case 27:return u.finish(24);case 28:return u.finish(21);case 29:case"end":return u.stop()}},O[0],this,[[5,17,21,29],[22,,24,28]])}var c=r("./node_modules/babel-runtime/regenerator/index.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),f=n(h),p=r("./node_modules/babel-runtime/helpers/get.js"),m=n(p),y=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),b=n(y),v=r("./node_modules/babel-runtime/helpers/createClass.js"),g=n(v),_=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),j=n(_),x=r("./node_modules/babel-runtime/helpers/inherits.js"),w=n(x),k=r("./node_modules/babel-runtime/helpers/typeof.js"),C=n(k),O=[u].map(d.default.mark),S=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,C.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var T=r("./lib/foster/index.ts"),E=r("./lib/foster/components/index.ts"),P=r("./lib/foster/assets/textures/index.ts"),R=r("./lib/foster/renderers/spriteRenderer.ts"),M=r("./lib/foster/assets/index.ts"),A=r("./lib/foster/assets/animations/index.ts"),L=r("./lib/foster/components/colliders/index.ts"),F=r("./lib/foster/components/sprites/index.ts"),B=r("./lib/foster/input/index.ts"),D=r("./lib/foster/renderer.ts"),G=r("./lib/foster/util/index.ts"),U=r("./src/game/clouds.ts"),N=r("./src/game/components/index.ts"),I=r("./src/game/door.ts"),V=r("./src/game/editablescene.ts"),X=r("./src/game/game.ts"),Y=r("./src/game/player.ts"),H=r("./src/game/hud.ts"),W=r("./src/game/prefabs.ts"),z=["terrain","shadows","corners","water","water_corners"],WobblyShaderParams=function(e){function WobblyShaderParams(){return(0,b.default)(this,WobblyShaderParams),(0,j.default)(this,(WobblyShaderParams.__proto__||Object.getPrototypeOf(WobblyShaderParams)).apply(this,arguments))}return(0,w.default)(WobblyShaderParams,e),(0,g.default)(WobblyShaderParams,[{key:"update",value:function(){this.tilemap.color.r=(Math.sin(T.Engine.elapsed)+1)/2+.5,this.tilemap.color.g=(Math.cos(T.Engine.elapsed)+1)/2}}]),WobblyShaderParams}(T.Component);S([T.Component.require,function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,C.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",F.Tilemap)],WobblyShaderParams.prototype,"tilemap",void 0),WobblyShaderParams=S([T.Component.register],WobblyShaderParams);var K=r("./src/game/shaders/fucked.shader.ts"),q=function(e){function t(e){(0,b.default)(this,t);var r=(0,j.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.sortOrder=1,r.groupsMask.push(e),r.shader=t.shader,r.shaderCameraUniformName="matrix",r}return(0,w.default)(t,e),(0,g.default)(t,null,[{key:"shader",get:function(){return t._shader||(t._shader=K()),t._shader}}]),(0,g.default)(t,[{key:"render",value:function(){return this.shader.set("time",T.Engine.elapsed),(0,m.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(D.Renderer),J=function(e){function t(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,b.default)(this,t);var i=(0,j.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i._shadows={},i.events=new N.GameEventsEmitter,i.reloading=!1,i.scene=e,i.entrance=r,i.renderers.at(0).groupsMask.push("sprite"),i.bgTarget=P.RenderTarget.create(24,24),i.bgRenderer=new R.SpriteRenderer,i.bgRenderer.groupsMask=["bg"],i.bgRenderer.target=i.bgTarget,i.addRenderer(i.bgRenderer),i.addRenderer(new q("water")),i}return(0,w.default)(t,e),(0,g.default)(t,[{key:"getShadow",value:function(e){return this._shadows[e]}},{key:"loadTiledXML",value:function(e){for(var t=[],r=[],n=0;n<e.childElementCount;++n){var o=e.children[n];if("layer"===o.nodeName){var s=o.children[0],a=[],l=s.textContent.split(","),u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;a.push(parseInt(p,10))}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}t.push({width:i(o,"width"),height:i(o,"height"),name:o.getAttribute("name"),type:"tilelayer",data:a,objects:[],x:0,y:0})}else{if("tileset"!==o.nodeName)throw Error(o.nodeName);var m=o.getAttribute("source");!m||m.length,r.push({firstgid:i(o,"firstgid"),source:o.getAttribute("source")})}}return{tilewidth:i(e,"tilewidth"),tileheight:i(e,"tileheight"),width:i(e,"width"),height:i(e,"height"),type:e.nodeName,tilesets:r,layers:t}}},{key:"loadTiled",value:function(e,t,r,n){function i(e){var t=!0,r=!1,n=void 0;try{for(var i,o=h[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(e>=s.firstGid&&e<s.lastGid)return s}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}function s(e){if(e<1)return null;var t=i(e);if(!t)return null;var r=e-t.firstGid;return(null!=t.tileproperties?t.tileproperties[r]:void 0)||null}var c=e+t,d=void 0;if(t.endsWith("json")?d=M.Assets.json[c]:t.endsWith("tmx")&&(d=this.loadTiledXML(M.Assets.xml[c].documentElement)),!d)throw Error("no level at "+(e+t));var h=[],p=!0,m=!1,y=void 0;try{for(var b,v=d.tilesets[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=b.value,_=g.firstgid;if(void 0!==g.source)!function(){for(var t=function(e){if(null==e)throw Error("got null");var t=parseInt(e,10);if(isNaN(t))throw Error("expected a number, got "+e);return t},r=e+g.source,n=M.Assets.xml[r],i=n.documentElement,s=function(e){return t(i.getAttribute(e))},a=(s("columns"),s("tilewidth")),l=s("tileheight"),u=_+s("tilecount"),c=-1,d="",f=-1,p={},m=0;m<i.children.length;++m){var y=i.children[m];switch(y.nodeName){case"image":c=t(y.getAttribute("width")),t(y.getAttribute("height")),y.getAttribute("trans"),d=y.getAttribute("source"),f=Math.floor(c/a);break;case"tileoffset":var b=t(y.getAttribute("x")),v=t(y.getAttribute("y"));new G.Vector(b,v);break;case"tile":var j=t(y.getAttribute("id")),x=y.getAttribute("type");x&&(p[j]={type:x});for(var w=0;w<y.children.length;++w){var k=y.children[w];switch(k.nodeName){case"properties":for(var C=p[j]||(p[j]={}),O=0;O<k.children.length;++O){var S=k.children[O],T=S.getAttribute("name");if(null==T)throw Error("null name");var E=S.getAttribute("value");if(null==E)throw Error("expected non-null at value");var P=S.getAttribute("type");C[T]=o(E,P)}break;default:throw Error("unknown <tile/> child "+k.nodeName)}}break;default:throw Error("unknown node name "+y.nodeName)}}var R={firstGid:_,lastGid:u,tilewidth:a,tileheight:l,tilesPerRow:f,image:d,tileproperties:p,tilemap:null};h.push(R)}();else{var j=_+function(e,t){var r=e[t],n=void 0===r?"undefined":(0,C.default)(r);if("number"!==n)throw Error("expected "+t+" to be a number, got "+n);if(isNaN(r))throw Error("expected "+t+" to be a number, got NaN");return r}(g,"tilecount"),x={firstGid:_,lastGid:j,tilewidth:g.tilewidth,tileheight:g.tileheight,tilesPerRow:Math.floor(g.imagewidth/g.tilewidth),tileproperties:g.tileproperties,image:g.image,tilemap:null};h.push(x)}}}catch(e){m=!0,y=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw y}}var w=new L.Hitgrid(d.tilewidth,d.tileheight,[X.Game.TAGS.SOLID]);r.add(w);var k=void 0;k=new L.Hitgrid(d.tilewidth,d.tileheight,["water"]),n.add(k);var O={},S=!0,E=!1,P=void 0;try{for(var R,A=h[Symbol.iterator]();!(S=(R=A.next()).done);S=!0){var B=R.value,D=e+B.image,U=M.Assets.textures[D],V=new F.Tilemap(U,B.tilewidth,B.tileheight);B.tilemap=V,l(B),a(B,this._shadows);var Y=!0,H=!1,K=void 0;try{for(var q,J=Object.entries(B.tileproperties)[Symbol.iterator]();!(Y=(q=J.next()).done);Y=!0){var $=(0,f.default)(q.value,2),Q=$[0],Z=$[1];Z&&(O[parseInt(Q,10)+B.firstGid]=Z.solid)}}catch(e){H=!0,K=e}finally{try{!Y&&J.return&&J.return()}finally{if(H)throw K}}}}catch(e){E=!0,P=e}finally{try{!S&&A.return&&A.return()}finally{if(E)throw P}}var ee=[],te=-1,re=!0,ne=!1,ie=void 0;try{for(var oe,se=d.layers[Symbol.iterator]();!(re=(oe=se.next()).done);re=!0){var ae=oe.value;if(te+=1,"objects"===ae.name){var le=!0,ue=!1,ce=void 0;try{for(var de,he=u(ae)[Symbol.iterator]();!(le=(de=he.next()).done);le=!0){var fe=de.value,pe=fe.mapX,me=fe.mapY,ye=fe.tile,be=s(ye);if(be)if(be.pushable){var ve=void 0,ge=i(ye);ge&&ge.tilemap&&(this.add(ve=new T.Entity(pe*ge.tilewidth,me*ge.tileheight)),ve.depth=-10,ve.add(new F.Graphic(ge.tilemap.getTileSubtexture(ye-ge.firstGid))),W.instantiatePrefab("pushableBlock",ve))}else if(be.type){var _e=i(ye),je=0,xe=0;_e&&(je=.5*(d.tilewidth-_e.tilewidth),xe=.5*(d.tileheight-_e.tileheight));var we=pe*d.tilewidth+je,ke=me*d.tileheight+xe,Ce=W.instantiatePrefab(be.type,void 0,we,ke);_e&&_e.tilemap&&!Ce.find(F.Graphic)&&!Ce.find(N.MapLocation)&&Ce.add(be.anim_name?new F.Sprite({animation:be.anim_name}):new F.Graphic(_e.tilemap.getTileSubtexture(ye-_e.firstGid))),this.add(Ce)}}}catch(e){ue=!0,ce=e}finally{try{!le&&he.return&&he.return()}finally{if(ue)throw ce}}}else if(-1!==z.indexOf(ae.name)){var Oe=!0,Se=!1,Te=void 0;try{for(var Ee,Pe=u(ae)[Symbol.iterator]();!(Oe=(Ee=Pe.next()).done);Oe=!0){var Re=Ee.value,pe=Re.mapX,me=Re.mapY,ye=Re.tile;if(0!==ye){"terrain"===ae.name&&O[ye]?w.set(!0,pe,me):"water"===ae.name&&k.set(!0,pe,me);var Me=i(ye);if(!Me)throw Error("couldn't find a tilesetInfo for tile "+ye+" at ("+pe+", "+me+") in layer "+ae.name);var Ae=ye-Me.firstGid,Le=Math.floor(Ae/Me.tilesPerRow),Fe=Math.floor(Ae%Me.tilesPerRow);if(void 0===ee[te]&&Me.tilemap){var Be=ee[te]=new F.Tilemap(Me.tilemap.texture,Me.tilemap.tileWidth,Me.tilemap.tileHeight),De=ae.name.startsWith("water")?n:r;De.add(Be)}ee[te].set(Fe,Le,pe,me)}}}catch(e){Se=!0,Te=e}finally{try{!Oe&&Pe.return&&Pe.return()}finally{if(Se)throw Te}}"water"===ae.name&&ee[te].entity.add(new N.WaterFlow({tilemap:ee[te],hitgrid:k}))}else if("entities"===ae.name){var Ge=!0,Ue=!1,Ne=void 0;try{for(var Ie,Ve=ae.objects[Symbol.iterator]();!(Ge=(Ie=Ve.next()).done);Ge=!0){var Xe=Ie.value;if("door"===Xe.type){var Ye=Xe.name,He=Ye===this.entrance;this.add(new I.Door(Ye,Xe.gotoScene||"",Xe.gotoDoor||"",He),new G.Vector(parseInt(Xe.x,10),parseInt(Xe.y,10)))}else if("teleport"===Xe.type){var We=new T.Entity(Xe.x,Xe.y);We.add(new N.Teleport(Xe.name)),this.add(We),We.group("teleports")}else{var ze=new T.Entity(Xe.x,Xe.y);ze.depth=-2e3;var Ke=void 0,qe=Xe.gid;if("number"==typeof qe&&qe>=1){var Z=s(qe),Je=i(qe);Z&&Z.type&&(Ke=Z.type),Je&&Je.tilemap&&ze.add(new F.Graphic(Je.tilemap.getTileSubtexture(qe-Je.firstGid)))}else Ke=Xe.type;Ke&&W.instantiatePrefab(Ke,ze),ze.components.count>0&&this.add(ze)}}}catch(e){Ue=!0,Ne=e}finally{try{!Ge&&Ve.return&&Ve.return()}finally{if(Ue)throw Ne}}}else if("solids"===ae.name){var $e=!0,Qe=!1,Ze=void 0;try{for(var et,tt=u(ae)[Symbol.iterator]();!($e=(et=tt.next()).done);$e=!0){var rt=et.value,pe=rt.mapX,me=rt.mapY,ye=rt.tile;0!==ye&&w.set(!0,pe,me)}}catch(e){Qe=!0,Ze=e}finally{try{!$e&&tt.return&&tt.return()}finally{if(Qe)throw Ze}}}}}catch(e){ne=!0,ie=e}finally{try{!re&&se.return&&se.return()}finally{if(ne)throw ie}}}},{key:"loadOgmo",value:function(e,t){var r=M.Assets.json[e],n=!0,i=!1,o=void 0;try{for(var s,a=r.layers[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;if("terrain"===l.name){var u=new F.Tilemap(M.Assets.atlases.gfx.get("tilemap"),8,8);t.add(u);for(var c=l.data.split("\n"),d=0;d<c.length;d++)for(var h=0,f=c[d].split(","),p=0;p<f.length-1;p++)if("-1"!==f[p]){var m=f[p],y=f[p+1];u.set(parseInt(m,10),parseInt(y,10),h,d),h++,p++}else h++}else if("solids"===l.name){var b=new L.Hitgrid(8,8,[X.Game.TAGS.SOLID]);t.add(b);for(var v=l.data.split("\n"),g=0;g<v.length;g++)for(var _=0;_<v[g].length;_++)"1"===v[g][_]&&b.set(!0,_,g)}else if("bgclouds"===l.name){var j=!0,x=!1,w=void 0;try{for(var k,C=l.entities[Symbol.iterator]();!(j=(k=C.next()).done);j=!0){var O=k.value,S=O.index,T=O.x,E=O.y;this.add(new U.Clouds(S,10),new G.Vector(T,E))}}catch(e){x=!0,w=e}finally{try{!j&&C.return&&C.return()}finally{if(x)throw w}}}else if("fgclouds"===l.name){var P=!0,R=!1,A=void 0;try{for(var B,D=l.entities[Symbol.iterator]();!(P=(B=D.next()).done);P=!0){var N=B.value,S=N.index,V=N.x,Y=N.y;this.add(new U.Clouds(S,-10),new G.Vector(V,Y))}}catch(e){R=!0,A=e}finally{try{!P&&D.return&&D.return()}finally{if(R)throw A}}}else if("entities"===l.name){var H=!0,W=!1,z=void 0;try{for(var K,q=l.entities[Symbol.iterator]();!(H=(K=q.next()).done);H=!0){var J=K.value;"door"===J.name&&this.add(new I.Door(J.doorName,J.gotoScene,J.gotoDoor,J.doorName===this.entrance),new G.Vector(parseInt(J.x,10),parseInt(J.y,10)))}}catch(e){W=!0,z=e}finally{try{!H&&q.return&&q.return()}finally{if(W)throw z}}}}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"begin",value:function(){var e=this;(0,m.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"begin",this).call(this),this.loaded=!1,new M.AssetLoader("assets").addXml("fantasy/TMX/"+this.scene+".tmx").load(function(){e.loaded=!0,e.afterLoad()})}},{key:"afterLoad",value:function(){this.camera.origin.set(T.Engine.width/2,T.Engine.height/2),this.camera.position.set(T.Engine.width/2,T.Engine.height/2),this.add(new H.Hud);var e=this.terrain=this.add(new T.Entity);e.name="terrain",e.depth=100,this.loadTiled("assets/fantasy/TMX/",this.scene+".tmx",e,e);var t=this.add(new T.Entity);t.name="events",t.add(this.events);var r=this.getMapLocationByName("player_spawn");r&&this.add(new Y.Player,r.getScenePosition(G.Vector.temp0).add(G.Vector.temp3.set(0,-8))),this.markLevel()}},{key:"getMapLocationByName",value:function(e){return this.findAllComponents(N.MapLocation).find(function(t){return t.name===e})}},{key:"checkDevKeys",value:function(){if(B.Keyboard.pressed(B.Key.one)&&(this.terrain.visible=!this.terrain.visible),B.Keyboard.pressed(X.Game.KEYS.DEBUG_OPEN_DOOR)&&N.GameEventsEmitter.callAll(this.events.onTreasureCollected),B.Keyboard.pressed(X.Game.KEYS.DEBUG_NEXT_LEVEL))this.nextLevel(!1,!0);else{if(!B.Keyboard.pressed(X.Game.KEYS.DEBUG_PREV_LEVEL))return!0;this.prevLevel(!1,!0)}return!1}},{key:"update",value:function(){var e=this;if((0,m.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),(!X.Game.developer||this.checkDevKeys())&&this.loaded){if(B.Keyboard.pressed(X.Game.KEYS.BACK_TO_TITLE))return void this.transitionToTitle();this.dust&&this.dust.burst(this.camera.position.x+T.Engine.width,this.camera.position.y-T.Engine.height+Math.random()*T.Engine.height*2,0),0!==this.allCollidersInTag("player").length||this.reloading||(this.reloading=!0,E.Alarm.create(this.terrain).start(1.92,function(){return e.reloadLevel()}));var r=this.firstColliderInTag(X.Game.TAGS.PLAYER);if(r){var n=r.entity,i=(new G.Rectangle).copy(this.camera.extents),o=G.Vector.temp5.set(i.width/2,i.height/2),s=this.terrain.find(F.Tilemap),a=s.getSceneBounds(G.Rectangle.temp0),l=G.Vector.temp0.set(n.x,n.y).sub(o).max(G.Vector.temp2.set(a.x,a.y)).min(G.Vector.temp2.set(a.right,a.bottom)).add(o);a.width<i.width&&(l.x=a.centerX+s.tileWidth/2),a.height<i.height&&(l.y=a.centerY+s.tileHeight/2),this.camera.position.copy(l)}}}},{key:"numShadows",get:function(){return Object.keys(this._shadows).length}},{key:"waterFlow",get:function(){return this.terrain.find(N.WaterFlow)}}]),t}(V.EditableScene);t.Level=J,window.Assets=M.Assets},"./src/game/particletemplates.ts":function(e,t,r){"use strict";function n(){function e(e,t){new i.ParticleTemplate(e).colors(t,t).accelY(-90,15).duration(.35).alphaFrom(1).alphaTo(0).alphaEase(o.Ease.linear)}new i.ParticleTemplate("water").colors([o.Color.white,new o.Color(0,0,1,1),new o.Color(0,0,.5,1)]).duration(3.2,.9),new i.ParticleTemplate("pickup").speed(0,90).accelY(350).duration(.3,.09).colors([o.Color.red,new o.Color(1,.5,1)]).alphaFrom(1).alphaTo(0).alphaEase(o.Ease.linear),new i.ParticleTemplate("freezing_shot_shatter").speed(0,90).accelY(100,200).duration(.22,.1).colors([new o.Color(100,100,255),new o.Color(150,150,255)]).alphaFrom(.9,.1).alphaTo(0),new i.ParticleTemplate("ice_shatter").speed(0,90).accelY(100).duration(.22,.1).colors([o.Color.white,o.Color.blue]).alphaFrom(.9,.1).alphaTo(0),new i.ParticleTemplate("treasure_pickup").speed(0,-10).accelY(-800,500).colors([new o.Color(0,1,1)]).duration(.7).alphaFrom(1).alphaTo(0),new i.ParticleTemplate("dust").accelX(-120,40).accelY(-20,10).colors([o.Color.red,o.Color.white,o.Color.blue]).duration(12).scale(1.5,.5),new i.ParticleTemplate("dragon_fire_burst").colors([o.Color.red,new o.Color(.8,.1,.1),new o.Color(.4,0,0)]).speed(0,90).accelY(350).duration(.3,.09).colors([o.Color.red,new o.Color(1,.5,1)]).alphaFrom(1).alphaTo(0).alphaEase(o.Ease.linear),e("ice_heart_ambient",[o.Color.fromHex("#3448ac"),o.Color.fromHex("#3b77c2")]),e("mimic_heart_ambient",[o.Color.fromHex("#c0c0c0"),o.Color.fromHex("#666666"),o.Color.fromHex("#ffffff")])}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./lib/foster/components/particles/index.ts"),o=r("./lib/foster/util/index.ts");t.defineTemplates=n},"./src/game/player.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/index.ts"),m=r("./lib/foster/components/colliders/index.ts"),y=r("./lib/foster/components/sprites/index.ts"),b=r("./lib/foster/util/index.ts"),v=r("./lib/foster/input/index.ts"),g=r("./src/game/components/index.ts"),_=r("./src/game/game.ts"),j=r("./src/game/level.ts"),x=r("./lib/foster/components/index.ts"),w=r("./src/game/prefabs.ts"),k=function(e){function t(){(0,o.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.killed=!1,w.instantiatePrefab("player",e),e.group("player"),e.physics=e.find(x.Physics),e.find(g.Health).onDie.push(function(){e.find(g.TopDownControls).movingEnabled=!1,e.find(g.FreezingShot).active=!1,e._untagHack()}),e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"added",value:function(){if((0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.level){var e=this.level.getShadow(0),r=this.add(new y.Graphic(e,b.Vector.temp0.set(0,3)));r.alpha=.5,this.shadowGraphic=r}}},{key:"update",value:function(){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),v.Keyboard.pressed(_.Game.KEYS.RESTART)&&(this.killed?this.level&&this.level.reloadLevel(!1):this.kill()),this.physics&&this.shadowGraphic&&(this.shadowGraphic.visible=!this.physics.check("solid",0,3))}},{key:"kill",value:function(){this.killed||(this.killed=!0,this.find(g.Health).kill())}},{key:"_untagHack",value:function(){this.ungroup("player"),this.findAll(m.Collider).forEach(function(e){return e.untag("player")})}},{key:"level",get:function(){return this.scene instanceof j.Level?this.scene:null}}]),t}(p.Entity);t.Player=k},"./src/game/prefabs.ts":function(e,t,r){"use strict";function n(e){if(e.indexOf("_")!==e.lastIndexOf("_"))throw Error("only zero or one underscores permitted in name '"+e+"'");var t=e.split("_"),r=(0,c.default)(t,2);return[r[0],r[1]]}function i(e,t,r,i){var o=p[e];if(!o)throw Error("no prefab named "+e);t||(t=new h.Entity),void 0!==r&&(t.x=r),void 0!==i&&(t.y=i),void 0===t.name&&(t.name=e);var s=!0,a=!1,l=void 0;try{for(var u,f=Object.keys(o)[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var m=u.value,y=n(m),b=(0,c.default)(y,2),v=b[0],g=b[1],_=o[m],j=d.getComponentByName(v);if(!j)throw Error("no component named "+v+" found in template\n "+JSON.stringify(o,null,2));var x=new j(_);x.prefabLink=_,t.add(x),void 0!==g&&(t.componentByName[g]=x)}}catch(e){a=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(a)throw l}}return t}function o(){return p}function s(e){p=e}function a(){function e(){}var t=window.LiveReload;t&&(e.identifier="Foo2",e.prototype.reload=function(e,t){return!!(m>0&&e.endsWith("prefabs.json"))&&(m-=1,!0)},t.addPlugin(e))}function l(){function e(e){if(e.status>=200&&e.status<300)return e;var t=Error(e.statusText);throw t.response=e,t}m=2,fetch("/prefabs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o())}).then(e).then(function(e){return e.text()}).then(function(e){f.Game.debugText("Saved prefabs at "+h.Engine.elapsed+": "+e)}).catch(function(e){})}var u=r("./node_modules/babel-runtime/helpers/slicedToArray.js"),c=function(e){return e&&e.__esModule?e:{default:e}}(u);Object.defineProperty(t,"__esModule",{value:!0});var d=r("./src/game/components/index.ts"),h=r("./lib/foster/index.ts"),f=r("./src/game/game.ts");t.instantiatePrefab=i;var p={};t.getPrefabs=o,t.setPrefabs=s;var m=0;t.initPrefabs=a,t.sendPrefabsToServer=l,t.default=p},"./src/game/prefabtestscene.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/inherits.js"),u=n(l);Object.defineProperty(t,"__esModule",{value:!0});var c=r("./src/game/components/burst.ts"),d=r("./lib/foster/index.ts"),h=r("./src/game/editablescene.ts"),f=r("./src/game/prefabs.ts"),p=function(e){function t(e){(0,o.default)(this,t);var r=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return setTimeout(function(){r.entity=r.add(f.instantiatePrefab(e)),r.camera.origin.set(d.Engine.width/2,d.Engine.height/2),r.entity.components.each(function(e){e instanceof c.Burst&&(e.loop=!0)})},50),r}return(0,u.default)(t,e),t}(h.EditableScene);t.PrefabTestScene=p},"./src/game/savegame.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s);Object.defineProperty(t,"__esModule",{value:!0});var l=r("./src/game/game.ts"),u=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"clearCompletedLevels",value:function(){this._setCompletedLevels([])}},{key:"markLevelCompleted",value:function(e){var t=this.completedLevels;-1===t.indexOf(e)&&t.push(e),this._setCompletedLevels(t)}},{key:"_setCompletedLevels",value:function(e){window.localStorage&&localStorage.setItem("completedLevels",JSON.stringify(e||[]))}},{key:"getNextLevelName",value:function(){var e=this.completedLevels,t=!0,r=!1,n=void 0;try{for(var i,o=l.Game.levels[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(-1===e.indexOf(s))return s}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return null}},{key:"hasLevelsCompleted",get:function(){return this.completedLevels.length>0}},{key:"completedLevels",get:function(){return window.localStorage?JSON.parse(localStorage.getItem("completedLevels")||"[]"):[]}}]),e}();t.SaveGame=u},"./src/game/shaders/fucked.frag.glsl":function(e,t){e.exports="// fragment shader\r\nprecision mediump float;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\nvarying vec4 v_colorAdd;\r\nuniform sampler2D texture;\r\n\r\nvoid main() \r\n{\r\n\tgl_FragColor = texture2D(texture, v_texcoord) * v_color;\r\n}"},"./src/game/shaders/fucked.shader.ts":function(e,t,r){"use strict";function n(){return{vert:r("./src/game/shaders/fucked.vert.glsl"),frag:r("./src/game/shaders/fucked.frag.glsl")}}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./lib/foster/util/index.ts"),o=void 0;e.exports=function(){var e=n(),t=e.vert,r=e.frag;return o=new i.Shader(t,r,[new i.ShaderUniform("time",i.ShaderUniformType.float),new i.ShaderUniform("matrix",i.ShaderUniformType.matrix3d),new i.ShaderUniform("texture",i.ShaderUniformType.sampler2D)],[new i.ShaderAttribute("a_position",i.ShaderAttributeType.Position),new i.ShaderAttribute("a_texcoord",i.ShaderAttributeType.Texcoord),new i.ShaderAttribute("a_color",i.ShaderAttributeType.Color),new i.ShaderAttribute("a_colorAdd",i.ShaderAttributeType.Color)])}},"./src/game/shaders/fucked.vert.glsl":function(e,t){e.exports="uniform float time;\r\n\r\nattribute vec2 a_position;\r\nattribute vec2 a_texcoord;\r\nattribute vec4 a_color;\r\nattribute vec4 a_colorAdd;\r\n\r\nuniform mat3 matrix;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\nvarying vec4 v_colorAdd;\r\n\r\nvoid main()\r\n{\r\n\tvec4 pos = vec4((matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);\r\n\tgl_Position = pos;\r\n\tv_texcoord = vec2(a_texcoord.x, a_texcoord.y);\r\n\tv_color = vec4(a_color.rgb * a_color.a, a_color.a);\r\n\tv_colorAdd = vec4(a_colorAdd.rgb * a_colorAdd.a, a_colorAdd.a);\r\n}"},"./src/game/titlescreen.ts":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(i),s=r("./node_modules/babel-runtime/helpers/createClass.js"),a=n(s),l=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n(l),c=r("./node_modules/babel-runtime/helpers/get.js"),d=n(c),h=r("./node_modules/babel-runtime/helpers/inherits.js"),f=n(h);Object.defineProperty(t,"__esModule",{value:!0});var p=r("./lib/foster/index.ts"),m=r("./src/game/components/staticgraphic.ts"),y=r("./lib/foster/components/sprites/index.ts"),b=r("./src/game/player.ts"),v=r("./lib/foster/input/index.ts"),g=r("./lib/foster/util/index.ts"),_=r("./src/game/prefabs.ts"),j=r("./src/game/game.ts"),x=r("./src/game/editablescene.ts"),w=function(e){function t(){(0,o.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sliderEnabled=!1,e.scene="title",e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"begin",value:function(){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"begin",this).call(this);var e=new p.Entity,r=new g.Color(0,0,0,.3),n=e.add(new y.Rectsprite(1e3,70,r));n.x=-50,n.rotation=-.1;var i=e.add(new y.Rectsprite(1e3,80,r));i.x=-50,i.y=260,i.rotation=-.1,this.add(e);var o=(this.add(_.instantiatePrefab("title")),this.add(new p.Entity));o.add(new m.StaticGraphic({texture:"assets/instructions.png",x:45,y:130}));var s=j.Game.hasLevelsCompleted?"assets/newgame.png":"assets/startgame.png";o.add(new m.StaticGraphic({texture:s,x:45,y:190})),this.player=this.add(new b.Player,new g.Vector(220,169)),this.loaded=!0}},{key:"update",value:function(){(0,d.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),v.Keyboard.pressed(v.Key.enter)?this.nextLevel():v.Keyboard.pressed(v.Key.n)&&this.newGame()}}]),t}(x.EditableScene);t.TitleScreen=w},"./src/main.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/game/game.ts");r("./src/game/editor.ts"),n.Game.start()}});